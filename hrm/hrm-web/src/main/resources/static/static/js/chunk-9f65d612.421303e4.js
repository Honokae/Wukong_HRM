(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f65d612"],{"04bc":function(e,t,a){"use strict";a("47a1")},"0942":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("b775");function n(e){return Object(i["a"])({url:"hrmActionRecord/queryRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"0a70":function(e,t,a){},"1a16":function(e,t,a){"use strict";a("43284")},"1be9":function(e,t,a){e.exports={colorPrimary:"#0052cc",colorBlack:"#172b4d",colorSuccess:"#36b37e",colorWarning:"#ffab00",colorDanger:"#ff5630",colorN40:"#dfe1e6",axisLineColor:"#dfe1e6",axisLabelFontWeight:"500"}},43284:function(e,t,a){},"47a1":function(e,t,a){},5039:function(e,t,a){"use strict";a("9ab1")},"7afe":function(e,t,a){"use strict";a("efe5")},"9ab1":function(e,t,a){},a05e:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"h",(function(){return d})),a.d(t,"g",(function(){return u}));var i=a("b775");function n(e){return Object(i["a"])({url:"hrmRecruitPost/queryById/".concat(e),method:"post"})}function s(){return Object(i["a"])({url:"hrmRecruitPost/queryAllRecruitPostList",method:"post"})}function r(e){return Object(i["a"])({url:"hrmRecruitPost/queryPostStatusNum",method:"post"})}function o(e){return Object(i["a"])({url:"hrmRecruitPost/queryRecruitPostPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["a"])({url:"hrmRecruitPost/addRecruitPost",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["a"])({url:"hrmRecruitPost/setRecruitPost",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(i["a"])({url:"hrmRecruitPost/updateRecruitPostStatus",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(){return Object(i["a"])({url:"hrmRecruitPostType/queryPostType",method:"post"})}},ba9d:function(e,t,a){"use strict";a("0a70")},c705:function(e,t,a){"use strict";a("1be9")},efe5:function(e,t,a){},f452:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"employee-index",attrs:{id:"employee-main-container"}},[a("xr-header",{attrs:{"ft-top":"0",placeholder:"请输入职位名称",label:"招聘职位","show-search":""},on:{search:e.searchClick}},[a("template",{slot:"bottom-ft"},[e.hasFilterContent?a("el-button",{attrs:{type:"text"},on:{click:e.resetFilter}},[e._v("清除筛选")]):e._e(),e._v(" "),a("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:e.popoverFilterWidth,"field-from":e.filterObj,"field-list":e.filterList,"has-content":e.hasFilterContent,placement:"bottom-end"},on:{"update:fieldFrom":function(t){e.filterObj=t},sure:e.refreshList,reset:e.resetFilter}})],1),e._v(" "),a("template",{slot:"ft"},[e.createAuth?a("el-button",{attrs:{type:"primary"},on:{click:e.createClick}},[e._v("新建招聘职位")]):e._e()],1)],2),e._v(" "),a("div",{staticClass:"crm-container"},[a("xr-table-header",{attrs:{handles:e.tabelHandles,selects:e.selectionList},on:{command:e.handleCommand}},[a("el-tabs",{staticStyle:{width:"100%","margin-bottom":"-8px"},on:{"tab-click":e.createSaveSuccess},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}},e._l(e.tabList,(function(t){return a("el-tab-pane",{key:t.name,attrs:{name:t.name}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.label)),t.num>0?a("span",{staticClass:"tab-pane-num",staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.num))]):e._e()])])})))],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"n-table--border el-table-header--white",class:e.WKConfig.tableStyle.class,staticStyle:{width:"100%","margin-top":"8px"},attrs:{id:"crm-table","row-height":40,data:e.list,height:e.tableHeight,"cell-class-name":e.cellClassName,stripe:e.WKConfig.tableStyle.stripe,"use-virtual":"","highlight-current-row":""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[e._l(e.fieldList,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.fieldName,label:t.name,"min-width":t.width,formatter:e.fieldFormatter,"show-overflow-tooltip":""}})})),e._v(" "),a("el-table-column"),e._v(" "),e.updateStatusAuth?a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(a){e.handleTypeClick(a,t.row)}}},[a("i",{staticClass:"el-icon-more table-more"}),e._v(" "),a("el-dropdown-menu",{staticStyle:{width:"150px"},attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.getRowDropdownItems(t.row),(function(t,i){return a("el-dropdown-item",{key:i,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])})))],1)]}}])}):e._e()],2),e._v(" "),a("div",{staticClass:"p-contianer"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.showDview?a("post-detail",{attrs:{id:e.rowID},on:{handle:e.detailHandle,close:function(t){e.showDview=!1}}}):e._e(),e._v(" "),e.isCreate?a("post-create-view",{attrs:{detail:e.handleRowData},on:{success:e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e(),e._v(" "),a("stop-post-dialog",{attrs:{id:e.handleRowData?e.handleRowData.postId:"",visible:e.stopDialogShow},on:{"update:visible":function(t){e.stopDialogShow=t},success:e.createSaveSuccess}})],1)},n=[],s=a("5530"),r=(a("14d9"),a("b64b"),a("b0c0"),a("d3b7"),a("159b"),a("ac1f"),a("841c"),a("99af"),a("a05e")),o=a("7078"),l=a("0f4c"),c=a("5057"),d=a("8e93"),u=a("9011"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xr-create",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.titleContent},on:{close:e.close,save:e.saveClick}},[a("create-sections",{attrs:{title:"基本信息"}},[a("wk-form",{ref:"baseForm",attrs:{model:e.baseForm,rules:e.baseRules,"field-from":e.baseForm,"field-list":e.baseFields,"label-position":"top"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.data;return[i&&"postType"==i.formType?a("el-cascader",{ref:"elCascader",staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,props:e.defaultProps,options:e.options,"change-on-select":""},model:{value:e.baseForm[i.field],callback:function(t){e.$set(e.baseForm,i.field,t)},expression:"baseForm[data.field]"}}):i&&"salary"==i.formType?a("div",{staticClass:"wk-range-select"},[a("flexbox",{staticClass:"wk-range-select__top"},[a("el-input-number",{attrs:{disabled:e.baseForm.noLimitsalary,max:1e8,min:0,controls:!1,precision:2},model:{value:e.baseForm.minSalary,callback:function(t){e.$set(e.baseForm,"minSalary",t)},expression:"baseForm.minSalary"}}),e._v(" "),a("span",{staticClass:"range-separator"},[e._v("至")]),e._v(" "),a("el-input-number",{attrs:{disabled:e.baseForm.noLimitsalary,max:1e8,min:0,controls:!1,precision:2},model:{value:e.baseForm.maxSalary,callback:function(t){e.$set(e.baseForm,"maxSalary",t)},expression:"baseForm.maxSalary"}}),e._v(" "),a("el-select",{staticClass:"range-unit",attrs:{disabled:e.baseForm.noLimitsalary},model:{value:e.baseForm.salaryUnit,callback:function(t){e.$set(e.baseForm,"salaryUnit",t)},expression:"baseForm.salaryUnit"}},[a("el-option",{attrs:{value:1,label:"元/月"}}),e._v(" "),a("el-option",{attrs:{value:2,label:"元/年"}})],1)],1),e._v(" "),a("el-checkbox",{on:{change:e.salaryCheckBoxChange},model:{value:e.baseForm.noLimitsalary,callback:function(t){e.$set(e.baseForm,"noLimitsalary",t)},expression:"baseForm.noLimitsalary"}},[e._v("面议")])],1):i&&"age"==i.formType?a("div",{staticClass:"wk-range-select"},[a("flexbox",{staticClass:"wk-range-select__top"},[a("el-input-number",{attrs:{disabled:e.baseForm.noLimitAge,max:99,min:0,controls:!1,precision:0},model:{value:e.baseForm.minAge,callback:function(t){e.$set(e.baseForm,"minAge",t)},expression:"baseForm.minAge"}}),e._v(" "),a("span",{staticClass:"range-separator"},[e._v("至")]),e._v(" "),a("el-input-number",{attrs:{disabled:e.baseForm.noLimitAge,max:99,min:0,controls:!1,precision:0},model:{value:e.baseForm.maxAge,callback:function(t){e.$set(e.baseForm,"maxAge",t)},expression:"baseForm.maxAge"}})],1),e._v(" "),a("el-checkbox",{on:{change:e.ageCheckBoxChange},model:{value:e.baseForm.noLimitAge,callback:function(t){e.$set(e.baseForm,"noLimitAge",t)},expression:"baseForm.noLimitAge"}},[e._v("不限")])],1):e._e()]}}])})],1)],1)},f=[],p=(a("4de4"),a("a15b"),a("8156")),h=a("5067"),b=a("10ff");a("d81d"),a("d9e2");function g(e){var t=Object.keys(e);return t.map((function(t){return{label:e[t],value:parseInt(t)}}))}var y={1:"全职",2:"实习",3:"兼职"},v={1:"不限",2:"一年以内",3:"一至三年",4:"三至五年",5:"五至十年",6:"十年以上"},w={1:"不限",2:"高中及以上",3:"大专及以上",4:"本科及以上",5:"硕士及以上",6:"博士"},C={1:"紧急",2:"一般"},T={1:"元/月",2:"元/年"},x=[{name:"职位名称",field:"postName",formType:"text",width:150,isTable:!0,setting:[]},{name:"用人部门",field:"deptId",formType:"structure",isTable:!0,props:{dataType:"hrm"},request:l["e"],setting:[]},{name:"工作性质",field:"jobNature",formType:"select",isTable:!0,setting:g(y)},{name:"工作城市",field:"city",formType:"address",isTable:!0,setting:[]},{name:"招聘人数",field:"recruitNum",formType:"number",max:999999999,isTable:!0,setting:[]},{name:"已入职人数",field:"hasEntryNum",formType:"number",isTable:!0,width:100,setting:[]},{name:"招聘原因",field:"reason",formType:"text",setting:[]},{name:"工作经验",field:"workTime",formType:"select",isTable:!0,setting:g(v)},{name:"学历要求",field:"educationRequire",formType:"select",isTable:!0,width:100,setting:g(w)},{name:"薪资范围",field:"salary",formType:"salary",isTable:!0,width:150,setting:[]},{name:"最迟到岗时间",field:"latestEntryTime",formType:"date",setting:[]},{name:"年龄要求",field:"age",formType:"age",isTable:!0,width:100,setting:[]},{name:"紧急程度",field:"emergencyLevel",formType:"radio",isTable:!0,setting:g(C)},{name:"招聘负责人",field:"ownerEmployeeId",formType:"user",isTable:!0,width:120,props:{label:"employeeName",value:"employeeId",isList:!0},request:o["F"],setting:[]},{name:"职业类型",field:"postTypeId",formType:"postType",isTable:!0,setting:[]},{name:"面试官",field:"interviewEmployeeIds",formType:"user",radio:!1,isTable:!0,width:120,props:{label:"employeeName",value:"employeeId",isList:!0},request:o["F"],setting:[]},{name:"职位描述",field:"description",formType:"textarea",setting:[]}],_=function(e,t,a){t&&1==t.length?a(new Error("职位类型需至少选到第二级")):a()},k={postName:[{required:!0,message:"请输入",trigger:["change"]}],jobNature:[{required:!0,message:"请选择",trigger:["change"]}],postType:[{validator:_,trigger:["change"]}]},F={fields:x,rules:k,jobNatureValue:y,workTimeValue:v,educationRequireValue:w,emergencyLevelValue:C,getValueList:g,salaryUnitValue:T},S=a("ed08"),j=a("6bfe"),A={name:"PostCreateView",components:{XrCreate:p["a"],CreateSections:b["a"],WkForm:h["a"]},filters:{},props:{detail:Object},data:function(){return{loading:!1,baseFields:F.fields.filter((function(e){return"hasEntryNum"!==e.field})),baseRules:F.rules,baseForm:{},options:[],defaultProps:{children:"children",label:"name",value:"id"}}},computed:{titleContent:function(){return this.detail?"编辑招聘职位":"新建招聘职位"}},watch:{},created:function(){var e=this;if(this.getOptions(),this.detail){var t={};this.baseFields.forEach((function(a){if("salary"==a.formType)-1==e.detail.salaryUnit?(t.noLimitsalary=!0,t.salaryUnit=1):(t.minSalary=Object(j["c"])(e.detail.minSalary)?void 0:e.detail.minSalary,t.maxSalary=Object(j["c"])(e.detail.maxSalary)?void 0:e.detail.maxSalary,t.salaryUnit=e.detail.salaryUnit);else if("age"==a.formType)-1==e.detail.minAge&&-1==e.detail.maxAge?t.noLimitAge=!0:(t.minAge=Object(j["c"])(e.detail.minAge)?void 0:e.detail.minAge,t.maxAge=Object(j["c"])(e.detail.maxAge)?void 0:e.detail.maxAge);else if("interviewEmployeeIds"==a.field)t.interviewEmployeeIds=e.detail.interviewEmployeeIds?e.detail.interviewEmployeeIds.split(","):[];else if("city"==a.field){var i=e.detail[a.field];if(i){var n=i.split(",");t.city={province:n[0]||"",city:n[1]||"",area:n[2]||""}}else t.city={}}else"number"===a.formType?t[a.field]=Object(j["c"])(e.detail[a.field])?void 0:e.detail[a.field]:t[a.field]=e.detail[a.field]})),this.baseForm=t}else this.baseForm={jobNature:1,salaryUnit:1,emergencyLevel:1,city:{province:"",city:"",area:""}}},mounted:function(){},beforeDestroy:function(){},methods:{getOptions:function(){var e=this;Object(r["g"])().then((function(t){if(e.options=t.data||[],e.detail){var a=e.detail.postTypeId?Object(S["v"])(e.detail.postTypeId,e.options):[];e.$set(e.baseForm,"postTypeId",a)}})).catch((function(){}))},selectProvince:function(e,t){this.baseForm[t.field]=e.value},close:function(){this.$emit("close")},saveClick:function(){var e=this;this.$refs.baseForm.$children[0].validate((function(t){t&&e.uploadCreateData()}))},salaryCheckBoxChange:function(e){e||1==this.baseForm.salaryUnit&&2==this.baseForm.salaryUnit||(this.baseForm.salaryUnit=1),this.baseForm.minSalary=void 0,this.baseForm.maxSalary=void 0},ageCheckBoxChange:function(){this.baseForm.minAge=void 0,this.baseForm.maxAge=void 0},uploadCreateData:function(){var e=this,t=Object(S["z"])(this.baseForm);if(t.noLimitsalary&&(t.minSalary=-1,t.maxSalary=-1,t.salaryUnit=-1),delete t["noLimitsalary"],t.interviewEmployeeIds&&Object(j["a"])(t.interviewEmployeeIds)&&(t.interviewEmployeeIds=t.interviewEmployeeIds.join(",")),t.postTypeId&&t.postTypeId.length?t.postTypeId=t.postTypeId[t.postTypeId.length-1]:t.postTypeId="",t.city){var a=Object.keys(t.city),i="";a.forEach((function(e){t.city[e]&&(i?i+=",".concat(t.city[e]):i=t.city[e])})),t.city=i}else t.city="";for(var n in t.noLimitAge&&(t.minAge=-1,t.maxAge=-1),delete t["noLimitAge"],t)void 0===t[n]&&(t[n]="");this.detail&&(t.postId=this.detail.postId),this.loading=!0;var s=this.detail?r["f"]:r["a"];s(t).then((function(t){e.$emit("close"),e.$message.success("".concat(e.titleContent,"成功")),e.$emit("success"),e.loading=!1})).catch((function(){e.loading=!1}))}}},I=A,D=(a("ba9d"),a("2877")),L=Object(D["a"])(I,m,f,!1,null,"35569ebc",null),O=L.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%",background:"white"}},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[e.detailData?a("flexbox",{staticClass:"side-detail-main",staticStyle:{padding:"0 15px"},attrs:{direction:"column",align:"stretch"}},[a("wk-detail-header",{attrs:{"detail-value":e.detailData.postName,"show-edit":e.editAuth,"icon-class":"wk wk-office","detail-name":"职位","icon-bg-color":"#ECEEF2","icon-color":"#42526E"},on:{edit:e.editClick,"command-select":e.commandSelect}}),e._v(" "),a("el-tabs",{staticClass:"side-detail__tabs--default",staticStyle:{flex:"1"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},[a("el-tab-pane",{attrs:{label:"详细资料",name:"baseInfo",lazy:""}},[a("wk-base-detail",{attrs:{list:e.baseList}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"操作记录",name:"handle",lazy:""}},[a("post-handle",{attrs:{id:e.id}})],1)],1)],1):e._e(),e._v(" "),e.isCreate?a("post-create-view",{attrs:{detail:e.detailData},on:{success:e.getDetial,close:function(t){e.isCreate=!1}}}):e._e()],1)},E=[],P=(a("a9e3"),a("130f")),$=a("5337"),R=a("8f7f"),U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"rc-cont"},e._l(e.list,(function(t,i){return a("flexbox",{key:i,staticClass:"ha-cont",attrs:{align:"stretch",justify:"flex-start"}},[a("div",{staticClass:"ha-week"},[a("div",[e._v(e._s(e.getYMDFormaterTime(t.createTime)))]),e._v(" "),a("div",[e._v(e._s(e.getWeekFormaterTime(t.createTime)))])]),e._v(" "),a("div",{staticClass:"ha-circle"}),e._v(" "),a("div",{staticClass:"ha-time"},[e._v(e._s(e.getTimeFormaterTime(t.createTime)))]),e._v(" "),a("div",{staticClass:"ha-name"},[e._v(e._s(t.realname))]),e._v(" "),a("div",{staticClass:"ha-content"},e._l(t.content,(function(t,i){return a("p",{key:i},[e._v(e._s(t))])}))),e._v(" "),a("div",{staticClass:"ha-line"})])})))},V=[],q=a("0942"),z={name:"PostHandle",components:{},props:{id:[String,Number]},data:function(){return{loading:!1,list:[]}},computed:{},watch:{id:function(e){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(q["a"])({type:2,typeId:this.id}).then((function(t){e.loading=!1;var a=t.data||[];a.forEach((function(e){e.content=e.content?JSON.parse(e.content):[]})),e.list=a})).catch((function(){e.loading=!1}))},getYMDFormaterTime:function(e){return Object(S["E"])(e)},getWeekFormaterTime:function(e){return Object(S["E"])(e,"dddd")},getTimeFormaterTime:function(e){return Object(S["E"])(e,"H:mm")}}},H=z,W=(a("5039"),Object(D["a"])(H,U,V,!1,null,"720ebf7b",null)),B=W.exports,J={name:"PostDetail",components:{SlideView:P["a"],WkDetailHeader:$["a"],WkBaseDetail:R["a"],PostHandle:B,PostCreateView:O},inject:["editAuth"],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body","org-tree-node-label"]}}},data:function(){return{loading:!1,detailData:null,tabCurrentName:"baseInfo",dropdownItems:[{icon:"wk wk-edit",label:"编辑",command:"edit"}],isCreate:!1}},computed:{baseList:function(){if(this.detailData){for(var e=[],t=0;t<F.fields.length;t++){var a=F.fields[t],i={};i.label=a.name,i.value=this.fieldFormatter(this.detailData,a.field),e.push(i)}return e.push({label:"状态",value:this.fieldFormatter(this.detailData,"status")}),[{name:"",list:e}]}return[]}},watch:{id:function(){this.detailData=null,this.getDetial()}},mounted:function(){},beforeDestroy:function(){},methods:{viewAfterEnter:function(){this.getDetial()},getDetial:function(){var e=this;this.loading=!0,Object(r["c"])(this.id).then((function(t){e.detailData=t.data||{},e.loading=!1})).catch((function(){e.loading=!1,e.hideView()}))},fieldFormatter:function(e,t){var a=F["".concat(t,"Value")];return a?a[e[t]]||"--":"ownerEmployeeId"==t?e.ownerEmployeeName:"interviewEmployeeIds"==t?e.interviewEmployeeName:"deptId"==t?e.deptName:"postTypeId"==t?e.postTypeName:"status"==t?{1:"招聘中",0:"停止招聘"}[e[t]]||"--":"salary"==t?-1==e.salaryUnit?"面议":"".concat(e.minSalary||"","-").concat(e.maxSalary||""," ").concat(F.salaryUnitValue[e.salaryUnit]||""):"age"==t?-1==e.minAge&&-1==e.maxAge?"不限":"".concat(e.minAge||"","-").concat(e.maxAge||""):e[t]||"--"},editClick:function(){this.isCreate=!0},editSuccess:function(){this.getDetial(),this.$emit("edit-success"),this.$emit("handle",{type:"edit"})},commandSelect:function(e){},hideView:function(){this.$emit("close")}}},X=J,K=(a("04bc"),Object(D["a"])(X,N,E,!1,null,"88011a92",null)),M=K.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"500px"},on:{close:e.handleCancel}},[a("div",{staticClass:"form-add-dialog-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"原因",prop:"reason"}},[a("el-input",{model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),e._v(" "),e._t("default")],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")])],1)])},G=[],Q=a("9dba"),Z={name:"StopPostDialog",components:{},mixins:[Q["a"]],props:{id:[String,Number],visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,form:{},title:"停止招聘",rules:{reason:[{required:!0,message:"请输入",trigger:["change","blur"]}]}}},computed:{},watch:{visible:{handler:function(e){var t=this;e&&(this.form={reason:""},this.$nextTick((function(){t.$refs.form&&t.$refs.form.clearValidate()})))},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,Object(r["h"])({status:0,postId:e.id,reason:e.form.reason}).then((function(t){e.$message.success("操作成功"),e.loading=!1,e.$emit("success"),e.handleCancel()})).catch((function(){e.loading=!1})))}))}}},ee=Z,te=(a("1a16"),Object(D["a"])(ee,Y,G,!1,null,"693bfb18",null)),ae=te.exports,ie=a("2f62"),ne={name:"PostIndex",components:{XrHeader:c["a"],XrTableHeader:d["a"],WkPopoverFilter:u["a"],PostCreateView:O,PostDetail:M,StopPostDialog:ae},provide:function(){return{editAuth:this.editAuth}},data:function(){return{loading:!1,isCreate:!1,tableHeight:document.documentElement.clientHeight-300,list:[],fieldList:[],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,search:"",popoverFilterWidth:document.documentElement.clientWidth-80,tabType:"1",tabList:[{label:"招聘中",name:"1",num:0},{label:"停止招聘",name:"0",num:0}],rowID:"",showDview:!1,filterObj:{},filterList:[{name:"工作性质",field:"jobNature",formType:"radio",setting:F.getValueList(F.jobNatureValue)},{name:"工作城市",field:"city",formType:"text",setting:[]},{name:"用人部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},request:l["e"],setting:[]},{name:"负责人",field:"ownerEmployeeId",formType:"user",props:{label:"employeeName",value:"employeeId",isList:!0},request:o["F"],setting:[]}],selectionList:[],stopDialogShow:!1,handleRowData:null}},computed:Object(s["a"])(Object(s["a"])({},Object(ie["b"])(["hrm"])),{},{recruitAuth:function(){return this.hrm.recruit},createAuth:function(){return this.recruitAuth&&this.recruitAuth.savePost},editAuth:function(){return this.recruitAuth&&this.recruitAuth.updatePost},detailAuth:function(){return this.recruitAuth&&this.recruitAuth.readPost},updateStatusAuth:function(){return this.recruitAuth&&this.recruitAuth.updatePostStatus},tabelHandles:function(){var e=[];return e.push({label:"删除",command:"delete",icon:"wk wk-delete"}),e},hasFilterContent:function(){if(this.filterObj){for(var e=!1,t=Object.keys(this.filterObj),a=0;a<t.length;a++){var i=t[a];""!=this.filterObj[i]&&this.filterObj[i]!=[]&&null!=this.filterObj[i]&&void 0!=this.filterObj[i]&&(e=!0)}return e}return!1}}),watch:{},created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-300};for(var t=[],a=0;a<F.fields.length;a++){var i=F.fields[a];if(i.isTable){var n={};n.fieldName=i.field,n.name=i.name,n.width=i.width||80,t.push(n)}6==t.length&&t.push({name:"招聘进度",fieldName:"recruitSchedule",width:80})}t.push({fieldName:"status",name:"状态",width:80}),this.fieldList=t,this.refreshList(),this.getTabsNum()},mounted:function(){this.initTask()},methods:{getTabsNum:function(){var e=this;Object(r["e"])().then((function(t){var a=t.data||{};e.tabList.forEach((function(e){e.num=a[parseInt(e.name)]||0}))})).catch((function(){}))},resetFilter:function(){this.filterObj={},this.refreshList()},createClick:function(){this.handleRowData=null,this.isCreate=!0},createSaveSuccess:function(){this.getTabsNum(),this.refreshList()},searchClick:function(e){this.search=e,this.refreshList()},detailHandle:function(e){"delete"===e.type&&(this.showDview=!1),this.getTabsNum(),this.getList()},refreshList:function(){this.handleCurrentChange(1)},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t={page:this.currentPage,limit:this.pageSize,postName:this.search,status:this.tabType};for(var a in this.filterObj)t[a]=this.filterObj[a];Object(r["d"])(t).then((function(t){e.list=t.data.list,e.total=t.data.totalRow,e.loading=!1})).catch((function(){e.loading=!1}))},fieldFormatter:function(e,t){var a=F["".concat(t.property,"Value")];if(a)return a[e[t.property]]||"--";if("ownerEmployeeId"==t.property)return e.ownerEmployeeName;if("interviewEmployeeIds"==t.property)return e.interviewEmployeeName;if("deptId"==t.property)return e.deptName;if("postTypeId"==t.property)return e.postTypeName;if("status"==t.property)return{1:"招聘中",0:"停止招聘"}[e[t.property]]||"--";if("salary"==t.property)return-1==e.salaryUnit?"面议":"".concat(e.minSalary||"","-").concat(e.maxSalary||""," ").concat(F.salaryUnitValue[e.salaryUnit]||"");if("age"==t.property)return-1==e.minAge&&-1==e.maxAge?"不限":"".concat(e.minAge||"","-").concat(e.maxAge||"");var i=e[t.property];return"recruitSchedule"==t.property?Object(j["c"])(i)?"--":"".concat(i,"%"):Object(j["c"])(i)?"--":i},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return this.detailAuth&&"postName"==t.property?"can-visit--underline":""},handleCommand:function(e){},handleRowClick:function(e,t,a){this.detailAuth&&"postName"==t.property&&(this.rowID=e.postId,this.showDview=!0)},handleSelectionChange:function(e){this.selectionList=e},getRowDropdownItems:function(e){var t=[];return 1==e.status?t.push({label:"停止招聘",command:"stop",icon:"wk wk-remove"}):t.push({label:"启用招聘",command:"start",icon:"wk wk-activation"}),t},handleTypeClick:function(e,t){var a=this;"stop"===e?(this.handleRowData=t,this.stopDialogShow=!0):Object(r["h"])({status:"start"==e?1:0,postId:t.postId}).then((function(e){a.$message.success("操作成功"),a.createSaveSuccess()})).catch((function(){}))},initTask:function(){var e=this.$route.query;"detail"===e.event&&(this.rowID=e.id,this.showDview=!0)}}},se=ne,re=(a("7afe"),a("c705"),Object(D["a"])(se,i,n,!1,null,"659f6b44",null));t["default"]=re.exports}}]);