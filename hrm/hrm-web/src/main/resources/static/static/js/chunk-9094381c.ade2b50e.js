(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9094381c"],{"0042":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-map-position",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("flexbox",{staticClass:"box-select"},[i("div",{class:{placeholder:!Boolean(e.areaText)}},[e._v("\n      "+e._s(e.areaText||"请选择")+"\n    ")]),e._v(" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),1===e.field.precisions?i("div",{staticClass:"box-textarea"},[i("div",{class:{placeholder:!Boolean(e.detailAddress)}},[e._v("\n      "+e._s(e.detailAddress||"详细地址")+"\n    ")])]):e._e()],1)},a=[],l=(i("a15b"),i("d81d"),i("4de4"),i("d3b7"),i("b0c0"),i("7db0"),i("f44c")),s=i("a46a"),o=i("6bfe"),r={name:"FieldPosition",components:{FieldWrapper:l["a"]},mixins:[s["a"]],computed:{areaText:function(){return Object(o["c"])(this.field.defaultValue)?"":this.field.defaultValue.filter((function(e){return 4!==e.id})).map((function(e){return e.name})).join("/")},detailAddress:function(){if(Object(o["c"])(this.field.defaultValue))return"";var e=this.field.defaultValue.find((function(e){return 4===e.id}));return e?e.name:""}},methods:{}},c=r,d=(i("9fe7"),i("2877")),u=Object(d["a"])(c,n,a,!1,null,"238d449a",null);t["default"]=u.exports},"0044":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-textarea",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("div",{staticClass:"box"},[i("div",{staticClass:"default-val"},[e._v("\n      "+e._s("string"==typeof e.field.defaultValue?e.field.defaultValue:"")+"\n    ")]),e._v(" "),i("div",{staticClass:"max-tips"},[e._v("\n      "+e._s((e.field.defaultValue||"").length+"/"+(e.field.maxLength||800))+"\n    ")])])])},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldTextarea",components:{FieldWrapper:l["a"]},mixins:[s["a"]],methods:{}},r=o,c=(i("350e"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"46b1ac92",null);t["default"]=d.exports},"014d":function(e,t,i){},"0437":function(e,t,i){e.exports=i.p+"static/img/drag.505e3d3d.png"},"043c":function(e,t,i){},"060b":function(e,t,i){"use strict";i("64a3")},"0ac7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU0OTlCOUZDRERCMjExRTg4MjVEQ0RGOThFMUY2OTEyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU0OTlCOUZERERCMjExRTg4MjVEQ0RGOThFMUY2OTEyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTQ5OUI5RkFEREIyMTFFODgyNURDREY5OEUxRjY5MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTQ5OUI5RkJEREIyMTFFODgyNURDREY5OEUxRjY5MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5iPiS9AAAAY0lEQVR42mI8c+aMLQMDw0IgVmQgHdwH4jgmIDEHiNOBmJEMDNI3lxHokv9QAXLBfyYGKoBRQzABC7bQJkIfIyFDGEdjZxAZcguIXcjUD9J3CxTFKUC8CIgVyDDkARDHAgQYANTlEN4TaBTMAAAAAElFTkSuQmCC"},"0b8e":function(e,t,i){"use strict";i("e148")},1276:function(e,t,i){"use strict";var n=i("2ba4"),a=i("c65b"),l=i("e330"),s=i("d784"),o=i("825a"),r=i("7234"),c=i("44e7"),d=i("1d80"),u=i("4840"),f=i("8aa5"),p=i("50c4"),h=i("577e"),m=i("dc4a"),v=i("4dae"),b=i("14c3"),g=i("9263"),y=i("9f7f"),_=i("d039"),x=y.UNSUPPORTED_Y,C=4294967295,k=Math.min,T=[].push,A=l(/./.exec),w=l(T),F=l("".slice),O=!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));s("split",(function(e,t,i){var l;return l="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var l=h(d(this)),s=void 0===i?C:i>>>0;if(0===s)return[];if(void 0===e)return[l];if(!c(e))return a(t,l,e,s);var o,r,u,f=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,b=new RegExp(e.source,p+"g");while(o=a(g,b,l)){if(r=b.lastIndex,r>m&&(w(f,F(l,m,o.index)),o.length>1&&o.index<l.length&&n(T,f,v(o,1)),u=o[0].length,m=r,f.length>=s))break;b.lastIndex===o.index&&b.lastIndex++}return m===l.length?!u&&A(b,"")||w(f,""):w(f,F(l,m)),f.length>s?v(f,0,s):f}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:a(t,this,e,i)}:t,[function(t,i){var n=d(this),s=r(t)?void 0:m(t,e);return s?a(s,t,n,i):a(l,h(n),t,i)},function(e,n){var a=o(this),s=h(e),r=i(l,a,s,n,l!==t);if(r.done)return r.value;var c=u(a,RegExp),d=a.unicode,m=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(x?"g":"y"),v=new c(x?"^(?:"+a.source+")":a,m),g=void 0===n?C:n>>>0;if(0===g)return[];if(0===s.length)return null===b(v,s)?[s]:[];var y=0,_=0,T=[];while(_<s.length){v.lastIndex=x?0:_;var A,O=b(v,x?F(s,_):s);if(null===O||(A=k(p(v.lastIndex+(x?_:0)),s.length))===y)_=f(s,_,d);else{if(w(T,F(s,y,_)),T.length===g)return T;for(var j=1;j<=O.length-1;j++)if(w(T,O[j]),T.length===g)return T;_=y=A}}return w(T,F(s,y)),T}]}),!O,x)},"159c":function(e,t,i){"use strict";i("262b")},"1a52":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-writing-sign",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("div",{staticClass:"box"})])},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldWritingSign",components:{FieldWrapper:l["a"]},mixins:[s["a"]],methods:{}},r=o,c=(i("7524"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"69453261",null);t["default"]=d.exports},"1a67":function(e,t,i){"use strict";i("c5e1")},"1ba1":function(e,t,i){"use strict";i("aff9")},"20da":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-current-position",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("flexbox",{staticClass:"box",attrs:{align:"center"}},[i("flexbox-item",{staticClass:"default-val"}),e._v(" "),i("span",{staticClass:"wk wk-icon-location"})],1)],1)},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldCurrentPosition",components:{FieldWrapper:l["a"]},mixins:[s["a"]],methods:{}},r=o,c=(i("febb"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"3c56395e",null);t["default"]=d.exports},"20e4":function(e,t,i){"use strict";i("8170")},"25cf":function(e,t,i){"use strict";i("a4c5")},"262b":function(e,t,i){},"28ef":function(e,t,i){},"28f2":function(e,t,i){"use strict";i("786a")},"2c3e":function(e,t,i){var n=i("83ab"),a=i("9f7f").MISSED_STICKY,l=i("c6b6"),s=i("edd0"),o=i("69f3").get,r=RegExp.prototype,c=TypeError;n&&a&&s(r,"sticky",{configurable:!0,get:function(){if(this!==r){if("RegExp"===l(this))return!!o(this).sticky;throw c("Incompatible receiver, RegExp required")}}})},"350e":function(e,t,i){"use strict";i("83ca")},"35f0":function(e,t,i){"use strict";i("a665")},"37c8":function(e,t,i){},"436e":function(e,t,i){"use strict";i("a282")},4833:function(e,t,i){"use strict";i("4ac1")},"48f4":function(e,t,i){},"4ac1":function(e,t,i){},"4d63":function(e,t,i){var n=i("83ab"),a=i("da84"),l=i("e330"),s=i("94ca"),o=i("7156"),r=i("9112"),c=i("241c").f,d=i("3a9b"),u=i("44e7"),f=i("577e"),p=i("90d8"),h=i("9f7f"),m=i("aeb0"),v=i("cb2d"),b=i("d039"),g=i("1a2d"),y=i("69f3").enforce,_=i("2626"),x=i("b622"),C=i("fce3"),k=i("107c"),T=x("match"),A=a.RegExp,w=A.prototype,F=a.SyntaxError,O=l(w.exec),j=l("".charAt),E=l("".replace),N=l("".indexOf),V=l("".slice),I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,L=/a/g,S=/a/g,$=new A(L)!==L,D=h.MISSED_STICKY,R=h.UNSUPPORTED_Y,P=n&&(!$||D||C||k||b((function(){return S[T]=!1,A(L)!=L||A(S)==S||"/a/i"!=A(L,"i")}))),M=function(e){for(var t,i=e.length,n=0,a="",l=!1;n<=i;n++)t=j(e,n),"\\"!==t?l||"."!==t?("["===t?l=!0:"]"===t&&(l=!1),a+=t):a+="[\\s\\S]":a+=t+j(e,++n);return a},G=function(e){for(var t,i=e.length,n=0,a="",l=[],s={},o=!1,r=!1,c=0,d="";n<=i;n++){if(t=j(e,n),"\\"===t)t+=j(e,++n);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:O(I,V(e,n+1))&&(n+=2,r=!0),a+=t,c++;continue;case">"===t&&r:if(""===d||g(s,d))throw new F("Invalid capture group name");s[d]=!0,l[l.length]=[d,c],r=!1,d="";continue}r?d+=t:a+=t}return[a,l]};if(s("RegExp",P)){for(var U=function(e,t){var i,n,a,l,s,c,h=d(w,this),m=u(e),v=void 0===t,b=[],g=e;if(!h&&m&&v&&e.constructor===U)return e;if((m||d(w,e))&&(e=e.source,v&&(t=p(g))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),g=e,C&&"dotAll"in L&&(n=!!t&&N(t,"s")>-1,n&&(t=E(t,/s/g,""))),i=t,D&&"sticky"in L&&(a=!!t&&N(t,"y")>-1,a&&R&&(t=E(t,/y/g,""))),k&&(l=G(e),e=l[0],b=l[1]),s=o(A(e,t),h?this:w,U),(n||a||b.length)&&(c=y(s),n&&(c.dotAll=!0,c.raw=U(M(e),i)),a&&(c.sticky=!0),b.length&&(c.groups=b)),e!==g)try{r(s,"source",""===g?"(?:)":g)}catch(_){}return s},B=c(A),W=0;B.length>W;)m(U,A,B[W++]);w.constructor=U,U.prototype=w,v(a,"RegExp",U,{constructor:!0})}_("RegExp")},"4e4f":function(e,t,i){"use strict";i("d9b0")},"51e5":function(e,t,i){"use strict";i("d33a")},5764:function(e,t,i){},5849:function(e,t,i){"use strict";i("28ef")},"5b3d":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-date-interval",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("flexbox",{staticClass:"range-box"},[i("i",{staticClass:"el-icon-date icon"}),e._v(" "),i("flexbox-item",{class:{placeholder:!e.isHasValue}},[e._v("\n      "+e._s(e.isHasValue?e.field.defaultValue[0]:"开始时间")+"\n    ")]),e._v(" "),i("span",[e._v("至")]),e._v(" "),i("flexbox-item",{class:{placeholder:!e.isHasValue}},[e._v("\n      "+e._s(e.isHasValue?e.field.defaultValue[1]:"结束时间")+"\n    ")])],1)],1)},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldDateInterval",components:{FieldWrapper:l["a"]},mixins:[s["a"]],computed:{isHasValue:function(){return Array.isArray(this.field.defaultValue)&&2===this.field.defaultValue.length}},methods:{}},r=o,c=(i("7926"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"3fa747a3",null);t["default"]=d.exports},"5de9":function(e,t,i){"use strict";i("f1c9")},6108:function(e,t,i){},"64a3":function(e,t,i){},"6d94":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return l}));i("4d90"),i("d3b7"),i("25f0"),i("a9e3"),i("caad");function n(e){var t=e.toString(2).padStart(9,"0");return{nameEdit:Boolean(Number(t.charAt(0))),deleteEdit:Boolean(Number(t.charAt(1))),defaultEdit:Boolean(Number(t.charAt(2))),percentEdit:Boolean(Number(t.charAt(3))),nullEdit:Boolean(Number(t.charAt(4))),uniqueEdit:Boolean(Number(t.charAt(5))),hiddenEdit:Boolean(Number(t.charAt(6))),optionsEdit:Boolean(Number(t.charAt(7))),radioEdit:Boolean(Number(t.charAt(8)))}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return 9==t?2*e+1:e}function l(e){if(0===e.type)return"FieldInput";if(["text","number","floatnumber","mobile","email","date","datetime","user","structure","contacts","customer","contract","business","single_user","website"].includes(e.formType))return"FieldInput";switch(e.formType){case"textarea":return"FieldTextarea";case"select":return"FieldSelect";case"checkbox":return"FieldCheckbox";case"file":return"FieldFile";case"boolean_value":return"FieldBoolean";case"percent":return"FieldPercent";case"position":return"FieldPosition";case"location":return"FieldLocation";case"detail_table":return"FieldDetailTable";case"handwriting_sign":return"FieldWritingSign";case"date_interval":return"FieldDateInterval";case"desc_text":return"FieldDescText";case"pic":return"FieldFile";case"serial_number":return"FieldSerialNumber";case"field_tag":return"FieldTag";case"field_attention":return"FieldAttention";case"field_group":return"FieldGroup";default:return"FieldInput"}}},"71be":function(e,t,i){"use strict";i("7d43")},7409:function(e,t,i){"use strict";i("a533")},7524:function(e,t,i){"use strict";i("014d")},"786a":function(e,t,i){},7926:function(e,t,i){"use strict";i("5764")},"7b9b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-file",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("div",{staticClass:"box"},[e._v("\n    请选择文件\n  ")])])},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldFile",components:{FieldWrapper:l["a"]},mixins:[s["a"]],methods:{}},r=o,c=(i("b414"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"3f6987eb",null);t["default"]=d.exports},"7d43":function(e,t,i){},8170:function(e,t,i){},"83ca":function(e,t,i){},"868b":function(e,t,i){},"89b4":function(e,t,i){"use strict";i("edbc")},"8c4a9":function(e,t,i){"use strict";i("868b")},9140:function(e,t,i){},"91f4":function(e,t,i){},"95e5":function(e,t,i){"use strict";i("9140")},"98c8":function(e,t,i){},"9fe7":function(e,t,i){"use strict";i("37c8")},a0a1:function(e,t,i){"use strict";i("c77e")},a282:function(e,t,i){},a363:function(e,t,i){"use strict";i("6108")},a46a:function(e,t,i){"use strict";i("caad"),i("2532");var n=i("6d94"),a=i("6bfe");t["a"]={props:{field:{type:Object,required:!0},fieldArr:{type:Array,default:function(){return[]}},point:{type:Array},activePoint:{type:Array,default:function(){return[]}}},data:function(){return{specialFormType:[]}},computed:{activate:function(){return this.point[0]===this.activePoint[0]&&this.point[1]===this.activePoint[1]},disabled:function(){return!this.fieldAuth.defaultEdit},fieldAuth:function(){return Object(n["b"])(this.field.operating)},topFlag:function(){if(Object(a["c"])(this.fieldArr))return!1;var e=this.point[0];if(0===e)return!1;var t=this.fieldArr[e-1];return 4!==t.length&&!this.specialFormType.includes(t[0].formType)},bottomFlag:function(){if(Object(a["c"])(this.fieldArr))return!1;var e=this.point[0];return e!==this.fieldArr.length-1},leftFlag:function(){if(Object(a["c"])(this.fieldArr))return!1;var e=this.point[1];return 0!==e},rightFlag:function(){if(Object(a["c"])(this.fieldArr))return!1;var e=this.point[1],t=this.point[0];return e!==this.fieldArr[t].length-1},copyFlag:function(){return!Object(a["c"])(this.fieldArr)&&!["customer","business","contacts","contract","receivables_plan","single_user"].includes(this.field.formType)},controlFlag:function(){return{top:this.topFlag,bottom:this.bottomFlag,left:this.leftFlag,right:this.rightFlag,delete:this.fieldAuth.deleteEdit,copy:this.copyFlag}}},methods:{emitClick:function(e){this.$emit("click",e)},handleAction:function(e,t){this.$emit("action",e,this.point,t)},itemIsObject:function(e){return Object(a["d"])(e)}}}},a4a1:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-desc-text",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag,"hidden-title":""},on:{click:e.emitClick,action:e.handleAction}},[i("tinymce",{staticClass:"rich-txt",attrs:{value:e.field.defaultValue,disabled:"",toolbar:[],init:{menubar:!1,toolbar_sticky:!0,statusbar:!1,placeholder:"描述文字内容",quickbars_selection_toolbar:!1,contextmenu:"",content_style:" * {color: #262626; margin: 0;} body { font-size: 14px; }",plugins:"autoresize",autoresize_bottom_margin:0}}}),e._v(" "),i("div",{staticClass:"field-desc-text-cover"})],1)},a=[],l=i("f44c"),s=i("8256"),o=i("a46a"),r={name:"FieldDescText",components:{FieldWrapper:l["a"],Tinymce:s["a"]},mixins:[o["a"]],methods:{}},c=r,d=(i("51e5"),i("20e4"),i("2877")),u=Object(d["a"])(c,n,a,!1,null,"43d6b000",null);t["default"]=u.exports},a4c5:function(e,t,i){},a533:function(e,t,i){},a665:function(e,t,i){},aff9:function(e,t,i){},b414:function(e,t,i){"use strict";i("91f4")},b6c9:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-checkbox",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[1===e.field.precisions?i("el-checkbox-group",{attrs:{disabled:e.disabled},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}},e._l(e.field.setting,(function(t,n){return i("el-checkbox",{key:n,staticClass:"checkbox",attrs:{label:e.itemIsObject(t)?t.label||t.name:t}})}))):i("div",{staticClass:"select-content"},[i("el-select",{attrs:{multiple:""},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}},e._l(e.field.setting,(function(t,n){return i("el-option",{key:n,attrs:{label:e.itemIsObject(t)?t.label||t.name:t,value:e.itemIsObject(t)?t.value:t}})}))),e._v(" "),i("div",{staticClass:"mask"})],1)],1)},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldCheckbox",components:{FieldWrapper:l["a"]},mixins:[s["a"]],watch:{field:{handler:function(){this.field.precisions||this.$set(this.field,"precisions",1)},deep:!0,immediate:!0}}},r=o,c=(i("95e5"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"df63fea0",null);t["default"]=d.exports},b7bb:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-input",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("flexbox",{staticClass:"box",attrs:{align:"center"}},[i("span",{staticClass:"default-val"},[e._v("\n      "+e._s("string"==typeof e.field.defaultValue?e.field.defaultValue:"")+"\n    ")])])],1)},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldInput",components:{FieldWrapper:l["a"]},mixins:[s["a"]],methods:{}},r=o,c=(i("4833"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"4f06b6e4",null);t["default"]=d.exports},bae4:function(e,t,i){"use strict";i("48f4")},c5e1:function(e,t,i){},c607:function(e,t,i){var n=i("83ab"),a=i("fce3"),l=i("c6b6"),s=i("edd0"),o=i("69f3").get,r=RegExp.prototype,c=TypeError;n&&a&&s(r,"dotAll",{configurable:!0,get:function(){if(this!==r){if("RegExp"===l(this))return!!o(this).dotAll;throw c("Incompatible receiver, RegExp required")}}})},c778:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-boolean",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}})],1)},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldBoolean",components:{FieldWrapper:l["a"]},mixins:[s["a"]],methods:{}},r=o,c=(i("5de9"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"06a966e9",null);t["default"]=d.exports},c77e:function(e,t,i){},cccc:function(e,t,i){"use strict";i.d(t,"p",(function(){return a})),i.d(t,"s",(function(){return l})),i.d(t,"k",(function(){return s})),i.d(t,"o",(function(){return o})),i.d(t,"n",(function(){return r})),i.d(t,"r",(function(){return c})),i.d(t,"q",(function(){return d})),i.d(t,"t",(function(){return u})),i.d(t,"l",(function(){return f})),i.d(t,"m",(function(){return p})),i.d(t,"i",(function(){return h})),i.d(t,"j",(function(){return m})),i.d(t,"D",(function(){return v})),i.d(t,"F",(function(){return b})),i.d(t,"G",(function(){return g})),i.d(t,"E",(function(){return y})),i.d(t,"J",(function(){return _})),i.d(t,"K",(function(){return x})),i.d(t,"H",(function(){return C})),i.d(t,"I",(function(){return k})),i.d(t,"v",(function(){return T})),i.d(t,"w",(function(){return A})),i.d(t,"x",(function(){return w})),i.d(t,"y",(function(){return F})),i.d(t,"z",(function(){return O})),i.d(t,"C",(function(){return j})),i.d(t,"c",(function(){return E})),i.d(t,"h",(function(){return N})),i.d(t,"N",(function(){return V})),i.d(t,"b",(function(){return I})),i.d(t,"B",(function(){return L})),i.d(t,"g",(function(){return S})),i.d(t,"M",(function(){return $})),i.d(t,"A",(function(){return D})),i.d(t,"f",(function(){return R})),i.d(t,"L",(function(){return P})),i.d(t,"a",(function(){return M})),i.d(t,"u",(function(){return G})),i.d(t,"e",(function(){return U})),i.d(t,"d",(function(){return B}));var n=i("b775");function a(e){return Object(n["a"])({url:"hrmConfig/queryRecruitChannelList",method:"post",data:e})}function l(e){return Object(n["a"])({url:"hrmConfig/saveRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(n["a"])({url:"hrmConfig/deleteRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(n["a"])({url:"hrmConfig/queryFields",method:"post",data:e})}function r(e){return Object(n["a"])({url:"hrmConfig/queryFieldByLabel/".concat(e),method:"post"})}function c(e){return Object(n["a"])({url:"hrmConfig/saveField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(n["a"])({url:"hrmConfig/queryRecruitEliminateList",method:"post",data:e})}function u(e){return Object(n["a"])({url:"hrmConfig/saveRecruitEliminate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(n["a"])({url:"hrmConfig/queryInsuranceSchemePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(n["a"])({url:"hrmConfig/queryInsuranceSchemeById/".concat(e),method:"post"})}function h(e){return Object(n["a"])({url:"hrmConfig/addInsuranceScheme",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(n["a"])({url:"hrmConfig/deleteInsuranceScheme/".concat(e),method:"post"})}function v(e){return Object(n["a"])({url:"hrmSalaryGroup/addSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(e){return Object(n["a"])({url:"hrmSalaryGroup/querySalaryGroupPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(n["a"])({url:"hrmSalaryGroup/setSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(n["a"])({url:"hrmSalaryGroup/delete/".concat(e),method:"post"})}function _(e){return Object(n["a"])({url:"hrmSalaryTaxRule/queryTaxRuleList",method:"post",data:e})}function x(e){return Object(n["a"])({url:"hrmSalaryTaxRule/setTaxRule",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function C(e){return Object(n["a"])({url:"hrmSalaryOption/querySalaryOptionDetail",method:"post",data:e})}function k(e){return Object(n["a"])({url:"hrmSalaryOption/setSalaryOption",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function T(){return Object(n["a"])({url:"hrmEmployeeArchives/queryEmployeeArchivesField",method:"post"})}function A(e){return Object(n["a"])({url:"hrmEmployeeArchives/sendWriteArchives",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function w(e){return Object(n["a"])({url:"hrmEmployeeArchives/setEmployeeArchivesField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function F(e){return Object(n["a"])({url:"hrmEmployeeFieldManage/queryEmployeeManageField",method:"post",data:e})}function O(e){return Object(n["a"])({url:"hrmEmployeeFieldManage/setEmployeeManageField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function j(e){return Object(n["a"])({url:"hrmAttendanceShift/queryAttendanceShiftPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function E(e){return Object(n["a"])({url:"hrmAttendanceShift/".concat(e.shiftId?"setAttendanceShift":"addAttendanceShift"),method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function N(e){return Object(n["a"])({url:"hrmAttendanceShift/delete/".concat(e.attendanceShiftId),method:"post",data:e})}function V(e){return Object(n["a"])({url:"hrmAttendanceShift/verifyAttendanceShiftName",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function I(e){return Object(n["a"])({url:"hrmAttendanceRule/".concat(e.attendanceRuleId?"setAttendanceRule":"addAttendanceRule"),method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function L(e){return Object(n["a"])({url:"hrmAttendanceRule/queryAttendanceRulePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function S(e){return Object(n["a"])({url:"hrmAttendanceRule/delete/".concat(e.attendanceRuleId),method:"post",data:e})}function $(e){return Object(n["a"])({url:"hrmAttendanceRule/verifyAttendanceRuleName",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function D(e){return Object(n["a"])({url:"hrmAttendanceGroup/queryAttendanceGroupPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function R(e){return Object(n["a"])({url:"hrmAttendanceGroup/delete/".concat(e.attendanceGroupId),method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function P(e){return Object(n["a"])({url:"hrmAttendanceGroup/verifyAttendanceGroupName",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function M(e){return Object(n["a"])({url:"hrmAttendanceGroup/addAttendanceGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function G(e){return Object(n["a"])({url:"hrmAttendanceGroup/setAttendanceGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function U(e){return Object(n["a"])({url:"hrmAttendanceExamine/queryHrmAttendanceExamine",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function B(e){return Object(n["a"])({url:"hrmAttendanceExamine/add",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},cd76:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVENzhCOEIzRERCMjExRTg4QjUxREJEMjVGMDBFOUEyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVENzhCOEI0RERCMjExRTg4QjUxREJEMjVGMDBFOUEyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUQ3OEI4QjFEREIyMTFFODhCNTFEQkQyNUYwMEU5QTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUQ3OEI4QjJEREIyMTFFODhCNTFEQkQyNUYwMEU5QTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5zKmg/AAAAcElEQVR42mI8c+aMLQMDw0IgVmQgHdwH4jgmIDEHiNOBmJEMDNI3lxHokv9QAXLBfyYGKgBiDPlPDUMYho4hLESGAboYIyFDGLEYwDiCApYYQxjp5pJbQOxCpn6QvlugKE4B4kVArECGIQ+AOBYgwAB2pxPdB9NdPQAAAABJRU5ErkJggg=="},d33a:function(e,t,i){e.exports={colorPrimary:"#0052cc",colorBlack:"#172b4d",colorSuccess:"#36b37e",colorWarning:"#ffab00",colorDanger:"#ff5630",colorN40:"#dfe1e6",axisLineColor:"#dfe1e6",axisLabelFontWeight:"500"}},d5e5:function(e,t,i){},d9b0:function(e,t,i){},dfec:function(e,t,i){"use strict";i("d5e5")},e148:function(e,t,i){},e35f:function(e,t,i){"use strict";i("043c")},e630:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("flexbox",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fields-index body",attrs:{align:"flex-start",justify:"flex-start"}},[n("div",{staticClass:"body-left"},[n("div",{staticClass:"body-left_title"},[e._v("字段库"),n("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"238"}})]),e._v(" "),n("ul",[n("draggable",{staticClass:"lib-wrapper",attrs:{list:e.fieldLibList,options:e.dragLeftConfig,clone:e.dragLeftMove},on:{start:e.dragLeftStart,end:e.dragLeftEnd}},e._l(e.fieldLibList,(function(t){return n("div",{key:t.id,staticClass:"lib-item",on:{click:function(i){e.handleLibFieldClick(t)}}},[n("i",{staticClass:"lib-item-icon",class:t.icon}),e._v(" "),n("span",[e._v(e._s(t.name))])])})))],1)]),e._v(" "),n("div",{staticClass:"body-content"},[n("flexbox",{staticClass:"body-content-warp",attrs:{align:"flex-start",justify:"flex-start",direction:"column"}},[n("el-header",[n("div",{staticClass:"title"},[e._v("编辑"+e._s(e.title)+"字段")]),e._v(" "),n("div",[e.config.showSave?n("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleSave,expression:"handleSave"}],attrs:{type:"primary"}},[e._v("保存")]):e._e(),e._v(" "),e.config.showBack?n("el-button",{on:{click:e.handleCancel}},[e._v("返回")]):e._e()],1)]),e._v(" "),n("flexbox-item",{staticClass:"body-content-main",staticStyle:{"margin-left":"0"}},[n("el-main",[n("draggable",{staticClass:"field-list",attrs:{list:e.fieldArr,options:e.dragListConfig},on:{end:e.dragListEnd}},e._l(e.fieldArr,(function(t,i){return n("flexbox",{key:i,staticClass:"field-row",attrs:{align:"flex-start",justify:"flex-start"}},e._l(t,(function(t,a){return n(e._f("typeToComponentName")(t),{key:a,ref:"fieldItem",refInFor:!0,tag:"component",attrs:{field:t,"field-arr":e.fieldArr,point:[i,a],"active-point":e.selectedPoint},on:{action:e.handleAction,"child-drag-add":e.handleChildDragAdd,click:function(t){e.handleSelect([i,a])}}})})))}))),e._v(" "),e.fieldArr&&0!==e.fieldArr.length?e._e():n("el-empty",{attrs:{image:i("0437"),description:"拖拽或点击左侧字段创建表单"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"body-right",staticStyle:{"margin-left":"0"}},[e.selectedField?n("setting-field",{attrs:{field:e.selectedField,point:e.selectedPoint,"field-arr":e.fieldArr,"can-transform":e.canTransform,"transform-data":e.transformData},on:{"child-edit":e.handleChildEdit,"update-width":e.handleUpdateFieldWidth}}):e._e()],1)])},a=[],l=i("53ca"),s=i("5530"),o=(i("4de4"),i("d3b7"),i("caad"),i("2ca0"),i("159b"),i("25f0"),i("fb6a"),i("b680"),i("14d9"),i("b0c0"),i("a434"),i("7db0"),i("4d90"),i("a15b"),i("99af"),i("d81d"),i("2532"),i("a9e3"),i("498a"),i("a630"),i("3ca3"),i("6062"),i("ddb0"),i("ea20")),r=i("cccc"),c=i("b775");function d(e){return Object(c["a"])({url:"jxcField/list/".concat(e.label),method:"post",data:e})}function u(e){return Object(c["a"])({url:"jxcField/saveField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}var f=i("e170"),p=i("6bfe"),h=i("b7bb"),m=i("0044"),v=i("f2ea"),b=i("b6c9"),g=i("7b9b"),y=i("c778"),_=i("f14d"),x=i("0042"),C=i("20da"),k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-detail-table",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("div",{staticClass:"box",class:{"is-empty":e.isEmpty}},[i("draggable",{staticClass:"field-list",class:{"is-table":2===e.field.precisions},attrs:{list:e.list,options:e.dragListConfig},on:{end:e.dragListEnd,add:e.dragAdded}},[e.isEmpty?i("div",{staticClass:"empty-box"},[i("div",{staticClass:"empty-box-title"},[e._v("可拖拽添加多个字段")]),e._v(" "),i("div",{staticClass:"empty-box-desc"},[e._v("（不支持明细中添加明细字段）")])]):e._e(),e._v(" "),e.isEmpty||1!==e.field.precisions?e._e():e._l(e.list,(function(t,n){return i(e._f("typeToComponentName")(t),{key:n,tag:"component",staticClass:"draggable-hook",attrs:{field:t,point:[n,0],"active-point":[null,null]},on:{click:e.emitClick}})})),e._v(" "),e.isEmpty||2!==e.field.precisions?e._e():[i("el-table",{class:e.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:e.WKConfig.tableStyle.stripe}},[e._l(e.list,(function(t,n){return i("el-table-column",{key:n,attrs:{prop:t.fieldName,label:t.name},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,a=t.column;return[i("div",{staticClass:"input-box"},[e._v("\n                "+e._s(n[a.property])+"\n              ")])]}}])})})),e._v(" "),i("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",[e._v("删除")])]}}])})],2)]],2),e._v(" "),e.isEmpty?e._e():i("div",{staticClass:"add-btn"},[i("el-button",{attrs:{type:"text"}},[i("i",{staticClass:"wk wk-l-plus"}),e._v("\n        "+e._s(e.field.remark||"")+"\n      ")])],1)],1)])},T=[],A=i("f44c"),w=i("b76a"),F=i.n(w),O=i("a46a"),j=i("6d94"),E={name:"FieldDetailTable",components:{draggable:F.a,FieldWrapper:A["a"],FieldInput:function(){return Promise.resolve().then(i.bind(null,"b7bb"))},FieldTextarea:function(){return Promise.resolve().then(i.bind(null,"0044"))},FieldSelect:function(){return Promise.resolve().then(i.bind(null,"f2ea"))},FieldCheckbox:function(){return Promise.resolve().then(i.bind(null,"b6c9"))},FieldFile:function(){return Promise.resolve().then(i.bind(null,"7b9b"))},FieldBoolean:function(){return Promise.resolve().then(i.bind(null,"c778"))},FieldPercent:function(){return Promise.resolve().then(i.bind(null,"f14d"))},FieldPosition:function(){return Promise.resolve().then(i.bind(null,"0042"))},FieldLocation:function(){return Promise.resolve().then(i.bind(null,"20da"))},FieldWritingSign:function(){return Promise.resolve().then(i.bind(null,"1a52"))},FieldDateInterval:function(){return Promise.resolve().then(i.bind(null,"5b3d"))},FieldDescText:function(){return Promise.resolve().then(i.bind(null,"a4a1"))}},filters:{typeToComponentName:function(e){return Object(j["c"])(e)}},mixins:[O["a"]],data:function(){return{dragListConfig:{delay:50,group:{name:"childList",put:["libList"],pull:!1},sort:!1,forceFallback:!0,fallbackClass:"draggingStyle",filter:".empty-box"},selectedPoint:[null,null]}},computed:{isEmpty:function(){return Object(p["c"])(this.field.fieldExtendList)},isList:function(){return!0},list:function(){return this.isEmpty?[]:this.field.fieldExtendList},tableData:function(){var e=this,t={};return this.list.forEach((function(i){t[i.fieldName]=e.formatterDefaultValue(i)})),[t]}},methods:{dragListEnd:function(e){},dragAdded:function(e){var t=this;this.$emit("child-drag-add",this.point,e),this.$nextTick((function(){t.selectedPoint=[e.newIndex,0]}))},formatterDefaultValue:function(e){return e.defaultValue?"boolean_value"===e.formType?{0:"不选中",1:"选中"}[e.defaultValue]:"date_interval"===e.formType?e.defaultValue.join("-"):"checkbox"===e.formType?e.defaultValue.join(","):"string"===typeof e.defaultValue?e.defaultValue:void 0:""}}},N=E,V=(i("bae4"),i("2877")),I=Object(V["a"])(N,k,T,!1,null,"1b06aa5c",null),L=I.exports,S=i("1a52"),$=i("5b3d"),D=i("a4a1"),R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-custom-number",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("flexbox",{staticClass:"box",attrs:{align:"center"}},[i("span",{staticClass:"default-val"},[e._v("\n      "+e._s("string"==typeof e.field.defaultValue?e.field.defaultValue:"")+"\n    ")])])],1)},P=[],M={name:"FieldSerialNumber",components:{FieldWrapper:A["a"]},mixins:[O["a"]],methods:{}},G=M,U=(i("dfec"),Object(V["a"])(G,R,P,!1,null,"7825e266",null)),B=U.exports,W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-tag",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("flexbox",{staticClass:"box",attrs:{align:"center"}},[i("span",{staticClass:"default-val"},[e._v("\n      "+e._s("string"==typeof e.field.defaultValue?e.field.defaultValue:"")+"\n    ")])])],1)},H=[],Y={name:"FieldTag",components:{FieldWrapper:A["a"]},mixins:[O["a"]],methods:{}},J=Y,Z=(i("71be"),Object(V["a"])(J,W,H,!1,null,"0463bdd4",null)),z=Z.exports,q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-star",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("div",{staticClass:"box"},[i("el-rate",{attrs:{value:e.field.defaultValue||0},on:{change:e.change}})],1)])},Q=[],X={name:"FieldAttention",components:{FieldWrapper:A["a"]},mixins:[O["a"]],data:function(){return{}},methods:{change:function(e){this.$set(this.field,"defaultValue",e)}}},K=X,ee=(i("89b4"),Object(V["a"])(K,q,Q,!1,null,"7fb91ca8",null)),te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-title",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag,"hidden-title":""},on:{click:e.emitClick,action:e.handleAction}},[i("div",{staticClass:"section-header"},[i("div",{staticClass:"section-mark",staticStyle:{"border-left-color":"#2362fb"}}),e._v(" "),i("div",{staticClass:"section-title"},[e._v(e._s(e.field.name))]),e._v(" "),e.field.inputTips?i("span",{staticClass:"section-tips"},[e._v("\n      （"+e._s(e.field.inputTips)+"）\n    ")]):e._e()])])},ne=[],ae={name:"FieldGroup",components:{FieldWrapper:A["a"]},mixins:[O["a"]],methods:{}},le=ae,se=(i("a0a1"),Object(V["a"])(le,ie,ne,!1,null,"9e66b08a",null)),oe=se.exports,re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.typeObj?i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.clickOutSide,expression:"clickOutSide"}],staticClass:"field-setting"},[i("div",{staticClass:"setting-title"},[e._v("\n    "+e._s(e.typeObj.name)),e.titleHelpObj?i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{slot:"label","data-type":e.titleHelpObj.type,"data-id":e.titleHelpObj.id},on:{click:function(e){e.stopPropagation()}},slot:"label"}):e._e()]),e._v(" "),i("div",{staticClass:"setting-body"},[e.isDescText?e._e():[i("div",{staticClass:"item-section"},[e._m(0),e._v(" "),i("el-input",{attrs:{maxlength:250,disabled:!e.fieldAuth.nameEdit},model:{value:e.field.name,callback:function(t){e.$set(e.field,"name",t)},expression:"field.name"}}),e._v(" "),i("div",{staticClass:"input-tips"},[e._v("标识名不能为空")])],1),e._v(" "),i("div",{staticClass:"item-section"},[e._m(1),e._v(" "),i("el-input",{attrs:{rows:3,maxlength:60,type:"textarea",resize:"none"},model:{value:e.field.inputTips,callback:function(t){e.$set(e.field,"inputTips",t)},expression:"field.inputTips"}}),e._v(" "),i("div",{staticClass:"input-tips"},[e._v("显示在标识名右侧的说明文字")])],1),e._v(" "),["user","structure"].includes(e.field.formType)?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("选择方式")]),e._v(" "),i("el-radio-group",{attrs:{disabled:!e.fieldAuth.radioEdit},model:{value:e.field.isMulti,callback:function(t){e.$set(e.field,"isMulti",t)},expression:"field.isMulti"}},e._l([{label:"单选",value:0},{label:"多选",value:1}],(function(t,n){return i("el-radio",{key:n,attrs:{label:t.value}},[e._v(e._s(t.label))])})))],1):e._e(),e._v(" "),"detail_table"===e.field.formType?i("setting-detail-table",{attrs:{field:e.field},on:{"child-edit":e.emitChildEdit}}):e._e(),e._v(" "),e.canOptions?[i("div",{staticClass:"item-section"},[e._m(2),e._v(" "),i("div",{staticClass:"input-tips"},[e._v("修改选项后该项设置的逻辑表单会失效")]),e._v(" "),i("setting-options",{attrs:{field:e.field,"is-table-child":e.isTableChild}})],1),e._v(" "),!e.isTableChild&&e.showLogic?i("div",{staticClass:"item-section"},[e._m(3),e._v(" "),i("setting-logic-form",{attrs:{field:e.field,point:e.point,"field-arr":e.fieldArr}})],1):e._e()]:e._e(),e._v(" "),e.canBusinessRelationship?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("关系类型配置")]),e._v(" "),i("setting-relation-type")],1):e._e(),e._v(" "),e.canPrecisions?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("\n          "+e._s(e.precisionsTitle)+"\n        ")]),e._v(" "),i("setting-precisions",{attrs:{field:e.field}})],1):e._e(),e._v(" "),e.isAttention?i("div",{staticClass:"item-section"},[i("setting-attention",{attrs:{field:e.field}})],1):e._e(),e._v(" "),e.canDefault?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("默认值")]),e._v(" "),i("setting-default",{attrs:{field:e.field}})],1):e._e(),e._v(" "),e.canNumber?i("div",{staticClass:"item-section"},[i("setting-number",{attrs:{field:e.field}})],1):e._e(),e._v(" "),e.isSerialNumber?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("编号规则")]),e._v(" "),i("setting-serial-number",{attrs:{field:e.field,point:e.point,"field-arr":e.fieldArr}})],1):e._e(),e._v(" "),e.isTag?i("div",{staticClass:"item-section"},[e._m(4),e._v(" "),i("setting-tag",{attrs:{field:e.field}})],1):e._e()],e._v(" "),e.isDescText?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("内容")]),e._v(" "),i("setting-desc-text",{attrs:{field:e.field}})],1):e._e(),e._v(" "),e.isPic?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("图片上传数量设置")]),e._v(" "),i("div",{staticClass:"item-check-section"},[e._m(5),e._v(" "),i("el-select",{on:{change:function(t){e.handleSelectNum(t,"max")}},model:{value:e.field.maxNumRestrict,callback:function(t){e.$set(e.field,"maxNumRestrict",t)},expression:"field.maxNumRestrict"}},e._l(20,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})))],1),e._v(" "),i("div",{staticClass:"item-check-section"},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.field.isPhotograph,callback:function(t){e.$set(e.field,"isPhotograph",t)},expression:"field.isPhotograph"}},[e._v("只允许拍照上传")]),e._v(" "),i("div",{staticClass:"input-tips add-style"},[e._v("该功能仅对APP/微信小程序/企业微信/飞书移动客户端有效")]),e._v(" "),i("div",{staticClass:"input-tips"},[e._v("提示：单张图片不超过20M")])],1)]):e._e(),e._v(" "),e.fieldAuth.percentEdit?i("div",{staticClass:"item-section"},[e._m(6),e._v(" "),i("el-radio-group",{attrs:{size:"medium"},on:{change:e.emitUpdateWidth},model:{value:e.field.stylePercent,callback:function(t){e.$set(e.field,"stylePercent",t)},expression:"field.stylePercent"}},e._l(e.widthOptions,(function(t){return i("el-radio-button",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.value))])})))],1):e._e(),e._v(" "),e.canTransform&&e.transformData&&e.transformData[e.field.formType]?i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("转化客户字段")]),e._v(" "),i("el-select",{attrs:{clearable:""},model:{value:e.field.relevant,callback:function(t){e.$set(e.field,"relevant",t)},expression:"field.relevant"}},e._l(e.transformData[e.field.formType],(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1):e._e(),e._v(" "),!e.isDescText&&(e.fieldAuth.nullEdit||e.fieldAuth.uniqueEdit||e.fieldAuth.hiddenEdit)?i("div",{staticClass:"item-section"},[e.fieldAuth.nullEdit?i("div",{staticClass:"item-check-section"},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.field.isNull,callback:function(t){e.$set(e.field,"isNull",t)},expression:"field.isNull"}},[e._v("设为必填")]),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"243"}})],1):e._e(),e._v(" "),e.fieldAuth.uniqueEdit?i("div",{staticClass:"item-check-section"},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.field.isUnique,callback:function(t){e.$set(e.field,"isUnique",t)},expression:"field.isUnique"}},[e._v("设为唯一")]),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"244"}})],1):e._e(),e._v(" "),e.fieldAuth.hiddenEdit?i("div",{staticClass:"item-check-section"},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.field.isHidden,callback:function(t){e.$set(e.field,"isHidden",t)},expression:"field.isHidden"}},[e._v("隐藏字段")]),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"245"}})],1):e._e()]):e._e()],2)]):e._e()},ce=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[i("span",[e._v("*")]),e._v("标识名"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"240"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[e._v("提示文字"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"241"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[i("span",[e._v("*")]),e._v("选项内容")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[e._v("逻辑表单"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"248"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[e._v("标签管理"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"253"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("span",{staticClass:"require"},[e._v("*")]),e._v("最大\n        ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[e._v("\n        字段占比 %"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"242"}})])}],de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-default"},["text"===e.type?i("el-input",{attrs:{maxlength:e.field.maxLength||100,disabled:e.disabled},on:{blur:e.inputBlur},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}}):"textarea"===e.type?i("el-input",{attrs:{maxlength:e.field.maxLength||800,disabled:e.disabled},on:{blur:e.inputBlur},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}}):"datePicker"===e.type?i("el-date-picker",{attrs:{disabled:e.disabled,type:"date"===e.field.formType?"date":"datetime","value-format":"date"===e.field.formType?"yyyy-MM-dd":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择"},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}}):"date_interval"===e.type?i("el-date-picker",{attrs:{type:1===e.field.precisions?"daterange":"datetimerange","value-format":1===e.field.precisions?"yyyy-MM-dd":"yyyy-MM-dd HH:mm:ss",disabled:e.disabled,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}}):"select"===e.type?i("el-select",{key:e.field.formType,attrs:{clearable:e.canClearable,multiple:"checkbox"===e.field.formType,disabled:e.disabled},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label||e.name,value:e.value}})}))):"number"===e.type?[i("el-input",{attrs:{disabled:e.disabled},on:{blur:e.inputBlur},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}},["percent"===e.field.formType?i("div",{staticClass:"el-input__icon",attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")]):e._e()]),e._v(" "),i("div",{staticClass:"input-tips"},[i("span",[e._v("*")]),e._v("\n      数字的位数必须少于"+e._s("percent"===e.field.formType?10:15)+"位\n    ")])]:"position"===e.type?[i("wk-distpicker",{attrs:{"hide-area":e.field.precisions>=3,"only-province":4===e.field.precisions,disabled:e.disabled,clearable:""},on:{change:e.handleCascaderChange},model:{value:e.selectedMapValue,callback:function(t){e.selectedMapValue=t},expression:"selectedMapValue"}}),e._v(" "),1===e.field.precisions?i("el-input",{staticStyle:{"margin-top":"5px"},attrs:{rows:3,maxlength:100,disabled:e.disabled,type:"textarea"},on:{change:e.inputPositionChange},model:{value:e.detailAddress,callback:function(t){e.detailAddress=t},expression:"detailAddress"}}):e._e()]:e._e()],2)},ue=[],fe=(i("ac1f"),i("5319"),i("c740"),i("5047")),pe=i("ed08"),he={name:"SettingDefault",components:{WkDistpicker:fe["a"]},props:{field:{type:Object,required:!0}},data:function(){return{selectedMapValue:[],detailAddress:"",oldPrecisions:null,areaData:[]}},computed:{disabled:function(){return!Object(j["b"])(this.field.operating).defaultEdit},canClearable:function(){var e=this.field.formType;return!["boolean_value"].includes(e)},type:function(){var e=this.field.formType;if(["date","datetime"].includes(e))return"datePicker";if(["number","floatnumber","percent"].includes(e))return"number";if(["select","checkbox","boolean_value","field_attention"].includes(e))return"select";switch(this.field.formType){case"date_interval":return"date_interval";case"position":return"position";case"textarea":return"textarea";default:return"text"}},options:function(){if("select"!==this.type)return[];var e=this.field.formType;if(["select","checkbox"].includes(e))return this.field.setting&&this.field.setting.length>0&&this.itemIsObject(this.field.setting[0])?this.field.setting:this.field.setting.map((function(e){return{label:e,value:e}}));switch(e){case"boolean_value":return[{label:"选中",value:"1"},{label:"不选中",value:"0"}];case"field_attention":return[{label:"一星",value:1},{label:"二星",value:2},{label:"三星",value:3},{label:"四星",value:4},{label:"五星",value:5}];default:return[]}}},watch:{field:{handler:function(){if("boolean_value"!==this.field.formType)if("field_attention"!==this.field.formType){if("select"===this.type&&Object(p["c"])(this.field.setting)&&!Object(p["c"])(this.field.options)&&this.$set(this.field,"setting",this.field.options.split(",")),"position"===this.type)if(this.resetDefaultValue(),Object(p["c"])(this.field.defaultValue))this.selectedMapValue=[],Object(p["a"])(this.field.defaultValue)||(this.field.defaultValue=[]),this.detailAddress="";else if(this.selectedMapValue=this.field.defaultValue.filter((function(e){return 4!==e.id})),1===this.field.precisions){var e=this.field.defaultValue.find((function(e){return 4===e.id}));this.detailAddress=e?e.name:""}}else this.field.defaultValue=Object(p["c"])(this.field.defaultValue)?null:Number(this.field.defaultValue);else this.field.defaultValue=Object(p["c"])(this.field.defaultValue)?"0":this.field.defaultValue},deep:!0,immediate:!0}},methods:{inputBlur:function(){if(this.field.defaultValue)if("mobile"===this.field.formType)Object(pe["B"])(this.field.defaultValue)||(this.$message.error("输入的手机格式有误"),this.field.defaultValue="");else if("email"===this.field.formType)Object(pe["A"])(this.field.defaultValue)||(this.$message.error("输入的邮箱格式有误"),this.field.defaultValue="");else if("number"===this.type){var e=Number(this.field.defaultValue);if(isNaN(e))return void(this.field.defaultValue=null);this.field.defaultValue=String(e);var t=String(e).split("."),i=String(e).replace(".","").replace("-","").length,n="percent"===this.field.formType?10:15;if(i>n)return this.$message.error("最多支持".concat(n,"位数字（包含小数位）")),void(this.field.defaultValue=null);var a=Object(p["c"])(this.field.minNumRestrict)?-1/0:Number(this.field.minNumRestrict||-1/0),l=Object(p["c"])(this.field.maxNumRestrict)?1/0:Number(this.field.maxNumRestrict||1/0);if(e<a)return this.$message.error("默认值不能小于最小值"),void(this.field.defaultValue=null);if(e>l)return this.$message.error("默认值不能大于最大值"),void(this.field.defaultValue=null);if(Object(p["c"])(this.field.precisions))return void(this.field.defaultValue=t[0]);if(0===this.field.precisions)return;t.length>1&&t[1].length>Number(this.field.precisions)&&(this.$message.error("默认值的小数位不能大于".concat(this.field.precisions)),this.field.defaultValue=null)}},resetDefaultValue:function(){this.oldPrecisions&&this.oldPrecisions!==this.field.precisions?(this.oldPrecisions=this.field.precisions,this.selectedMapValue=[],Object(p["c"])(this.field.defaultValue)||(this.field.defaultValue=[])):this.oldPrecisions=this.field.precisions},inputPositionChange:function(){if(1!==this.field.precisions){var e=this.field.defaultValue.findIndex((function(e){return 4===e.id}));if(-1===e)return;this.field.defaultValue.splice(e,1)}else{var t=this.field.defaultValue.find((function(e){return 4===e.id}));t?t.name=this.detailAddress:this.field.defaultValue.push({code:"",name:this.detailAddress,id:4})}},handleCascaderChange:function(){this.field.defaultValue=this.selectedMapValue,this.inputPositionChange()},getCascaderValArr:function(e,t){var i=[];if(0===t.length)return i;var n=0,a=Object(pe["z"])(e);do{var l=a.find((function(e){return e.code===t[n]}));l&&(a=l.children||[],i.push({code:l.code,name:l.name,id:n+1})),n++}while(n<=t.length);return i},itemIsObject:function(e){return Object(p["d"])(e)}}},me=he,ve=(i("e35f"),Object(V["a"])(me,de,ue,!1,null,"54004db7",null)),be=ve.exports,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-options"},[i("draggable",{attrs:{list:e.optionsList,options:e.dragConfig},on:{sort:e.handleChange}},e._l(e.optionsList,(function(t,n){return i("div",{key:n,staticClass:"option-item"},[i("el-input",{attrs:{disabled:!e.optionsEditAuth},on:{change:e.handleChange},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},[e.optionsEditAuth?i("flexbox",{attrs:{slot:"suffix"},slot:"suffix"},[i("div",{staticClass:"el-input__icon drag-hook wk wk-grid"}),e._v(" "),i("el-button",{staticClass:"el-input__icon wk wk-icon-bin",attrs:{disabled:e.optionsList.length<=1,type:"text"},on:{click:function(t){e.handleDelete(n)}}})],1):e._e()],1)],1)}))),e._v(" "),e.showOther?i("div",{staticClass:"option-item other-item"},[i("el-input",{attrs:{value:"其他",disabled:""}},[e.optionsEditAuth?i("flexbox",{attrs:{slot:"suffix"},slot:"suffix"},[i("el-button",{staticClass:"el-input__icon wk wk-icon-bin",attrs:{type:"text"},on:{click:function(t){e.handleDelete(-1)}}})],1):e._e()],1)],1):e._e(),e._v(" "),e.optionsEditAuth?i("el-button",{staticClass:"add-btn",on:{click:e.handleAdd}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 添加新选项\n  ")]):e._e(),e._v(" "),e.optionsEditAuth?i("flexbox",{attrs:{align:"center",justify:"center"}},[i("div",{staticClass:"add-other-btn",on:{click:e.handleAddOther}},[e._v("\n      添加其他\n    ")]),e._v(" "),i("flexbox-item"),e._v(" "),i("div",{staticClass:"add-other-btn",on:{click:e.handleUpdateAll}},[e._v("批量编辑")])],1):e._e(),e._v(" "),i("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.dialogVisible,"before-close":e.handleCloseDialog,"close-on-click-modal":!1,title:"批量编辑",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("div",{staticClass:"edit-tips"},[e._v("\n        每行内容对应一个选项，点击完成后，逻辑表单设置将失效\n      ")]),e._v(" "),i("el-input",{attrs:{rows:10,resize:"none",type:"textarea"},model:{value:e.dialogContentVal,callback:function(t){e.dialogContentVal=t},expression:"dialogContentVal"}})],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleCloseDialog}},[e._v("\n        取消\n      ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("\n        确定\n      ")])],1)])],1)},ye=[],_e=(i("b64b"),i("e9c4"),i("1276"),"其他"),xe={name:"SettingOptions",components:{draggable:F.a},props:{field:{type:Object,required:!0},isTableChild:{type:Boolean,default:!1}},data:function(){return{optionsList:[],dialogVisible:!1,dialogContentVal:""}},computed:{optionsEditAuth:function(){return Object(j["b"])(this.field.operating).optionsEdit},showOther:function(){return this.field.setting.includes(_e)},dragConfig:function(){return{group:Object(pe["x"])(),forceFallback:!1,disabled:!this.optionsEditAuth,fallbackClass:"draggingStyle",handle:".drag-hook",filter:".el-input__inner",preventOnFilter:!1}}},watch:{field:{handler:function(e,t){if(!t||e.options!==t.options){var i=this.field.setting,n=i.length>0&&Object(p["d"])(i[0]);this.optionsList=n?i.map((function(e){return{value:e.name}})):i.filter((function(e){return e!==_e})).map((function(e){return{value:e}}))}},deep:!0,immediate:!0}},methods:{handleChange:function(){var e=this,t=this.optionsList.map((function(e){return e.value})).filter((function(e){return!Object(p["c"])(e)&&e!==_e}));if(0===t.length&&(this.optionsList=[{value:"选1"}],t=["选1"]),t=Array.from(new Set(t)),t.length!==this.optionsList.length&&(this.optionsList=t.map((function(e){return{value:e}}))),this.showOther&&t.push(_e),this.field.setting=t,"options_type"===this.field.remark){var i={},n=Object.keys(this.field.optionsData);this.optionsList.forEach((function(t){n.includes(t.value)?i[t.value]=e.field.optionsData[t.value]:i[t.value]=[]})),Object.keys(i).forEach((function(t){var n=e.optionsList.find((function(e){return e.value===t&&t!==_e}));n||delete i[t]})),this.showOther?n.includes(_e)&&(i[_e]=this.field.optionsData[_e]):delete i[_e],this.field.options=JSON.stringify(i,this.field.setting),this.$set(this.field,"optionsData",i)}else this.field.options=t.join(",");this.$set(this.field,"setting",this.field.setting),this.$set(this.field,"options",this.field.options),this.$nextTick((function(){e.checkDefaultValue()}))},handleDelete:function(e){var t=null;if(-1!==e)t=this.field.setting[e],this.optionsList.splice(e,1),this.field.setting.splice(e,1);else{var i=this.field.setting.lastIndexOf(_e);-1!==i&&(this.field.setting.splice(i,1),t=_e)}"options_type"===this.field.remark?(delete this.field.optionsData[t],this.$set(this.field,"options",JSON.stringify(this.field.optionsData))):this.$set(this.field,"options",this.field.setting.join(",")),this.$set(this.field,"setting",this.field.setting),this.checkDefaultValue()},handleAdd:function(){var e=this.getAddValue(this.optionsList.length+1);this.optionsList.push({value:e}),this.handleChange()},handleAddOther:function(){-1===this.field.setting.indexOf(_e)&&this.field.setting.push(_e),this.$set(this.field,"setting",this.field.setting),"options_type"===this.field.remark?(this.field.optionsData[_e]=[],this.$set(this.field,"optionsData",this.field.optionsData),this.$set(this.field,"options",JSON.stringify(this.field.optionsData))):this.$set(this.field,"options",this.field.setting.join(","))},handleUpdateAll:function(){this.dialogContentVal=this.optionsList.map((function(e){return e.value})).join("\n"),this.dialogVisible=!0},handleCloseDialog:function(){this.dialogVisible=!1},handleDialogConfirm:function(){var e=this.dialogContentVal.split(/\n|\r/);e=Array.from(new Set(e)).map((function(e){return e.trim()})).filter((function(e){return!Object(p["c"])(e)&&e!==_e})),this.optionsList=e.map((function(e){return{value:e}})),this.$set(this.field,"remark",null),this.$set(this.field,"optionsData",null),this.handleChange(),this.handleCloseDialog()},getAddValue:function(e){var t=this.optionsList.find((function(t){return t.value==="选".concat(e)}));return t?this.getAddValue(e+1):"选".concat(e)},checkDefaultValue:function(){var e=this;if(!Object(p["c"])(this.field.defaultValue))if(Object(p["a"])(this.field.defaultValue)){var t=[];this.field.defaultValue.forEach((function(i){var n=e.optionsList.find((function(e){return e.value===i}));n&&t.push(i)})),this.$set(this.field,"defaultValue",[].concat(t))}else{var i=this.optionsList.find((function(t){return t.value===e.field.defaultValue}));i||this.$set(this.field,"defaultValue",null)}}}},Ce=xe,ke=(i("0b8e"),Object(V["a"])(Ce,ge,ye,!1,null,"0b6500a8",null)),Te=ke.exports,Ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-number"},[i("flexbox",{staticClass:"setting-number-item",attrs:{align:"center",justify:"flex-start"}},[i("el-checkbox",{attrs:{disabled:!e.editAuth},on:{change:e.checkedChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" "),i("span",{staticStyle:{"font-size":"13px"}},[e._v("支持小数")]),e._v(" "),e.checked?[i("span",{staticStyle:{margin:"0 4px"}},[e._v("限制")]),e._v(" "),i("el-select",{attrs:{size:"small",placeholder:"",disabled:!e.editAuth},on:{change:e.handleSelectChange},model:{value:e.field.precisions,callback:function(t){e.$set(e.field,"precisions",t)},expression:"field.precisions"}},e._l(e.precisionList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))),e._v(" "),i("span",{staticStyle:{"margin-left":"4px"}},[e._v("位")])]:e._e()],2),e._v(" "),i("flexbox",{staticClass:"setting-number-item",attrs:{align:"flex-start",justify:"flex-start",direction:"column"}},[i("el-checkbox",{attrs:{disabled:!e.editAuth},on:{change:e.limitChange},model:{value:e.limitChecked,callback:function(t){e.limitChecked=t},expression:"limitChecked"}},[e._v("\n      限制数值范围\n    ")]),e._v(" "),e.limitChecked?i("flexbox",{staticClass:"number-range-body",attrs:{align:"center",justify:"flex-start"}},[i("flexbox-item",[i("el-input-number",{attrs:{controls:!1,placeholder:"最小值",disabled:!e.editAuth},on:{change:function(t){e.handleChangeNumber("minNumRestrict")}},model:{value:e.minNumRestrict,callback:function(t){e.minNumRestrict=t},expression:"minNumRestrict"}})],1),e._v(" "),i("div",{staticClass:"number-range-text"},[e._v("~")]),e._v(" "),i("flexbox-item",[i("el-input-number",{attrs:{controls:!1,placeholder:"最大值",disabled:!e.editAuth},on:{change:function(t){e.handleChangeNumber("maxNumRestrict")}},model:{value:e.maxNumRestrict,callback:function(t){e.maxNumRestrict=t},expression:"maxNumRestrict"}})],1)],1):e._e()],1)],1)},we=[],Fe={name:"SettingNumber",props:{field:{type:Object,required:!0}},data:function(){return{checked:!1,precisionList:[],limitChecked:!1,minNumRestrict:void 0,maxNumRestrict:void 0}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).defaultEdit}},watch:{field:{handler:function(){if(["number","floatnumber","percent"].includes(this.field.formType)){this.field.hasOwnProperty("minNumRestrict")||(this.field.minNumRestrict=null),this.field.hasOwnProperty("maxNumRestrict")||(this.field.maxNumRestrict=null),this.minNumRestrict=Object(p["c"])(this.field.minNumRestrict)?void 0:Number(this.field.minNumRestrict),this.maxNumRestrict=Object(p["c"])(this.field.maxNumRestrict)?void 0:Number(this.field.maxNumRestrict);var e="percent"===this.field.formType?5:14;this.precisionList=Array.from({length:e}).map((function(e,t){return{label:t+1,value:t+1}})),this.field.hasOwnProperty("precisions")||(this.field.precisions="number"===this.field.formType?4:2),this.field.precisions>e&&(this.field.precisions=e),this.checked=!Object(p["c"])(this.field.precisions),this.limitChecked=!Object(p["c"])(this.minNumRestrict)||!Object(p["c"])(this.maxNumRestrict)}},deep:!0,immediate:!0}},methods:{checkedChange:function(){this.checked?this.field.precisions=2:this.field.precisions=null},handleSelectChange:function(){this.$set(this.field,"precisions",this.field.precisions),this.$forceUpdate()},limitChange:function(){this.limitChecked||(this.minNumRestrict=void 0,this.maxNumRestrict=void 0,this.field.minNumRestrict="",this.field.maxNumRestrict="")},handleChangeNumber:function(e){var t=this[e],i=String(t||"").replace(".","").replace("-","").length,n="percent"===this.field.formType?10:15;if(i>n)return this.$message.error("最多支持".concat(n,"位数字")),void(this.field[e]=null);var a=this.minNumRestrict,l=this.maxNumRestrict;Object(p["c"])(a)||Object(p["c"])(l)||Number(a)>Number(l)&&(this.$message.error("请输入正确的数值范围"),this.field[e]=null);var s=Object(p["c"])(a)?"":a,o=Object(p["c"])(l)?"":l;this.field.minNumRestrict=null!==this.minNumRestrict?String(s):null,this.field.maxNumRestrict=null!==this.maxNumRestrict?String(o):null}}},Oe=Fe,je=(i("4e4f"),i("25cf"),Object(V["a"])(Oe,Ae,we,!1,null,"537dc6d4",null)),Ee=je.exports,Ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-precisions"},[i("el-select",{attrs:{disabled:!e.editAuth},model:{value:e.field.precisions,callback:function(t){e.$set(e.field,"precisions",t)},expression:"field.precisions"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1)},Ve=[],Ie={name:"SettingPrecisions",props:{field:{type:Object,required:!0}},data:function(){return{options:[]}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).defaultEdit}},watch:{field:{handler:function(){["date_interval","position","select","checkbox"].includes(this.field.formType)&&("date_interval"===this.field.formType?this.options=[{label:"日期",value:1},{label:"日期时间",value:2}]:"position"===this.field.formType?this.options=[{label:"省/地区、市、区/县、详细地址",value:1},{label:"省/地区、市、区/县",value:2},{label:"省/地区、市",value:3},{label:"省/地区",value:4}]:(this.options=[{label:"平铺",value:1},{label:"下拉",value:2}],this.field.precisions||this.$set(this.field,"precisions","checkbox"===this.field.formType?1:2)),this.field.precisions||this.$set(this.field,"precisions",1))},deep:!0,immediate:!0}}},Le=Ie,Se=(i("f45d"),Object(V["a"])(Le,Ne,Ve,!1,null,"43d24c9a",null)),$e=Se.exports,De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-rich-text"},[i("tinymce",{ref:"createTinymce",staticClass:"rich-txt",attrs:{init:e.getEditConfig(),height:200,disabled:!e.editAuth,toolbar:"bold italic underline strikethrough | fontselect | forecolor backcolor | fontsizeselect | numlist bullist | alignleft aligncenter alignright | image link | removeformat"},on:{input:e.debouncedEditorInput},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}})],1)},Re=[],Pe=(i("4d63"),i("c607"),i("2c3e"),i("8256")),Me=i("7a1a"),Ge={name:"SettingRichText",components:{Tinymce:Pe["a"]},props:{field:{type:Object,required:!0}},data:function(){return{debouncedEditorInput:null}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).defaultEdit}},created:function(){this.debouncedEditorInput=Object(Me["debounce"])(300,this.editInputChange)},methods:{getEditConfig:function(){return{menubar:!1,statusbar:!1,paste_data_images:!0,paste_enable_default_filters:!1,placeholder:"描述文字内容",content_style:" * {color: #262626; margin: 0;} body { margin: 8px; font-size: 14px; }",paste_retain_style_properties:"border",toolbar_mode:"scrolling",paste_preprocess:function(e,t){var i=["b","strong","i","em"];i.forEach((function(e){var i=new RegExp("(<".concat(e,">)|(</").concat(e,">)]"),"g");t.content=t.content.replace(i,"")}));var n=["h1","h2","h3","h4","h5","h6"];n.forEach((function(e){var i=new RegExp("<".concat(e,">"),"g"),n=new RegExp("</".concat(e,">"),"g");t.content=t.content.replace(i,"<p>"),t.content=t.content.replace(n,"</p>")})),t.content=t.content.replace(/<\/font>/gi,"").replace(/<font[^>]+>/gi,"")},paste_postprocess:function(e,t){var i=Array.from(t.node.querySelectorAll("*"));i.forEach((function(e){e.style.color="",e.style.fontWeight="",e.style.fontFamily="",e.style.fontSize="",e.style.background=""}))}}},editInputChange:function(){}}},Ue=Ge,Be=Object(V["a"])(Ue,De,Re,!1,null,"cacb02c4",null),We=Be.exports,He=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-detail-table"},[i("div",{staticClass:"item-section"},[i("div",{staticClass:"name"},[e._v("表格字段")]),e._v(" "),i("draggable",{attrs:{list:e.field.fieldExtendList,options:e.dragConfig},on:{sort:e.handleChange}},e._l(e.field.fieldExtendList,(function(t,n){return i("flexbox",{key:n,staticClass:"option-item",attrs:{align:"center",justify:"flex-start"}},[i("i",{staticClass:"type-icon",class:e.typeObj(t.formType).icon}),e._v(" "),i("div",{staticClass:"option-item__name"},[e._v(e._s(t.name))]),e._v(" "),i("el-button",{staticClass:"option-item__icon wk wk-write",attrs:{disabled:!e.editAuth,type:"text"},on:{click:function(t){e.handleEdit(n)}}}),e._v(" "),i("el-button",{staticClass:"option-item__icon wk wk-icon-bin",attrs:{disabled:!e.editAuth,type:"text"},on:{click:function(t){e.handleDelete(n)}}}),e._v(" "),i("div",{staticClass:"option-item__icon drag-hook wk wk-grid"})],1)})))],1),e._v(" "),i("div",{staticClass:"item-section"},[e._m(0),e._v(" "),i("div",[i("el-input",{attrs:{maxlength:10,disabled:!e.editAuth},model:{value:e.field.remark,callback:function(t){e.$set(e.field,"remark",t)},expression:"field.remark"}})],1)]),e._v(" "),i("div",{staticClass:"item-section"},[e._m(1),e._v(" "),i("el-radio-group",{attrs:{disabled:!e.editAuth},model:{value:e.field.precisions,callback:function(t){e.$set(e.field,"precisions",t)},expression:"field.precisions"}},[i("el-radio",{attrs:{label:1}},[e._v("列表")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("表格")])],1)],1)])},Ye=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[e._v("动作名"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"251"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"name"},[e._v("\n      填写方式"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"264"}})])}],Je=[{componentName:"FieldInput",formType:"text",name:"单行文本",type:1,icon:"wk wk-icon-text"},{componentName:"FieldTextarea",formType:"textarea",name:"多行文本",type:2,icon:"wk wk-icon-textarea"},{componentName:"FieldInput",formType:"website",name:"网址",type:25,icon:"wk wk-icon-website"},{componentName:"FieldBoolean",formType:"boolean_value",name:"布尔值",type:41,icon:"wk wk-icon-bool"},{componentName:"FieldSelect",formType:"select",name:"单选",type:3,icon:"wk wk-icon-select"},{componentName:"FieldCheckbox",formType:"checkbox",name:"多选",type:9,icon:"wk wk-icon-checkbox"},{componentName:"FieldInput",formType:"number",name:"数字",type:5,icon:"wk wk-icon-int"},{componentName:"FieldInput",formType:"floatnumber",name:"货币",type:6,icon:"wk wk-icon-coin"},{componentName:"FieldPercent",formType:"percent",name:"百分数",type:42,icon:"wk wk-percent-line"},{componentName:"FieldInput",formType:"mobile",name:"手机",type:7,icon:"wk wk-icon-mobile2"},{componentName:"FieldInput",formType:"email",name:"邮箱",type:14,icon:"wk wk-icon-email2"},{componentName:"FieldInput",formType:"date",name:"日期",type:4,icon:"wk wk-icon-date2"},{componentName:"FieldInput",formType:"datetime",name:"日期时间",type:13,icon:"wk wk-icon-datetime2"},{componentName:"FieldDateInterval",formType:"date_interval",name:"日期区间",type:48,icon:"wk wk-icon-range"},{componentName:"FieldPosition",formType:"position",name:"地址",type:43,icon:"wk wk-nearby"},{componentName:"FieldLocation",formType:"location",name:"定位",type:44,icon:"wk wk-icon-nav"},{componentName:"FieldInput",formType:"user",name:"人员",type:10,icon:"wk wk-s-contacts-line"},{componentName:"FieldInput",formType:"structure",name:"部门",type:12,icon:"wk wk-icon-s-seas-line"},{componentName:"FieldFile",formType:"pic",name:"图片",type:29,icon:"wk wk-icon-status"},{componentName:"FieldFile",formType:"file",name:"附件",type:8,icon:"wk wk-icon-file"},{componentName:"FieldWritingSign",formType:"handwriting_sign",name:"手写签名",type:46,icon:"wk wk-icon-edit-line"},{componentName:"FieldDescText",formType:"desc_text",name:"描述文字",type:50,icon:"wk wk-icon-des"},{componentName:"FieldDetailTable",formType:"detail_table",name:"明细表格",type:45,icon:"wk wk-icon-form"},{componentName:"FieldSerialNumber",formType:"serial_number",name:"自定义编号",type:63,icon:"wk wk-icon-catalog2"},{componentName:"FieldTag",formType:"field_tag",name:"自定义标签",type:61,icon:"wk wk-icon-label2"},{componentName:"FieldAttention",formType:"field_attention",name:"关注度",type:62,icon:"wk wk-focus-on-line"},{componentName:"FieldGroup",formType:"field_group",name:"分组标题",type:60,icon:"wk wk-icon-title"},{componentName:"FieldDescText",formType:"rich_text_format",name:"富文本",type:70,icon:"wk wk-icon-contract"}],Ze={name:"SettingDetailTable",components:{draggable:F.a},props:{field:{type:Object,required:!0}},data:function(){return{}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).defaultEdit},dragConfig:function(){return{group:Object(pe["x"])(),disabled:!this.editAuth,forceFallback:!1,fallbackClass:"draggingStyle",handle:".drag-hook",filter:".el-input__inner",preventOnFilter:!1}}},watch:{field:{handler:function(){this.field.precisions||this.$set(this.field,"precisions",1),this.$set(this.field,"precisions",this.field.precisions),this.$set(this.field,"remark",this.field.remark)},deep:!0,immediate:!0}},methods:{typeObj:function(e){return Je.find((function(t){return t.formType===e}))},handleChange:function(){this.$set(this.field,"fieldExtendList",this.field.fieldExtendList)},handleEdit:function(e){this.$emit("child-edit",this.field.fieldExtendList[e])},handleDelete:function(e){this.field.fieldExtendList.splice(e,1),this.$set(this.field,"fieldExtendList",this.field.fieldExtendList)}}},ze=Ze,qe=(i("7409"),Object(V["a"])(ze,He,Ye,!1,null,"7b34685c",null)),Qe=qe.exports,Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-logic-form"},[i("el-button",{staticClass:"add-btn",attrs:{disabled:!e.editAuth},on:{click:e.handleToSet}},[e._v("\n    "+e._s(e.hasConfig?"已配置":"点击配置")+"\n  ")]),e._v(" "),i("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.dialogVisible,"before-close":e.handleCloseDialog,"close-on-click-modal":!1,"append-to-body":"",title:"添加逻辑表单规则",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("div",{staticClass:"edit-tips"},[e._v("\n        选择选项后，才会显示所设置的其他字段\n      ")]),e._v(" "),i("div",{staticClass:"edit-table"},[i("flexbox",{staticClass:"edit-table__header row",attrs:{align:"center",justify:"flex-start"}},[i("div",{staticClass:"label"},[e._v("选项内容")]),e._v(" "),i("flexbox-item",{staticClass:"content"},[e._v("显示字段")])],1),e._v(" "),e.list.length>0&&e.fieldLibArr.length>0?i("div",{staticClass:"edit-table__body"},e._l(e.list,(function(t,n){return i("flexbox",{key:n,staticClass:"row",attrs:{align:"center",justify:"flex-start"}},[i("div",{staticClass:"label"},[e._v(e._s(t.name))]),e._v(" "),i("flexbox-item",{staticClass:"content"},[i("el-select",{attrs:{multiple:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},e._l(e.fieldLibArr,(function(e,t){return i("el-option",{key:t,attrs:{label:"desc_text"===e.formType?"描述文字":e.name||"未命名",value:e.formAssistId}})})))],1)],1)}))):e._e()],1)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleCloseDialog}},[e._v("\n        取消\n      ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("\n        确定\n      ")])],1)])],1)},Ke=[],et={name:"SettingLogicForm",props:{field:{type:Object,required:!0},fieldArr:{type:Array,required:!0},point:{type:Array,required:!0}},data:function(){return{list:[],dialogVisible:!1}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).optionsEdit},fieldLibArr:function(){var e=this,t=[],i=[];return this.fieldArr.forEach((function(e){e.forEach((function(e){e.hasOwnProperty("formAssistId")&&!Object(p["c"])(e.formAssistId)&&i.push(e.formAssistId)}))})),this.fieldArr.forEach((function(i,n){i.forEach((function(i,a){n===e.point[0]&&a===e.point[1]||t.push(i)}))})),t.filter((function(e){return!["customer","business","contract"].includes(e.formType)}))},allFormAssistId:function(){return this.fieldLibArr.map((function(e){return e.formAssistId}))},hasConfig:function(){return this.list.some((function(e){return e.value&&e.value.length>0}))}},watch:{field:{handler:function(){if("options_type"!==this.field.remark)this.list=this.field.setting.map((function(e){return{name:e,value:null}}));else{var e={};if(this.field.optionsData)e=this.field.optionsData||{};else try{e=JSON.parse(this.field.options)||{}}catch(t){return this.list=this.field.setting.map((function(e){return{name:e,value:null}})),this.$set(this.field,"remark",null),this.$set(this.field,"optionsData",null),void this.$set(this.field,"options",this.field.setting.join(","))}this.list=Object.keys(e).map((function(t){return{name:t,value:Object(p["c"])(e[t])?[]:e[t]}}))}},deep:!0,immediate:!0},allFormAssistId:{handler:function(){var e=this;if("options_type"===this.field.remark){this.list.forEach((function(t){var i=[];t.value&&t.value.forEach((function(t){e.allFormAssistId.includes(t)&&i.push(t)})),t.value=i}));var t={};this.list.forEach((function(e){t[e.name]=e.value})),this.$set(this.field,"optionsData",t)}},deep:!0,immediate:!0}},methods:{handleToSet:function(){this.dialogVisible=!0},handleCloseDialog:function(){var e=this;this.$set(this.field,"_remark",""),this.$nextTick((function(){delete e.field._remark})),this.dialogVisible=!1},handleDialogConfirm:function(){var e={};this.list.forEach((function(t){e[t.name]=t.value}));var t=this.list.filter((function(e){return!Object(p["c"])(e.value)})).length;if(0!==t){this.$set(this.field,"remark","options_type"),this.$set(this.field,"optionsData",e);var i=JSON.stringify(e);this.$set(this.field,"options",i)}else this.$set(this.field,"remark",null),this.$set(this.field,"optionsData",null),this.$set(this.field,"options",this.field.setting.join(","));this.handleCloseDialog()}}},tt=et,it=(i("8c4a9"),Object(V["a"])(tt,Xe,Ke,!1,null,"3847df7c",null)),nt=it.exports,at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-serial-number"},[i("el-button",{staticClass:"add-btn",attrs:{disabled:!e.editAuth},on:{click:e.handleUpdateDialogVisible}},[e._v("\n    点击配置\n  ")]),e._v(" "),i("div",{staticClass:"rule"},[i("div",{staticClass:"rule-item"},[e._v("\n      编号示例："+e._s(e.serialNumberExample)+"\n    ")]),e._v(" "),e._l(e.field.setting,(function(t,n){return i("div",{key:n,staticClass:"rule-item"},[1===t.type?[e._v("\n        自动计数：起始编号"+e._s(t.startNumber)+" 递增数"+e._s(t.stepNumber)+" "+e._s(e.getResetTypeStr(t))+"\n      ")]:2===t.type?[e._v("固定字符："+e._s(t.value))]:3===t.type?[e._v("表单内字段："+e._s(t.value))]:e._e()],2)}))],2),e._v(" "),i("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.dialogVisible,"before-close":e.handleUpdateDialogVisible,"close-on-click-modal":!1,"append-to-body":"",width:"780px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[e._v("设置编号规则"),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"252"}})]),e._v(" "),i("div",{staticClass:"edit-dialog-body"},[i("div",{staticClass:"edit-tips"},[i("div",[e._v("\n          提示：编号规则中如果表单内字段选择了日期类型字段，若此日期字段值为空时，默认取创建时间的值\n        ")]),e._v(" "),e.serialNumberEditExample?i("div",[e._v("\n          编号示例："+e._s(e.serialNumberEditExample)+"\n        ")]):e._e()]),e._v(" "),i("draggable",{staticClass:"edit-form",attrs:{list:e.ruleList,options:e.dragConfig}},e._l(e.ruleList,(function(t,n){return i("flexbox",{key:n,staticClass:"edit-form-item"},[1===t.type?i("flexbox",{staticClass:"left"},[i("div",{staticClass:"el-input__icon drag-hook wk wk-grid"}),e._v(" "),i("el-input",{attrs:{value:"自动计数",disabled:""}}),e._v(" "),i("el-input",{directives:[{name:"wk-number",rawName:"v-wk-number",value:"positiveNum",expression:"'positiveNum'"}],attrs:{maxlength:12,placeholder:"起始编号"},model:{value:t.startNumber,callback:function(i){e.$set(t,"startNumber",i)},expression:"item.startNumber"}}),e._v(" "),i("el-input-number",{attrs:{maxlength:4,controls:!1,placeholder:"递增数"},model:{value:t.stepNumber,callback:function(i){e.$set(t,"stepNumber",i)},expression:"item.stepNumber"}}),e._v(" "),i("el-select",{model:{value:t.resetType,callback:function(i){e.$set(t,"resetType",i)},expression:"item.resetType"}},e._l(e.resetOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1):i("flexbox",{staticClass:"left"},[i("div",{staticClass:"el-input__icon drag-hook wk wk-grid"}),e._v(" "),i("el-select",{on:{change:function(i){e.typeChange(t)}},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"item.type"}},e._l(e.typeOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))),e._v(" "),2===t.type?i("el-input",{staticClass:"el-input",model:{value:t.value,callback:function(i){e.$set(t,"value","string"===typeof i?i.trim():i)},expression:"item.value"}}):e._e(),e._v(" "),3===t.type?[i("el-select",{on:{change:function(i){e.fieldChange(t)}},model:{value:t.formAssistId,callback:function(i){e.$set(t,"formAssistId",i)},expression:"item.formAssistId"}},e._l(e.fieldLibArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.formAssistId}})}))),e._v(" "),e.isTimeField(t)?i("el-select",{model:{value:t.textFormat,callback:function(i){e.$set(t,"textFormat",i)},expression:"item.textFormat"}},e._l(e.timeFormatOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))):e._e()]:e._e()],2),e._v(" "),1!==t.type?i("el-button",{staticClass:"el-input__icon wk wk-icon-bin",attrs:{type:"text"},on:{click:function(t){e.handleDelete(n)}}}):e._e()],1)}))),e._v(" "),i("el-button",{staticClass:"add",attrs:{type:"text"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[i("i",{staticClass:"el-icon-plus"}),e._v("\n        新增编号规则\n      ")])],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleUpdateDialogVisible}},[e._v("\n        取消\n      ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("\n        确定\n      ")])],1)]),e._v(" "),i("el-checkbox",{staticClass:"magin-top",attrs:{"true-label":1,"false-label":0,disabled:!e.editAuth},on:{change:e.allowedInputChange},model:{value:e.allowedInput,callback:function(t){e.allowedInput=t},expression:"allowedInput"}},[e._v("允许手动填写编号")]),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"27","data-id":"344"}})],1)},lt=[],st={name:"SettingSerialNumber",components:{draggable:F.a},props:{field:{type:Object,required:!0},fieldArr:{type:Array,required:!0},point:{type:Array,required:!0}},data:function(){return{typeOptions:[{label:"固定字符",value:2},{label:"表单内字段",value:3}],timeFormatOptions:[{label:"yyyyMMdd（年月日）",value:"yyyyMMdd"},{label:"yyyyMM（年月）",value:"yyyyMM"},{label:"yyyy（年）",value:"yyyy"}],dialogVisible:!1,ruleList:[],allowedInput:0}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).optionsEdit},dragConfig:function(){return{group:"serial-number-drag",forceFallback:!1,disabled:!this.editAuth,fallbackClass:"draggingStyle",handle:".drag-hook",filter:".el-input__inner",preventOnFilter:!1}},fieldLibArr:function(){var e=this,t=[],i=["date","datetime","text","select","number"];this.fieldArr.forEach((function(n,a){n.forEach((function(n,l){!i.includes(n.formType)||a===e.point[0]&&l===e.point[1]||t.push(n)}))}));var n=t.find((function(e){return"createTime"===e.fieldName}));return n||t.push({name:"创建时间",fieldName:"createTime",formType:"datetime",formAssistId:-100}),t},resetOptions:function(){var e=this,t=[{label:"每天开始重新编号",value:1},{label:"每月开始重新编号",value:2},{label:"每年开始重新编号",value:3},{label:"从不开始重新编号",value:4}],i={yyyyMMdd:0,yyyyMM:1,yyyy:2},n=null;return this.ruleList.forEach((function(t){if(3===t.type&&t.textFormat&&e.isTimeField(t)){var a=i[t.textFormat];a>=(n||0)&&(n=a)}})),null===n&&(n=3),t.slice(n)},serialNumberExample:function(){return this.getNumberExample(this.field.setting)},serialNumberEditExample:function(){return this.getNumberExample(this.ruleList)}},watch:{field:{handler:function(){var e=this,t=Object(pe["z"])(this.field.setting);t.forEach((function(t){if(t.hasOwnProperty("textFormat")||(t.textFormat=null),3===t.type){var i=e.fieldLibArr.find((function(e){return e.name===t.value}));i&&(t.formAssistId=i.formAssistId)}else 1===t.type&&(e.allowedInput=t.allowedInput?1:0)})),this.ruleList=t},deep:!0,immediate:!0},resetOptions:{handler:function(){var e=this.ruleList.find((function(e){return 1===e.type}));if(e){var t=this.resetOptions.find((function(t){return t.value===e.resetType}));t||this.$set(e,"resetType",this.resetOptions[0].value)}},deep:!0,immediate:!0}},methods:{getResetTypeStr:function(e){return{1:"每天开始重新编号",2:"每月开始重新编号",3:"每年开始重新编号",4:"从不开始重新编号"}[e.resetType]},getNumberExample:function(e){var t=[];return e.forEach((function(e){switch(e.type){case 1:t.push(e.startNumber);break;case 2:t.push(e.value);break;case 3:t.push(e.value);break}})),t.join("-")},handleUpdateDialogVisible:function(){this.dialogVisible=!this.dialogVisible},isTimeField:function(e){var t=this.fieldLibArr.find((function(t){return t.formAssistId===e.value||t.name===e.value}));return t&&["date","datetime"].includes(t.formType)},typeChange:function(e){this.$set(e,"value",null),this.$set(e,"formAssistId",null),3===e.type&&this.$set(e,"textFormat","")},fieldChange:function(e){var t=this;this.$nextTick((function(){var i=t.fieldLibArr.find((function(t){return t.formAssistId===e.formAssistId}))||{};t.$set(e,"value",i.name),["date","datetime"].includes(i.formType)?t.$set(e,"textFormat","yyyyMMdd"):t.$set(e,"textFormat","")}))},handleAdd:function(){this.ruleList.push({type:2,value:null,textFormat:null,formAssistId:null})},handleDelete:function(e){this.ruleList.splice(e,1)},allowedInputChange:function(){var e=this.field.setting.find((function(e){return 1===e.type}));e&&(this.$set(e,"allowedInput",this.allowedInput),this.$set(this.field,"options",JSON.stringify(this.field.setting)))},handleDialogConfirm:function(){for(var e=[],t=0;t<this.ruleList.length;t++){var i=this.ruleList[t];if(1===i.type){if(!i.startNumber&&0!==i.startNumber)return void this.$message.error("起始编号不能为空");if(!i.stepNumber)return void this.$message.error("递增数不能为空或等于0")}else{if(2===i.type&&!i.value)return void this.$message.error("固定字符不能为空");if(3===i.type&&!i.value)return void this.$message.error("请选择规则字段")}e.push(Object(s["a"])({},i))}e.forEach((function(e){3!==e.type&&delete e.textFormat,delete e.formAssistId})),this.$set(this.field,"setting",e),this.$set(this.field,"options",JSON.stringify(e)),this.handleUpdateDialogVisible()}}},ot=st,rt=(i("1ba1"),Object(V["a"])(ot,at,lt,!1,null,"4eea8e58",null)),ct=rt.exports,dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-tag",on:{click:function(e){e.stopPropagation()}}},[i("el-button",{staticClass:"add-btn",attrs:{disabled:!e.editAuth},on:{click:e.handleToSet}},[e._v("\n    点击配置\n  ")]),e._v(" "),i("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.dialogVisible,"before-close":e.handleCloseDialog,"close-on-click-modal":!1,title:"标签设置",width:"800px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"edit-dialog-body"},[i("div",{staticClass:"group-box is-tabs"},[i("div",{staticClass:"nav"},[i("flexbox",{staticClass:"nav__hd",attrs:{justify:"space-between"}},[e._v("\n            标签分组\n            "),i("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:e.newGroupBtn}},[e._v("创建分组")])],1),e._v(" "),i("draggable",{staticClass:"group-nav-box",attrs:{list:e.groupList},on:{end:e.dragEnd}},e._l(e.groupList,(function(t,n){return i("div",{key:n,staticClass:"group-nav-item",class:{"is-select":n==e.groupActiveIndex},on:{click:function(i){e.groupMenuSelect(t,n)}}},[i("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"handle-icon"},[i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.groupHandleClick}},[i("i",{staticClass:"el-icon-arrow-down",on:{click:function(t){e.groupDropdownClick(n)}}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"edit"}},[e._v("编辑")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"delete"}},[e._v("删除")])],1)],1)],1)])})))],1),e._v(" "),i("el-dialog",{attrs:{title:e.newGroupTitle,visible:e.newGroupVisible,"before-close":e.newGroupClose,"close-on-click-modal":!1,"append-to-body":"",width:"400px"},on:{"update:visible":function(t){e.newGroupVisible=t}}},[i("label",{staticClass:"label-title"},[e._v("分组名称")]),e._v(" "),i("el-input",{staticClass:"input-group",attrs:{maxlength:100},model:{value:e.group.name,callback:function(t){e.$set(e.group,"name",t)},expression:"group.name"}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.newGroupSubmit}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:e.newGroupClose}},[e._v("取消")])],1)],1),e._v(" "),i("div",{staticClass:"content-box"},[i("div",{staticClass:"content-table"},[i("flexbox",{staticClass:"content-table-header",attrs:{justify:"space-between"}},[i("div",[e._v(e._s(e.groupActive?e.groupActive.name:"分组"))]),e._v(" "),i("el-button",{staticClass:"xr-btn--orange",attrs:{disabled:0===e.groupList.length,size:"medium",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.newTagBtn(t)}}},[e._v("新建标签")])],1),e._v(" "),i("draggable",{staticClass:"tag-table",style:{height:e.tableHeight+"px"},attrs:{list:e.tagList}},e._l(e.tagList,(function(t,n){return i("div",{key:n,staticClass:"tag-row"},[i("div",{staticClass:"cell",staticStyle:{width:"100px"}},[i("span",[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticClass:"cell",staticStyle:{width:"200px"}},[i("div",{style:{background:t.color,padding:"10px","border-radius":"4px"}})]),e._v(" "),i("div",{staticClass:"cell"},[i("el-button",{attrs:{icon:"wk wk-edit",type:"text"},on:{click:function(i){e.tagHandleClick("editTag",t,n)}}}),e._v(" "),i("el-button",{attrs:{icon:"wk wk-delete",type:"text"},on:{click:function(i){e.tagHandleClick("delete",t,n)}}})],1)])})))],1)]),e._v(" "),i("el-dialog",{staticClass:"tag-add-box",attrs:{title:e.newTagTitle,visible:e.newTagVisible,"before-close":e.newTagClose,"close-on-click-modal":!1,"append-to-body":"",width:"400px"},on:{"update:visible":function(t){e.newTagVisible=t}}},[i("div",{staticClass:"content"},[i("div",{staticClass:"infrastructure"},[i("div",{staticClass:"row"},[i("span",{staticClass:"label name"},[e._v("标签名称")]),e._v(" "),i("div",{staticClass:"color-dynamic"},[i("el-input",{attrs:{maxlength:50,size:"mini"},model:{value:e.tag.name,callback:function(t){e.$set(e.tag,"name",t)},expression:"tag.name"}}),e._v(" "),i("span",{staticClass:"dynamic-span",style:{background:e.tag.color}})],1)]),e._v(" "),i("div",{staticClass:"row"},[i("span",{staticClass:"label"},[e._v("标签颜色")]),e._v(" "),i("div",{staticClass:"color-box"},e._l(e.colorList,(function(t,n){return i("span",{key:n,style:{background:t},on:{click:function(i){e.selectColor(t)}}})})))]),e._v(" "),i("div",{staticClass:"row"},[i("span",{staticClass:"label name"},[e._v("所属分组")]),e._v(" "),i("div",{staticClass:"color-dynamic"},[i("el-select",{attrs:{disabled:"update"==e.newTagType},model:{value:e.tag.groupIndex,callback:function(t){e.$set(e.tag,"groupIndex",t)},expression:"tag.groupIndex"}},e._l(e.groupList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:t}})})))],1)])])]),e._v(" "),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.newTagSubmit(t)}}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){return t.stopPropagation(),e.newTagClose(t)}}},[e._v("取消")])],1)])],1)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleCloseDialog}},[e._v("\n        取消\n      ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("\n        确定\n      ")])],1)])],1)},ut=[],ft={name:"SettingTag",components:{draggable:F.a},props:{field:{type:Object,required:!0}},data:function(){return{groupList:[],tagList:[],tagFieldList:[{name:"标签名称",field:"name"},{name:"颜色",field:"color"}],dialogVisible:!1,tableHeight:document.documentElement.clientHeight-600,newGroupType:"create",newGroupVisible:!1,group:{},groupActive:{},groupActiveIndex:0,dropdownHandleGroup:null,newTagType:"create",newTagVisible:!1,tag:{},colorList:["#0052CC","#00A3BF","#DE350B","#5243AA","#00875A","#FF991F","#091E42"]}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).defaultEdit},newTagTitle:function(){return"create"===this.newTagType?"新建标签":"编辑标签"},newGroupTitle:function(){return"create"===this.newGroupType?"新建分组":"编辑分组"}},watch:{field:{handler:function(){this.groupList=Object(pe["z"])(this.field.setting)||[],this.groupList.length>0?(this.groupActive=this.groupList[0],this.groupActiveIndex=0,this.tagList=this.groupList[0].labelList):(this.groupActive=[],this.groupActiveIndex=0,this.tagList=[])},deep:!0,immediate:!0}},mounted:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-600}},methods:{groupMenuSelect:function(e,t){this.groupActive=e,this.groupActiveIndex=t,this.refreshTagList()},dragEnd:function(){this.groupActive=this.groupList[this.groupActiveIndex],this.refreshTagList()},newGroupClose:function(){this.newGroupVisible=!1},newGroupBtn:function(){this.newGroupType="create",this.group={},this.newGroupVisible=!0},groupEditBtn:function(e){this.newGroupType="update",this.group={name:this.groupList[e].name},this.newGroupVisible=!0},groupDelect:function(e){this.groupList.splice(e,1)},newGroupSubmit:function(){if(this.group.name){if("update"==this.newGroupType)this.groupList[this.dropdownHandleGroup].name=this.group.name;else{var e={name:this.group.name,labelList:[]};0==this.groupList.length&&this.groupMenuSelect(e,0),this.groupList.push(e)}this.newGroupVisible=!1}else this.$message.error("分组名称不能为空")},groupDropdownClick:function(e){this.dropdownHandleGroup=e},groupHandleClick:function(e){"edit"==e?this.groupEditBtn(this.dropdownHandleGroup):"delete"==e&&this.groupDelect(this.dropdownHandleGroup)},refreshTagList:function(){this.getTagList()},getTagList:function(){this.tagList=this.groupActive.labelList||[]},tagHandleClick:function(e,t,i){"delete"===e?this.groupActive.labelList.splice(i,1):"editTag"===e&&(this.tag={name:t.name,color:t.color,index:i,groupIndex:this.groupActiveIndex},this.newTagType="update",this.newTagVisible=!0)},newTagClose:function(){this.newTagVisible=!1},newTagBtn:function(){this.tag={name:"",color:"#0052CC",groupIndex:this.groupActiveIndex},this.newTagType="create",this.newTagVisible=!0},selectColor:function(e){this.$set(this.tag,"color",e)},newTagSubmit:function(){if(this.tag.name)if(""!==this.tag.groupIndex){if("update"==this.newTagType)this.$set(this.groupActive.labelList,this.tag.index,{name:this.tag.name,color:this.tag.color});else{var e=this.groupList[this.tag.groupIndex];e.labelList.push({name:this.tag.name,color:this.tag.color})}this.newTagVisible=!1}else this.$message.error("所属分组不能为空");else this.$message.error("标签名称不能为空")},handleToSet:function(){this.dialogVisible=!0},handleCloseDialog:function(){var e=this;this.$set(this.field,"_remark",""),this.$nextTick((function(){delete e.field._remark})),this.dialogVisible=!1},handleDialogConfirm:function(){this.$set(this.field,"setting",this.groupList);var e=JSON.stringify(this.groupList);this.$set(this.field,"options",e),this.handleCloseDialog()}}},pt=ft,ht=(i("159c"),Object(V["a"])(pt,dt,ut,!1,null,"106db6f3",null)),mt=ht.exports,vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting-attention"},[i("el-checkbox",{attrs:{disabled:!e.editAuth},on:{change:e.handleChange},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[e._v("启用关注度自动变更规则")]),e._v(" "),i("div",{staticClass:"rule"},[e._v("\n    超过\n    "),i("el-input",{directives:[{name:"WkNumber",rawName:"v-WkNumber",value:"positiveInt",expression:"'positiveInt'"}],attrs:{disabled:!e.isOpen||!e.editAuth},on:{blur:e.handleChange},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}}),e._v("天未跟进/未更新，\n    自动减少\n    "),i("el-select",{attrs:{disabled:!e.isOpen||!e.editAuth},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))),e._v("\n    星，依次类推，降到0为止\n  ")],1)],1)},bt=[],gt={name:"SettingAttention",props:{field:{type:Object,required:!0}},data:function(){return{options:[{label:"一",value:1},{label:"二",value:2},{label:"三",value:3},{label:"四",value:4},{label:"五",value:5}],isOpen:!1,num:1,value:""}},computed:{editAuth:function(){return Object(j["b"])(this.field.operating).defaultEdit}},watch:{field:{handler:function(){this.field.setting&&this.field.setting.length>0?(this.isOpen=!0,this.num=this.field.setting[0].num,this.value=this.field.setting[0].value):(this.isOpen=!1,this.num="",this.value="")},deep:!0,immediate:!0}},methods:{handleChange:function(){if(this.isOpen){(!this.num||this.num<=0)&&(this.num=1);var e=[{num:this.num,value:this.value}];this.$set(this.field,"setting",e),this.$set(this.field,"options",JSON.stringify(e))}else this.$set(this.field,"setting",[]),this.$set(this.field,"options",JSON.stringify([]))}}},yt=gt,_t=(i("1a67"),Object(V["a"])(yt,vt,bt,!1,null,"828b13a4",null)),xt=_t.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"setting-logic-form"},[n("el-button",{staticClass:"add-btn",on:{click:e.handleToSet}},[e._v("\n    点击配置\n  ")]),e._v(" "),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"edit-dialog",attrs:{visible:e.dialogVisible,"before-close":e.handleCloseDialog,"close-on-click-modal":!1,"append-to-body":"",title:"配置关系类型",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("div",{staticClass:"content-body"},[n("div",{staticClass:"product-setting-con"},[n("div",{staticClass:"tips"},[e._v("在客户关系网中，包含上下游和上下级关系。")]),e._v(" "),n("div",[n("el-button",{staticStyle:{"padding-left":"0"},attrs:{type:"primary-text"},nativeOn:{click:function(t){e.handleTreeSetDrop({type:"create-one"})}}},[e._v("+ 添加关系")])],1),e._v(" "),n("div",{staticClass:"tree-box"},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;t.data;return n("flexbox",{staticClass:"node-data"},[a.expanded?n("img",{staticClass:"node-img",attrs:{src:i("0ac7")}}):e._e(),e._v(" "),a.expanded?e._e():n("img",{staticClass:"node-img",attrs:{src:i("cd76")}}),e._v(" "),n("div",{staticClass:"node-label"},[e._v(e._s(a.label))]),e._v(" "),n("el-dropdown",{attrs:{trigger:"click",placement:"right-start"},on:{command:e.handleTreeSetDrop}},[n("div",{staticClass:"node-label-set",on:{click:function(t){t.stopPropagation(),e.getChild(a)}}},[e._v("设置")]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.treeSetTypes,(function(t,i){return n("el-dropdown-item",{key:i,attrs:{command:t}},[e._v(e._s(t.name))])})))],1)],1)}}])})],1)])])]),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCloseDialog}},[e._v("\n        取消\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("\n        确定\n      ")])],1)]),e._v(" "),n("el-dialog",{attrs:{visible:e.relationTypeDialog,"close-on-click-modal":!1,title:e.relationTitle,width:"400px"},on:{"update:visible":function(t){e.relationTypeDialog=t}}},[n("el-form",{attrs:{model:e.relationForm}},["edit"!=e.handleType?n("el-form-item",{staticClass:"wk-form-item",attrs:{label:"关系类型","label-width":"80"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"create-child"==e.handleType},model:{value:e.relationForm.type,callback:function(t){e.$set(e.relationForm,"type",t)},expression:"relationForm.type"}},e._l(e.typeOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"wk-form-item",attrs:{label:"关系名称","label-width":"80"}},[n("el-input",{attrs:{maxlength:20,autocomplete:"off"},model:{value:e.relationForm.name,callback:function(t){e.$set(e.relationForm,"name",t)},expression:"relationForm.name"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleRelation}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:function(t){e.relationTypeDialog=!1}}},[e._v("取消")])],1)],1)],1)},kt=[],Tt={name:"SettingRelationType",props:{},data:function(){return{list:[],loading:!1,dialogVisible:!1,relationTypeDialog:!1,treeData:[],treeSetTypes:[],defaultProps:{children:"children",label:"name"},relationTitle:"",handleType:"",relationForm:{type:"",name:"",id:""},typeOptions:[]}},computed:{},watch:{},mounted:function(){},methods:{handleToSet:function(){this.getCustomerRelationsList(),this.dialogVisible=!0},handleCloseDialog:function(){this.dialogVisible=!1},handleDialogConfirm:function(){this.dialogVisible=!1},getChild:function(e){var t=[];t=1==e.level?[{type:"create-child",name:"新建关系类型"},{type:"edit",name:"编辑关系类型"}]:[{type:"edit",name:"编辑关系类型"},{type:"delete",name:"删除关系类型"}],this.treeSetTypes=t.map((function(t,i,n){return t["node"]=e,t}))},handleTreeSetDrop:function(e){var t,i=this;"create-one"==e.type&&(this.relationTitle="新建关系类型",this.handleType="create-one",this.relationForm.type=null===(t=this.typeOptions[0])||void 0===t?void 0:t.value,this.relationForm.name="",this.relationTypeDialog=!0);"create-child"==e.type?(this.relationTitle="新建关系类型",this.handleType="create-child",this.relationForm.id=e.node.data.id,this.relationForm.type=e.node.data.id,this.relationForm.name="",this.relationTypeDialog=!0):"edit"==e.type?(this.relationTitle="编辑关系类型",this.handleType="edit",this.relationForm.id=e.node.data.id,this.relationForm.type=e.node.data.parentId,this.relationForm.name=e.node.data.name,this.relationTypeDialog=!0):"delete"==e.type&&this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.loading=!0,Object(o["a"])({id:e.node.data.id}).then((function(e){i.getCustomerRelationsList(),i.$message.success("删除成功"),i.loading=!1})).catch((function(){i.loading=!1}))})).catch((function(){}))},handleRelation:function(){var e=this;0!=this.relationForm.name.length?(this.relationTypeDialog=!1,"create-one"==this.handleType||"create-child"==this.handleType?(this.loading=!0,Object(o["c"])({parentId:this.relationForm.type,name:this.relationForm.name}).then((function(t){e.getCustomerRelationsList(),e.$message.success("新建成功"),e.loading=!1})).catch((function(){e.loading=!1}))):"edit"==this.handleType&&(this.loading=!0,Object(o["d"])({id:this.relationForm.id,name:this.relationForm.name}).then((function(t){e.getCustomerRelationsList(),e.$message.success("编辑成功"),e.loading=!1})).catch((function(){e.loading=!1})))):this.$message({message:"请填写名称",type:"warning"})},getCustomerRelationsList:function(){var e=this;Object(o["b"])().then((function(t){var i;e.treeData=t.data,e.typeOptions=(null===(i=t.data)||void 0===i?void 0:i.map((function(e){return{label:e.name,value:e.id}})))||[]})).catch((function(){}))}}},At=Tt,wt=(i("28f2"),Object(V["a"])(At,Ct,kt,!1,null,"54706574",null)),Ft=wt.exports,Ot={name:"FieldSetting",components:{SettingDefault:be,SettingOptions:Te,SettingNumber:Ee,SettingPrecisions:$e,SettingDescText:We,SettingDetailTable:Qe,SettingLogicForm:nt,SettingSerialNumber:ct,SettingTag:mt,SettingAttention:xt,SettingRelationType:Ft},props:{canTransform:Boolean,transformData:Object,field:{type:Object,required:!0},fieldArr:{type:Array,required:!0},point:{type:Array,required:!0},showLogic:{type:Boolean,default:!0}},data:function(){return{widthOptions:[{value:25},{value:50},{value:75},{value:100}],stylePercentValue:[]}},computed:{typeObj:function(){var e=this,t=Je.find((function(t){return t.formType===e.field.formType}));return t||this.field},fieldAuth:function(){return Object(j["b"])(this.field.operating)},canDefault:function(){return!["user","structure","file","location","handwriting_sign","detail_table","serial_number","field_tag","field_group","pic"].includes(this.field.formType)},canOptions:function(){return["select","checkbox"].includes(this.field.formType)},canNumber:function(){return["number","floatnumber","percent"].includes(this.field.formType)},canPrecisions:function(){return["date_interval","position","select","checkbox"].includes(this.field.formType)},precisionsTitle:function(){if(!this.canPrecisions)return"";switch(this.field.formType){case"date_interval":return"日期类型";case"position":return"地址精度";case"select":return"展示方式";case"checkbox":return"展示方式";default:return"精度"}},isDescText:function(){return"desc_text"===this.field.formType},isSerialNumber:function(){return"serial_number"===this.field.formType},isTag:function(){return"field_tag"===this.field.formType},isAttention:function(){return"field_attention"===this.field.formType},isTableChild:function(){var e=this.fieldArr[this.point[0]][this.point[1]];return"detail_table"===e.formType},titleHelpObj:function(){var e={boolean_value:"246",detail_table:"250",field_group:"255"}[this.field.formType];return e?{type:"27",id:e}:null},canBusinessRelationship:function(){return"customer_relations"===this.field.formType},isPic:function(){return"pic"===this.field.formType}},watch:{field:{handler:function(){this.stylePercentValue=[Number(this.field.stylePercent)||100]},deep:!0,immediate:!0}},methods:{emitUpdateWidth:function(){this.$emit("update-width")},emitChildEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$emit("child-edit",e)},clickOutSide:function(){this.emitChildEdit()},handleSelectNum:function(){var e=this.field,t=e.maxNumRestrict,i=e.minNumRestrict;t&&i&&t<i&&(this.field.minNumRestrict=this.field.maxNumRestrict)}}},jt=Ot,Et=(i("436e"),Object(V["a"])(jt,re,ce,!1,null,"228d9c48",null)),Nt=Et.exports,Vt=i("d4ec"),It=i("bee2"),Lt=function(){function e(t){Object(Vt["a"])(this,e),this.fieldType=0,this.fieldId=t.fieldId||"",this.name=t.name||"",this.formType=t.formType||"",this.isUnique=t.isUnique||0,this.isNull=t.isNull||0,this.isHidden=t.isHidden||0,this.inputTips=t.inputTips||"","textarea"===this.formType&&(this.maxLength=t.maxLength||800),["user","structure"].includes(this.formType)&&(this.isMulti=t.isMulti||1),"checkbox"===this.formType?this.defaultValue=t.defaultValue||[]:this.defaultValue=t.defaultValue||"","pic"===this.formType?this.maxNumRestrict=t.maxNumRestrict||1:this.maxNumRestrict=null,"form"===this.formType&&(this.formValue=t.formValue||[]),this.setting=t.setting||[],this.isDeleted=0}return Object(It["a"])(e,[{key:"check",value:function(){return""===this.name?"字段名称不能为空":""}}]),e}(),St=i("8ed6"),$t={title:"",showSave:!0,showBack:!0},Dt={name:"FieldsIndex",components:{FieldInput:h["default"],FieldTextarea:m["default"],FieldSelect:v["default"],FieldCheckbox:b["default"],FieldFile:g["default"],FieldBoolean:y["default"],FieldPercent:_["default"],FieldPosition:x["default"],FieldLocation:C["default"],FieldDetailTable:L,FieldWritingSign:S["default"],FieldDateInterval:$["default"],FieldDescText:D["default"],FieldSerialNumber:B,FieldTag:z,FieldAttention:te,FieldGroup:oe,SettingField:Nt,draggable:F.a},filters:{typeToComponentName:function(e){return Object(j["c"])(e)}},props:{props:Object,fieldLibFun:Function,getListPromise:Function,savePromise:Function},data:function(){return{moduleType:"",loading:!1,fieldLibList:[],dragLeftConfig:{group:{pull:"clone",put:!1,name:"libList"},forceFallback:!0,sort:!1},movedField:null,dragListConfig:{delay:100,group:{name:"list",put:["libList"],pull:!0},forceFallback:!0,fallbackClass:"draggingStyle"},fieldArr:[],rejectHandle:!0,isChildDragAdd:!1,selectedPoint:[null,null],selectedField:null,transformData:null}},computed:{canTransform:function(){var e=this.selectedPoint[0],t=this.selectedPoint[1];if(!Object(p["c"])(e)&&!Object(p["c"])(t)){var i=this.fieldArr[e][t];if("detail_table"===i.formType)return!1}return"crm_leads"===this.moduleType},title:function(){return this.config.title?this.config.title:{crm_leads:"线索",crm_customer:"客户",crm_contacts:"联系人",crm_business:"商机",crm_contract:"合同",crm_product:"产品",crm_receivables:"回款",crm_visit:"客户回访",crm_marketing:"市场活动",crm_receivables_plan:"回款计划",crm_invoice:"发票",crm_activity_log:"跟进记录",crm_out_work:"外勤签到"}[this.moduleType]||""},config:function(){return Object(St["a"])(Object(s["a"])({},$t),this.props||{})}},created:function(){this.moduleType=this.$route.params.type||"",this.initCom(),this.canTransform&&this.getTransformField()},methods:{initCom:function(){this.fieldLibFun?this.fieldLibList=this.fieldLibFun(Je):"crm_marketing"===this.moduleType?this.fieldLibList=Je.filter((function(e){return["text","textarea","website","boolean_value","select","checkbox","number","floatnumber","percent","mobile","email","date","datetime","date_interval","field_tag"].includes(e.formType)})):this.moduleType.startsWith("jxc_")?this.fieldLibList=Je:"hrm_employee"===this.moduleType?this.fieldLibList=Je.filter((function(e){return!["rich_text_format"].includes(e.formType)})):this.fieldLibList=Je,this.getFieldList()},getFieldList:function(){var e=this;if(this.getListPromise)this.loading=!0,this.getListPromise().then((function(t){var i=t.data||[];e.handleFieldList(i),e.rejectHandle=!1,e.loading=!1})).catch((function(){e.loading=!1}));else{var t=null,i={},n=this.$route.params;if("hrm_employee"===this.moduleType)return void this.getFieldListReq(r["n"],n.id);"crm_marketing"===this.moduleType?(t=o["i"],i.id=n.id):"oa_examine"===this.moduleType?(t=o["m"],i.categoryId=n.id,i.needHidden=!0):t=this.moduleType.startsWith("jxc_")?d:o["l"],n.label&&(i.label=n.label),this.getFieldListReq(t,i)}},getFieldListReq:function(e,t){var i=this;this.loading=!0,e(t).then((function(e){var t=e.data||[];i.handleFieldList(t),i.rejectHandle=!1,i.loading=!1})).catch((function(){i.loading=!1}))},handleFieldList:function(e){var t=this;e.forEach((function(e){e.forEach((function(e){e.formAssistId||(e.formAssistId=e.fieldId),"crm_marketing"===t.moduleType&&(e.operating=Object(j["a"])(251,9))}))})),this.fieldArr=e,e.length>0&&this.handleSelect([0,0])},generateFormAssistId:function(){return Date.now().toString()+Math.random().toFixed(6).slice(-6)},handleLibFieldClick:function(e){this.movedField=e,this.dragLeftEnd()},dragLeftStart:function(){this.isChildDragAdd=!1},dragLeftMove:function(e){this.movedField=e},dragLeftEnd:function(e){var t=this;if(!this.rejectHandle){var i=[],n=!0;if(this.fieldArr.forEach((function(e){e.forEach((function(e){i.push(e.formAssistId),"field_tag"===e.formType&&"field_tag"===t.movedField.formType&&(n=!1)}))})),n){var a=new Lt({name:this.movedField.name,formType:this.movedField.formType});switch(a.stylePercent=100,a.operating=this.getFieldOperating(255),a.formAssistId=this.generateFormAssistId(),"none"!==this.$route.params.label&&(a.label=this.$route.params.label),this.movedField.formType){case"desc_text":a.name="";break;case"select":case"checkbox":a.options="选1,选2,选3",a.setting=["选1","选2","选3"];break;case"detail_table":a.operating=this.getFieldOperating(232),a.fieldExtendList=[],a.defaultValue=null,a.remark="添加".concat(a.name);break;case"serial_number":a.operating=this.getFieldOperating(245),a.isUnique=1,a.setting=[{type:1,resetType:4,startNumber:void 0,stepNumber:void 0}];break;case"field_tag":a.operating=this.getFieldOperating(249);break;case"field_attention":a.operating=this.getFieldOperating(250),a.defaultValue=null;break;case"field_group":a.operating=this.getFieldOperating(224);break;case"rich_text_format":a.operating=this.getFieldOperating(239);break;case"handwriting_sign":case"file":case"pic":a.operating=this.getFieldOperating(251);break}if(delete a.fieldId,this.isChildDragAdd)return["detail_table","desc_text","handwriting_sign","pic","serial_number","field_tag","field_attention","field_group","rich_text_format"].includes(a.formType)?void this.$message.error("此字段内部不能添加该类型的字段"):void this.childDragAddEnd(a,e);var l=null;l=e&&"clone"===e.pullMode&&!Object(p["c"])(e.newIndex)?e.newIndex:0===this.fieldArr.length?0:this.selectedPoint[0]+1,this.fieldArr.splice(l,0,[a]),this.handleSelect([l,0])}else this.$message.error("只允许添加一个自定义标签字段")}},handleChildDragAdd:function(e,t){this.selectedPoint=e,this.isChildDragAdd=!0},childDragAddEnd:function(e,t){e.stylePercent=50,e.operating=Object(j["a"])(171,9);var i=this.fieldLibList.find((function(t){return e.formType===t.formType}));i&&(e.type=i.type);var n=this.selectedPoint[0],a=this.selectedPoint[1],l=this.fieldArr[n][a];Object(p["c"])(l.fieldExtendList)&&(l.fieldExtendList=[]),l.fieldExtendList.length>=20?this.$message.error("明细表格类型内部字段不能超过20个"):(e.fieldName=this.generateFieldName(l.fieldExtendList),l.fieldExtendList.push(e),this.$set(this.fieldArr,n,this.fieldArr[n]),this.handleSelect(this.selectedPoint,e),this.isChildDragAdd=!1)},dragListEnd:function(e){this.selectedPoint.splice(0,1,e.newIndex)},handleAction:function(e,t){switch(e){case"top":this.handleActionMoveTop(t);break;case"bottom":this.handleActionMoveBottom(t);break;case"left":this.handleActionExchange(t,-1);break;case"right":this.handleActionExchange(t,1);break;case"copy":this.handleActionCopy(t);break;case"delete":this.handleDelete(t)}},handleActionMoveTop:function(e){var t=this.fieldArr[e[0]-1];if(t&&4!==t.length){var i=this.fieldArr[e[0]][e[1]],n=t[0];if("detail_table"===i.formType||"detail_table"===n.formType||"field_group"===i.formType||"field_group"===n.formType||"rich_text_format"===i.formType||"rich_text_format"===n.formType){var a=[this.fieldArr[e[0]],this.fieldArr[e[0]-1]];this.fieldArr[e[0]-1]=a[0],this.fieldArr[e[0]]=a[1],this.handleSelect([e[0]-1,0])}else{t.push(Object(pe["z"])(i));var l=this.getWidth(t.length);t.forEach((function(e){e.stylePercent=l.stylePercent})),this.$set(this.fieldArr,e[0]-1,t);var s=this.fieldArr[e[0]];s.splice(e[1],1),0===s.length?this.fieldArr.splice(e[0],1):(l=this.getWidth(s.length),s.forEach((function(e){e.stylePercent=l.stylePercent})),this.$set(this.fieldArr,e[0],s)),this.handleSelect([e[0]-1,t.length-1])}}},handleActionMoveBottom:function(e){var t=this.fieldArr[e[0]][e[1]],i=this.fieldArr[e[0]+1][0],n=this.fieldArr[e[0]];if("detail_table"===t.formType||"detail_table"===i.formType||"field_group"===t.formType||"field_group"===i.formType||1===n.length){var a=[this.fieldArr[e[0]],this.fieldArr[e[0]+1]];this.fieldArr[e[0]+1]=a[0],this.fieldArr[e[0]]=a[1],this.handleSelect([e[0]+1,0])}else{t.stylePercent=100,this.fieldArr.splice(e[0]+1,0,[t]),this.fieldArr[e[0]].splice(e[1],1);var l=this.getWidth(n.length);n.forEach((function(e){e.stylePercent=l.stylePercent})),this.$set(this.fieldArr,e[0],n),this.handleSelect([e[0]+1,0])}},handleActionExchange:function(e,t){var i=this.fieldArr[e[0]],n=this.fieldArr[e[0]][e[1]];i.splice(e[1],1),i.splice(e[1]+t,0,n),this.handleSelect([e[0],e[1]+t])},handleActionCopy:function(e){var t=this.fieldArr[e[0]][e[1]],i=Object(pe["z"])(t);if(delete i.fieldId,delete i.fieldName,delete i.relevant,i.fieldType=0,i.operating="crm_marketing"===this.moduleType?Object(j["a"])(253,9):Object(j["a"])(255,9),"pic"===i.formType&&(i.operating=Object(j["a"])(235,9)),"desc_text"===i.formType&&(i.name=""),"serial_number"===i.formType&&(i.operating=Object(j["a"])(245,9)),"field_tag"==i.formType){var n=!0;if(this.fieldArr.forEach((function(e){e.forEach((function(e){e.formType==i.formType&&(n=!1)}))})),!n)return void this.$message.error("只允许添加一个自定义标签字段")}"field_tag"===i.formType&&(i.operating=Object(j["a"])(249,9)),"field_attention"===i.formType&&(i.operating=Object(j["a"])(250,9),i.defaultValue=null),"field_group"===i.formType&&(i.operating=Object(j["a"])(224,9)),i.formAssistId=this.generateFormAssistId(),this.fieldArr.splice(e[0]+1,0,[i]),this.handleSelect([e[0]+1,e[1]])},getFieldOperating:function(e){if("crm_marketing"===this.moduleType){var t=e.toString(2).padStart(9,"0"),i=t.split("");return i.splice(6,1,"0"),Object(j["a"])(parseInt(i.join(""),2),9)}return Object(j["a"])(e,9)},handleUpdateFieldWidth:function(){for(var e=this.fieldArr[this.selectedPoint[0]],t=[],i=[],n=0,a=0;a<e.length;a++){var l=e[a];n+=l.stylePercent,n<100?i.push(l):n>100?(t.push(Object(pe["z"])(i)),i=[],i.push(l),n=l.stylePercent):(i.push(l),t.push(Object(pe["z"])(i)),i=[],n=0)}if(i.length>0&&t.push(i),t.length>1){var s,o=this.selectedPoint[0],r=this.selectedPoint[1];(s=this.fieldArr).splice.apply(s,[o,1].concat(t));for(var c=0,d=0;d<t.length;d++)if(c+=t[d].length,c>=r+1){o+=d,r=r-c+t[d].length;break}this.handleSelect([o,r])}},getWidth:function(e){return 1===e?{stylePercent:100}:2===e?{stylePercent:50}:e>2?{stylePercent:25}:void 0},handleDelete:function(e){var t=this;this.$confirm("确定删除该自定义字段吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.selectedPoint=[null,null],t.selectedField=null,t.fieldArr[e[0]].splice([e[1]],1),0===t.fieldArr[e[0]].length&&t.fieldArr.splice(e[0],1)})).catch((function(){}))},handleSelect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.selectedPoint=e,this.selectedField=t||this.fieldArr[e[0]][e[1]]},handleChildEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.selectedField=e:this.handleSelect(this.selectedPoint)},generateFieldName:function(e){var t=e.map((function(e){return e.fieldName})),i=function e(i){for(var n="abcdefghijklmnopqrstuvwxyz",a="",l=0;l<i;l++){var s=Math.ceil(25*Math.random());a+=n[s]}var o="field_"+a;return t.includes(o)?e(i):o};return i(6)},handleSave:function(){var e=this;return new Promise((function(t,i){if(e.rejectHandle)i();else{var n=[];e.loading=!0,Object(pe["z"])(e.fieldArr).forEach((function(e,t){e.forEach((function(e,i){n.push(Object(s["a"])(Object(s["a"])({},e),{},{formPosition:"".concat(t,",").concat(i)}))}))}));for(var a="select|update|union|and|or|delete|insert|trancate|char|substr|ascii|declare|exec|count|master|into|drop|execute".split("|"),c=[],d=function(){var t=n[f],l=t.formPosition.split(","),s="第".concat(Number(l[0])+1,"行第").concat(Number(l[1])+1,"列");if(t.name=(t.name||"").trim(),"desc_text"!==t.formType){if(!t.name)return e.$message.error(s+"自定义字段，标识名不能为空"),e.loading=!1,i(),{v:void 0};if(a.includes(t.name))return e.$message.error(s+"“".concat(t.name,"”字段，标识名与系统字段重复，请使用其他字段！")),e.loading=!1,i(),{v:void 0};if(c.includes(t.name))return e.$message.error(s+"“".concat(t.name,"”字段，标识名重复")),e.loading=!1,i(),{v:void 0};if(1===t.isNull&&1===t.isHidden)return e.$message.error(s+"“".concat(t.name,"”字段，不能同时设置必填和隐藏")),e.loading=!1,i(),{v:void 0};if("serial_number"===t.formType&&!e.validateSerialNumberField(t))return e.$message.error(s+"“".concat(t.name,"”字段，自定义编号规则有误")),e.loading=!1,i(),{v:void 0};if("field_tag"===t.formType&&(!t.setting||!t.setting.length))return e.$message.error(s+"“".concat(t.name,"”字段，自定义标签未配置标签项")),e.loading=!1,i(),{v:void 0};if("detail_table"===t.formType){if(Object(p["c"])(t.fieldExtendList))return e.$message.error(s+"“".concat(t.name,"”字段，不能为空")),e.loading=!1,i(),{v:void 0};for(var o=0;o<t.fieldExtendList.length;o++){var r=t.fieldExtendList[o];if(delete r.companyId,delete r.id,Object(p["c"])(r.defaultValue)&&(r.defaultValue=null),r.name=(r.name||"").trim(),!r.name)return e.$message.error(s+"“".concat(r.name,"”字段，标识名不能为空")),e.loading=!1,i(),{v:void 0};if(a.includes(r.name))return e.$message.error(s+"“".concat(r.name,"”字段，标识名与系统字段重复，请使用其他字段！")),e.loading=!1,i(),{v:void 0}}var d=t.fieldExtendList.map((function(e){return e.name}));if(d.length!==Array.from(new Set(d)).length)return e.$message.error(s+"“".concat(t.name,"”字段，标识名重复")),e.loading=!1,i(),{v:void 0}}else if("pic"===t.formType&&!t.maxNumRestrict)return e.$message.error(s+"“".concat(t.name,"”字段，图片最大上传数量不能为空")),e.loading=!1,i(),{v:void 0};c.push(t.name)}else if(!Object(p["c"])(t.defaultValue)&&t.defaultValue.length>2e3)return e.$message.error(s+"“".concat(t.name,"”字段，描述文字类型字段最多设置2000字")),e.loading=!1,i(),{v:void 0};if(!t.type){var u=e.fieldLibList.find((function(e){return e.formType===t.formType}));u&&(t.type=u.type)}t.hasOwnProperty("optionsData")&&delete t.optionsData},f=0;f<n.length;f++){var h=d();if("object"===Object(l["a"])(h))return h.v}if(e.savePromise)e.savePromise(n).then((function(i){e.loading=!1,t()})).catch((function(){e.loading=!1,i()}));else{var m={data:n},v=e.$route.params;"none"!==v.label&&(m.label=v.label),"oa_examine"===e.moduleType?m.categoryId=v.id:"crm_marketing"===e.moduleType?m.formId=v.id:"hrm_employee"===e.moduleType&&(m.labelGroup=v.id);var b={crm_marketing:o["h"],oa_examine:o["n"],hrm_employee:r["r"]}[e.moduleType]||o["k"];e.moduleType.startsWith("jxc_")&&(b=u),b(m).then((function(){e.$message({type:"success",message:"操作成功"}),e.loading=!1,e.getFieldList(),t()})).catch((function(){e.loading=!1,i()}))}}}))},validateSerialNumberField:function(e){if(!e.setting||!e.setting.length)return!1;for(var t=0;t<e.setting.length;t++){var i=e.setting[t];if(1===i.type){if(!i.startNumber&&0!==i.startNumber)return!1;if(!i.stepNumber)return!1}else if(!i.value)return!1}return!0},getTransformField:function(){var e=this;Object(f["f"])({type:1}).then((function(t){for(var i={text:[],textarea:[],select:[],checkbox:[],number:[],floatnumber:[],mobile:[],email:[],date:[],datetime:[],user:[],structure:[],boolean_value:[],percent:[],position:[],location:[],handwriting_sign:[],date_interval:[],website:[],field_tag:[],field_attention:[]},n=0;n<t.data.length;n++){var a=t.data[n],l=i[a.formType];l&&l.push({label:a.name,value:a.fieldId})}e.transformData=i})).catch((function(){}))},handleCancel:function(){this.$router.go(-1)}}},Rt=Dt,Pt=(i("a363"),Object(V["a"])(Rt,n,a,!1,null,"ad1b2de2",null));t["default"]=Pt.exports},e952:function(e,t,i){},edbc:function(e,t,i){},f14d:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-percent",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[i("div",{staticClass:"box"},[i("span",{staticClass:"default-val"},[e._v(e._s(e.field.defaultValue||""))]),e._v(" "),i("span",{staticClass:"rate"},[e._v("%")])])])},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldPercent",components:{FieldWrapper:l["a"]},mixins:[s["a"]],methods:{}},r=o,c=(i("060b"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"f5bf08aa",null);t["default"]=d.exports},f1c9:function(e,t,i){},f2ea:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("field-wrapper",{staticClass:"field-select",attrs:{activate:e.activate,field:e.field,"control-flag":e.controlFlag},on:{click:e.emitClick,action:e.handleAction}},[1===e.field.precisions?i("el-radio-group",{model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,"defaultValue",t)},expression:"field.defaultValue"}},e._l(e.field.setting,(function(t,n){return i("el-radio",{key:n,attrs:{label:e.itemIsObject(t)?t.label||t.name:t}},[e._v("\n      "+e._s(e.itemIsObject(t)?t.label||t.name:t)+"\n    ")])}))):i("flexbox",{staticClass:"select-box"},[i("div",{class:{placeholder:!Boolean(e.field.defaultValue)}},[e._v("\n      "+e._s(e.field.defaultValue?e.field.defaultValue:"请选择")+"\n    ")]),e._v(" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1)},a=[],l=i("f44c"),s=i("a46a"),o={name:"FieldSelect",components:{FieldWrapper:l["a"]},mixins:[s["a"]],watch:{field:{handler:function(){this.field.precisions||this.$set(this.field,"precisions",2)},deep:!0,immediate:!0}}},r=o,c=(i("35f0"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"fab410d0",null);t["default"]=d.exports},f44c:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"field-item",class:{activate:e.activate},style:{width:e.fieldWidth},on:{click:function(t){return t.stopPropagation(),e.emitClick(t)}}},[e.hiddenTitle?e._e():i("div",{staticClass:"field-item_title"},[e.showRequired?i("span",{staticClass:"required"},[e._v(e._s(e.field.isNull?"*":""))]):e._e(),e._v(" "),i("span",[e._v(e._s(e.field.name))]),e._v(" "),e.field.inputTips?i("span",{staticClass:"input-tips"},[e._v("\n      （"+e._s(e.field.inputTips)+"）\n    ")]):e._e()]),e._v(" "),i("div",{staticClass:"field-item_body"},[e._t("default")],2),e._v(" "),e.activate?[e.controlFlag.top?i("div",{staticClass:"control-top control-btn",on:{click:function(t){t.stopPropagation(),e.handleControl("top",t)}}},[i("i",{staticClass:"wk wk-icon-top"})]):e._e(),e._v(" "),e.controlFlag.bottom?i("div",{staticClass:"control-bottom control-btn",on:{click:function(t){t.stopPropagation(),e.handleControl("bottom",t)}}},[i("i",{staticClass:"wk wk-icon-top bottom"})]):e._e(),e._v(" "),e.controlFlag.left?i("div",{staticClass:"control-left control-btn",on:{click:function(t){t.stopPropagation(),e.handleControl("left",t)}}},[i("i",{staticClass:"wk wk-transfer"})]):e._e(),e._v(" "),e.controlFlag.right?i("div",{staticClass:"control-right control-btn",on:{click:function(t){t.stopPropagation(),e.handleControl("right",t)}}},[i("i",{staticClass:"wk wk-transfer"})]):e._e(),e._v(" "),i("div",{staticClass:"edit-box"},[e.controlFlag.copy?i("div",{staticClass:"control-copy control-btn",on:{click:function(t){t.stopPropagation(),e.handleControl("copy",t)}}},[i("el-tooltip",{attrs:{effect:"dark",content:"复制",placement:"bottom"}},[i("i",{staticClass:"wk wk-associated"})])],1):e._e(),e._v(" "),e.controlFlag.delete?i("div",{staticClass:"control-delete control-btn",on:{click:function(t){t.stopPropagation(),e.handleControl("delete",t)}}},[i("i",{staticClass:"wk wk-s-delete"})]):e._e()])]:e._e()],2)},a=[],l={name:"FieldWrapper",props:{field:{type:Object,required:!0},activate:{type:Boolean,default:!1},controlFlag:{type:Object,default:function(){return{top:!1,bottom:!1,left:!1,right:!1,delete:!1,copy:!0}}},hiddenTitle:{type:Boolean,default:!1}},computed:{fieldWidth:function(){return this.field?this.field.stylePercent+"%":"100%"},showRequired:function(){return"serial_number"!==this.field.formType}},watch:{field:{handler:function(){this.field&&!this.field.stylePercent&&(this.field.stylePercent=100)},deep:!0,immediate:!0}},methods:{emitClick:function(e){this.$emit("click",e)},handleControl:function(e,t){this.$emit("action",e,t)}}},s=l,o=(i("5849"),i("2877")),r=Object(o["a"])(s,n,a,!1,null,"0cca0c3d",null);t["a"]=r.exports},f45d:function(e,t,i){"use strict";i("e952")},febb:function(e,t,i){"use strict";i("98c8")}}]);