(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1838040e"],{"63b4":function(e,t,a){},"64d2":function(e,t,a){"use strict";a("d299")},bdcd:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-archives"},[a("xr-header",{attrs:{"ft-top":"0",label:"我的档案"}}),e._v(" "),a("el-tabs",{staticClass:"side-detail__tabs--default",model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},e._l(e.tabNames,(function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e.label,name:e.name,lazy:""}},[a(e.name,{tag:"component",staticClass:"side-detail-tabs-content"})],1)})))],1)},o=[],l=a("f468"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("wk-custom-base-detail",{attrs:{list:e.postList},scopedSlots:e._u([{key:"data",fn:function(t){var a=t.data;return[e._v(e._s(a.value))]}}])}),e._v(" "),e.leaveList.length>0?a("wk-base-detail",{attrs:{list:e.leaveList}}):e._e()],1)},n=[],d=(a("d3b7"),a("159b"),a("14d9"),a("caad"),a("2532"),a("b0c0"),a("b775"));function u(){return Object(d["a"])({url:"hrmEmployeeArchives/personalArchives",method:"post"})}function c(){return Object(d["a"])({url:"hrmEmployeeArchives/postArchives",method:"post"})}var r=a("8f7f"),f=a("d165"),m=a("24f4"),p=a("ed08"),v=a("6bfe"),h=a("8b13"),b=a("2046"),y={name:"EmployeePostInfo",components:{WkBaseDetail:r["a"],WkCustomBaseDetail:f["a"]},mixins:[b["a"]],props:{},data:function(){return{loading:!1,leaveDetail:null,postEditList:[],postList:[],leaveFields:[{label:"计划离职日期",field:"planQuitTime",value:""},{label:"申请离职日期",field:"applyQuitTime",value:""},{label:"薪资结算日期",field:"salarySettlementTime",value:""},{label:"离职类型",field:"quitType",value:""},{label:"离职原因",field:"quitReason",value:""},{label:"备注",field:"remarks",value:""}],leaveList:[]}},computed:{},watch:{},mounted:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.loading=!0,c().then((function(t){e.loading=!1;var a=t.data.information||[];e.postEditList=Object(p["z"])(a);var i=[];a.forEach((function(e){e.value=e.fieldValue,"employment_forms"==e.fieldName?e.value=h["d"].employmentFormsValue[e.value]:"probation"==e.fieldName?e.value=h["d"].probationValue[e.value]:"status"==e.fieldName?e.value=h["d"].statusValue[e.value]:("user"==e.formType||"structure"==e.formType||"recruit_channel"==e.formType||"area"==e.formType||"company_age"==e.fieldName)&&(e.value=e.fieldValueDesc),i.push(e)}));var o=e.getFormAssistIds([i]),l=[];i.forEach((function(t){if(e.getFormItemDefaultProperty(t,!1),t.show=!o.includes(t.formAssistId),"detail_table"===t.formType){if(!Object(v["c"])(t.value)){var a=t.value;Object(v["a"])(a)&&a.forEach((function(e){e&&e.forEach((function(e){e&&(e.value=e.fieldValue)}))})),t.value=e.getItemValue(t,null,"update")}Object(v["a"])(t.value)||(t.value=[])}t.show&&l.push(t)})),e.postList=[{name:"岗位信息",list:l}];var s=t.data.employeeQuitInfo;if(e.leaveDetail=s,s){var n=[];m["a"].getFields(s).forEach((function(e){var t={label:e.name};"quitType"==e.field?t.value=m["a"].quitTypeValue[s[e.field]]:"quitReason"==e.field?t.value=m["a"].quitReasonValue[s[e.field]]:t.value=s[e.field],n.push(t)})),e.leaveList=[{name:"离职信息",list:n}]}else e.leaveList=[]})).catch((function(){e.loading=!1}))}}},g=y,L=a("2877"),A=Object(L["a"])(g,s,n,!1,null,"34553940",null),E=A.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"employee-base-info"},[a("wk-reminder",{attrs:{content:e.reminderContent}}),e._v(" "),a("wk-custom-base-detail",{attrs:{list:e.baseList},scopedSlots:e._u([{key:"data",fn:function(t){var a=t.data;return[e._v(e._s(a.value))]}}])},[e.baseEditAuth?a("el-button",{attrs:{slot:"more",type:"text"},on:{click:function(t){e.baseCommandSelect("edit")}},slot:"more"},[e._v("编辑")]):e._e()],1),e._v(" "),a("wk-custom-base-detail",{attrs:{"dropdown-items":e.communicationDropdownItems,list:e.communicationList},on:{"top-command-select":e.communicationCommandSelect}}),e._v(" "),a("create-sections",{attrs:{title:"教育经历"}},[0===e.educationList.length?a("div",{staticClass:"empty-text"},[e._v("暂无数据")]):e._l(e.educationList,(function(e,t){return a("wk-base-detail-section",{key:t,attrs:{list:e}})}))],2),e._v(" "),a("create-sections",{attrs:{title:"工作经历"}},[0===e.workList.length?a("div",{staticClass:"empty-text"},[e._v("暂无数据")]):e._l(e.workList,(function(e,t){return a("wk-base-detail-section",{key:t,attrs:{list:e}})}))],2),e._v(" "),a("create-sections",{attrs:{title:"证书/证件"}},[0===e.certificateList.length?a("div",{staticClass:"empty-text"},[e._v("暂无数据")]):e._l(e.certificateList,(function(e,t){return a("wk-base-detail-section",{key:t,attrs:{list:e}})}))],2),e._v(" "),a("create-sections",{attrs:{title:"培训经历"}},[0===e.trainingList.length?a("div",{staticClass:"empty-text"},[e._v("暂无数据")]):e._l(e.trainingList,(function(e,t){return a("wk-base-detail-section",{key:t,attrs:{list:e}})}))],2),e._v(" "),a("create-sections",{attrs:{title:"联系人"}},[0===e.contactsList.length?a("div",{staticClass:"empty-text"},[e._v("暂无数据")]):e._l(e.contactsList,(function(e,t){return a("wk-custom-base-detail-section",{key:t,attrs:{list:e}})}))],2),e._v(" "),a("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass,change:e.formAddChange}}),e._v(" "),e.customFormAddDialogShow?a("custom-form-add-dialog",{ref:"customFormAdddialog",attrs:{id:e.employeeId,title:e.formAddTitle,fields:e.customFormAddFields,visible:e.customFormAddDialogShow,"help-obj":e.helpObj},on:{"update:visible":function(t){e.customFormAddDialogShow=t},pass:e.customFormAddPass}}):e._e()],1)},F=[],V=a("5530"),_=(a("d81d"),a("b64b"),a("a15b"),a("7078")),w=a("10ff"),C=a("94c8"),k=a("4445"),T=a("5da1"),I=a("4cdf"),O=a("8f37"),j=a("5781"),x=a("2f62"),S={name:"EmployeeBaseInfo",components:{CreateSections:w["a"],WkBaseDetailSection:C["a"],FormAddDialog:T["a"],WkReminder:O["a"],WkCustomBaseDetail:f["a"],WkCustomBaseDetailSection:k["a"],CustomFormAddDialog:I["a"]},filters:{},mixins:[b["a"]],props:{},data:function(){return{loading:!1,baseEditAuth:!1,communicationEditAuth:!1,baseEditList:[],baseList:[],communicationEditList:[],communicationList:[],educationBaseList:[],educationList:[],workBaseList:[],workList:[],certificateBaseList:[],certificateList:[],trainingBaseList:[],trainingList:[],contactsBaseList:[],contactsFieldList:[],contactsAddRules:{},contactsList:[],formAddType:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,customFormAddFields:[],customFormAddDialogShow:!1,updateKey:Date.now(),helpObj:{dataType:35,dataId:299}}},computed:Object(V["a"])(Object(V["a"])({},Object(x["b"])(["hrmUserInfo"])),{},{reminderContent:function(){return this.baseEditAuth||this.communicationEditAuth?"可编辑的信息由公司管理员设置，如有问题，请联系公司管理员。":"您的编辑权限已被管理员关闭，如有问题，请联系公司管理员。"},communicationDropdownItems:function(){var e=[];return this.communicationEditAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},employeeId:function(){return this.hrmUserInfo?this.hrmUserInfo.employeeId:""},formAddTitle:function(){return{"update-basic-info":"编辑基本信息","update-contact-info":"编辑通讯信息"}[this.formAddType]}}),watch:{},mounted:function(){this.$store.dispatch("GetHrmUserInfo"),this.getDetail()},methods:{getDetail:function(){var e=this;this.loading=!0,u().then((function(t){e.loading=!1;var a=t.data||{},i=Object(p["z"])(a);e.baseList=[{name:"基本信息",list:e.getCustomFieldListValue(a.information||[],"base")}],e.communicationList=[{name:"通讯信息",list:e.getCustomFieldListValue(a.communicationInformation||[],"communication")}],e.baseEditList=i.information||[],e.communicationEditList=i.communicationInformation||[];var o=a.educationExperienceList||[],l=[];e.educationBaseList=o,o.forEach((function(e){var t=[];h["c"].fields.forEach((function(a){var i={};i.label=a.name,"education"===a.field?i.value=h["c"].educationValue[e[a.field]]:"teachingMethods"===a.field?i.value=h["c"].teachingMethodsValue[e[a.field]]:"isFirstDegree"===a.field?i.value=h["c"].isFirstDegreeValue[e[a.field]]:i.value=e[a.field],t.push(i)})),l.push(t)})),e.educationList=l;var s=a.workExperienceList||[];e.workBaseList=s,e.workList=e.getCommonFieldListValue(s,h["g"].fields);var n=a.certificateList||[];e.certificateBaseList=n,e.certificateList=e.getCommonFieldListValue(n,h["a"].fields);var d=a.trainingExperienceList||[];e.trainingBaseList=d,e.trainingList=e.getCommonFieldListValue(d,h["f"].fields);var u=a.hrmEmployeeContacts||[];e.contactsBaseList=i.hrmEmployeeContacts||[],e.contactsList=u.map((function(t){return e.getCustomFieldListValue(t.information||[])}))})).catch((function(){e.loading=!1}))},getCustomFieldListValue:function(e,t){var a=this,i=!1;e.forEach((function(e){i||1!==e.isEmployeeUpdate||(i=!0),["id_type","sex","birthday_type","highest_education"].includes(e.fieldName)?e.value=e.fieldValueDesc:e.value=e.fieldValue})),"base"===t?this.baseEditAuth=i:"communication"===t&&(this.communicationEditAuth=i);var o=this.getFormAssistIds([e]),l=[];return e.forEach((function(e){if(a.getFormItemDefaultProperty(e,!1),e.show=!o.includes(e.formAssistId),"detail_table"===e.formType){if(!Object(v["c"])(e.value)){var t=e.value;Object(v["a"])(t)&&t.forEach((function(e){e&&e.forEach((function(e){e&&(e.value=e.fieldValue)}))})),e.value=a.getItemValue(e,null,"update")}Object(v["a"])(e.value)||(e.value=[])}e.show&&l.push(e)})),l},getCommonFieldListValue:function(e,t){var a=[];return e.forEach((function(e){var i=[];t.forEach((function(t){var a={};a.label=t.name,a.value=e[t.field],i.push(a)})),a.push(i)})),a},formAddPass:function(){this.uploadCustomRelativeData()},formAddChange:function(e,t,a,i){i&&(e.valueList=i)},customFormAddPass:function(e){var t=this,a=Object(p["z"])(e.field);a.forEach((function(e){if("native_place"==e.fieldName)if(e.value){var t=Object.keys(e.value),a="";t.forEach((function(t){e.value[t]&&(a?a+=",".concat(e.value[t]):a=e.value[t])})),e.value=a}else e.value="";if(45===e.type){var i=e.value;Object(v["a"])(i)&&i.forEach((function(e){e&&e.forEach((function(e){e&&(e.fieldValue=e.value)}))}))}delete e.fieldType,e.fieldValue=e.value,delete e.value}));var i=this.$refs.customFormAdddialog;i.loading=!0;var o={};o.employeeId=this.employeeId,o.dataList=a;var l=null;"update-basic-info"===this.formAddType?l=_["S"]:"update-contact-info"===this.formAddType&&(l=_["R"]),l(o).then((function(e){i.loading=!1,t.$message.success("".concat(t.formAddTitle,"成功")),t.customFormAddDialogShow=!1,t.getDetail(),t.updateKey=Date.now(),t.$emit("handle",{type:"update"})})).catch((function(){i.loading=!1}))},baseCommandSelect:function(e){var t=this;if("edit"==e){var a=Object(p["z"])(this.baseEditList),i=[];a.forEach((function(e){if("age"!=e.fieldName){if(t.handleFieldExtendList(e),j["a"].getCreateFieldDefalutData(e),e.hasOwnProperty("isEmployeeUpdate")&&(e.disabled=1!=e.isEmployeeUpdate),e.value=e.fieldValue,t.handleTableValue(e),"city"==e.formType)if(e.value){var a=e.value.split(",");e.value={province:a[0]||"",city:a[1]||""}}else e.value={};i.push(e)}})),this.formAddType="update-basic-info",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},handleTableValue:function(e){if("detail_table"===e.formType){if(!Object(v["c"])(e.value)){var t=e.value;Object(v["a"])(t)&&t.forEach((function(t){t&&t.forEach((function(t){t&&(j["a"].getCreateFieldDefalutData(t),e.hasOwnProperty("isEmployeeUpdate")&&(t.disabled=1!=e.isEmployeeUpdate),t.value=t.fieldValue)}))}))}Object(v["a"])(e.value)||(e.value=[])}},handleFieldExtendList:function(e){if("detail_table"===e.formType&&!Object(v["c"])(e.fieldExtendList)){var t=e.fieldExtendList;Object(v["a"])(t)&&t.forEach((function(t){t&&(j["a"].getCreateFieldDefalutData(t),e.hasOwnProperty("isEmployeeUpdate")&&(t.disabled=1!=e.isEmployeeUpdate),t.value=t.fieldValue)}))}},communicationCommandSelect:function(e){var t=this;if("edit"==e){var a=Object(p["z"])(this.communicationEditList),i=[];a.forEach((function(e){t.handleFieldExtendList(e),j["a"].getCreateFieldDefalutData(e),e.hasOwnProperty("isEmployeeUpdate")&&(e.disabled=1!=e.isEmployeeUpdate),e.value=e.fieldValue,t.handleTableValue(e),i.push(e)})),this.formAddType="update-contact-info",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},UniquePromise:function(e){var t=this,a=e.field,i=e.value;return new Promise((function(e,o){Object(_["v"])({fieldId:a.fieldId,id:t.employeeId,value:i}).then((function(t){e()})).catch((function(){o()}))}))},uploadCustomRelativeData:function(){var e=this;this.$refs.formAdddialog.loading=!0;var t={employeeId:this.employeeId};this.formAddFields.forEach((function(t){if(t.oldFieldValueDesc=t.fieldValueDesc,"city"==t.formType){var a=e.formAddForm[t.field]||{};t.fieldValue=a.province?a.province+","+a.city:""}else t.fieldValue=e.formAddForm[t.field];"user"==t.formType?t.valueList?t.fieldValueDesc=t.valueList.map((function(e){return e.employeeName})).join("，"):t.fieldValue&&t.valueList:"structure"==t.formType?t.valueList?t.fieldValueDesc=t.valueList.map((function(e){return e.name})).join("，"):t.fieldValue&&t.valueList:"id_type"==t.field?t.fieldValueDesc=h["d"].idTypeValue[t.fieldValue]:"sex"==t.field?t.fieldValueDesc=h["d"].sexValue[t.fieldValue]:"birthday_type"==t.field?t.fieldValueDesc=h["d"].birthdayTypeValue[t.fieldValue]:"highest_education"==t.field?t.fieldValueDesc=h["c"].educationValue[t.fieldValue]:t.fieldValueDesc=t.fieldValue})),t.dataList=this.formAddFields;var a=null;"update-basic-info"===this.formAddType?a=_["S"]:"update-contact-info"===this.formAddType&&(a=_["R"]),a(t).then((function(t){e.$refs.formAdddialog.loading=!1,e.$message.success("".concat(e.formAddTitle,"成功")),e.formAddDialogShow=!1,e.getDetail()})).catch((function(){e.$refs.formAdddialog.loading=!1}))}}},B=S,N=(a("64d2"),Object(L["a"])(B,D,F,!1,null,"4fed54e8",null)),P=N.exports,U={name:"MyArchives",components:{XrHeader:l["a"],EmployeePostInfo:E,EmployeeBaseInfo:P},props:{},data:function(){return{loading:!1,detailData:null,tabNames:[{label:"基本信息",name:"EmployeeBaseInfo"},{label:"岗位信息",name:"EmployeePostInfo"}],tabCurrentName:"EmployeeBaseInfo"}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{}},R=U,$=(a("e55e"),Object(L["a"])(R,i,o,!1,null,"de347af0",null));t["default"]=$.exports},d299:function(e,t,a){},e55e:function(e,t,a){"use strict";a("63b4")}}]);