(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8582c0de"],{"1cd3":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main"},[n("xr-header",{attrs:{label:"工资表设置"}}),t._v(" "),n("div",{staticClass:"main-body"},[0==t.step?t._l(t.sectionList,(function(e,a){return n("div",{key:a,staticClass:"section"},[n("div",{staticClass:"section__title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"section__des"},[t._v(t._s(e.des))]),t._v(" "),0==a?n("div",{staticClass:"handle-bar"},[n("el-button",{key:"edit",attrs:{type:"primary"},on:{click:t.editClick}},[t._v("编辑")])],1):t._e(),t._v(" "),n("flexbox",{staticClass:"section__content",attrs:{wrap:"wrap",align:"stretch"}},t._l(e.list,(function(e,i){return n("el-card",{key:i,staticClass:"section-item"},[n("flexbox",{staticClass:"section-item__header"},[n("div",{staticClass:"section-item__title text-one-line"},[t._v(t._s(e.name))]),t._v(" "),1==a?n("el-tag",{attrs:{"disable-transitions":"",type:"warning"}},[t._v("系统项")]):t._e()],1),t._v(" "),n("div",{staticClass:"section-item__body"},[t._l(t.getSubChildren(e.children,a),(function(e,a){return n("div",{key:a,staticClass:"section-item__content text-one-line"},[t._v(t._s(e.name))])})),t._v(" "),e.children&&e.children.length>3?n("div",{staticClass:"section-item__content text-one-line"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[n("span",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.children.slice(3).map((function(t){return t.name})).join("<br>"))},slot:"content"}),t._v(" "),n("el-button",{staticStyle:{padding:"2px"},attrs:{type:"subtle",icon:"el-icon-more"}})],1)],1):t._e()],2)],1)})))],1)})):1==t.step?t._l(t.sectionFirstList,(function(e,a){return n("div",{key:a,staticClass:"section"},[n("div",{staticClass:"section__title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"section__des"},[t._v(t._s(e.des))]),t._v(" "),0==a?n("div",{staticClass:"handle-bar"},[n("el-button",{key:"next",attrs:{type:"primary"},on:{click:t.nextClick}},[t._v("下一步")]),t._v(" "),n("el-button",{on:{click:t.cancelClick}},[t._v("取消")])],1):t._e(),t._v(" "),n("flexbox",{staticClass:"section__content",attrs:{wrap:"wrap",align:"stretch"}},t._l(e.list,(function(e,i){return n("el-card",{key:i,staticClass:"section-item"},[n("flexbox",{staticClass:"section-item__header"},[n("div",{staticClass:"section-item__title text-one-line"},[t._v(t._s(e.name))]),t._v(" "),0==a?n("el-switch",{attrs:{"inactive-value":0,"active-value":1},model:{value:e.isOpen,callback:function(n){t.$set(e,"isOpen",n)},expression:"item.isOpen"}}):t._e(),t._v(" "),1==a?n("el-tag",{attrs:{"disable-transitions":"",type:"warning"}},[t._v("系统项")]):t._e()],1),t._v(" "),n("div",{staticClass:"section-item__body"},[t._l(t.getSubChildren(e.children,a),(function(e,a){return n("div",{key:a,staticClass:"section-item__content text-one-line"},[t._v(t._s(e.name))])})),t._v(" "),e.children&&e.children.length>3?n("div",{staticClass:"section-item__content text-one-line"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[n("span",{attrs:{slot:"content"},domProps:{innerHTML:t._s(e.children.slice(3).map((function(t){return t.name})).join("<br>"))},slot:"content"}),t._v(" "),n("el-button",{staticStyle:{padding:"2px"},attrs:{type:"subtle",icon:"el-icon-more"}})],1)],1):t._e()],2)],1)})))],1)})):2==t.step?t._l(t.sectionFirstList,(function(e,a){return n("div",{key:a,staticClass:"section"},[n("div",{staticClass:"section__title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"section__des"},[t._v(t._s(e.nextDes))]),t._v(" "),0==a?n("div",{staticClass:"handle-bar"},[n("el-button",{key:"save",attrs:{type:"primary"},on:{click:t.saveClick}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:t.backClick}},[t._v("返回")])],1):t._e(),t._v(" "),n("div",{staticClass:"section__content",attrs:{wrap:"wrap",align:"stretch"}},t._l(e.list,(function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isOpen,expression:"item.isOpen == 1"}],key:i,staticClass:"table-content"},[n("el-table",{class:t.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{data:e.children,stripe:!1}},[t._l(t.getTableFields(e),(function(e,a){return n("el-table-column",{key:a,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})})),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[0==a?n("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(n){t.deleteItems(i.$index,e.children)}}},[t._v("删除")]):[n("el-switch",{attrs:{"inactive-value":0,"active-value":1},model:{value:i.row.isShow,callback:function(e){t.$set(i.row,"isShow",e)},expression:"scope.row.isShow"}})]]}}])}),t._v(" "),e.showCreate?n("flexbox",{staticClass:"create-bar",attrs:{slot:"append"},slot:"append"},[n("el-input",{staticClass:"name-input",attrs:{maxlength:50,type:"text"},model:{value:e.createName,callback:function(n){t.$set(e,"createName",n)},expression:"item.createName"}}),t._v(" "),n("el-input",{staticClass:"remarks-input",attrs:{maxlength:50,type:"text"},model:{value:e.createRemarks,callback:function(n){t.$set(e,"createRemarks",n)},expression:"item.createRemarks"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(n){t.createSaveClick(e)}}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:function(n){t.createCancelClick(e)}}},[t._v("取消")])],1):t._e()],2),t._v(" "),0==a?n("el-dropdown",{ref:"bottomDropdown",refInFor:!0,attrs:{"hide-on-click":!1,trigger:"click"}},[n("el-button",{staticClass:"dropdown-btn"},[t._v("添加薪资项"),n("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.getHandleOptions(e),(function(a,r){return n("el-dropdown-item",{key:r,attrs:{icon:a.isCustom?"el-icon-plus":"",command:a.code},nativeOn:{click:function(n){t.dropdownCommand(a,e,i)}}},[a.isCustom?[t._v(t._s(a.name))]:n("el-checkbox",{on:{change:function(n){t.checkboxChange(n,a,e.children)}},model:{value:a.checked,callback:function(e){t.$set(a,"checked",e)},expression:"handleItem.checked"}},[t._v(t._s(a.name))])],2)})))],1):t._e()],1)})))])})):t._e()],2)],1)},i=[],r=n("2909"),o=(n("a434"),n("d3b7"),n("159b"),n("14d9"),n("99af"),n("4de4"),n("d81d"),n("caad"),n("2532"),n("7db0"),n("b0c0"),n("fb6a"),n("cccc")),c=n("f468"),s=n("ed08"),l={name:"SalaryOptions",components:{XrHeader:c["a"]},mixins:[],data:function(){return{loading:!1,detailData:null,optionTempList:[],sectionList:[],sectionFirstList:[],sectionNextList:[],step:0}},computed:{},watch:{},created:function(){this.getDetail()},methods:{editClick:function(t){this.getFirstPageData(this.detailData),this.step=1},backClick:function(){this.step=1},deleteItems:function(t,e){e.splice(t,1)},saveClick:function(){var t=this;this.$confirm("编辑后不影响历史工资的工资表，当前计薪的工资表需重新核算后生效?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[],n=[];t.sectionFirstList[0].list.forEach((function(t){0===t.isOpen?e.push(t.code):n.push(t)}));var a=[];n.forEach((function(t){a=a.concat(t.children)})),t.sectionFirstList[1].list.forEach((function(t){a=a.concat(t.children||[])})),t.loading=!0,Object(o["I"])({optionList:a,hideList:e}).then((function(e){t.loading=!1,t.step=0,t.getDetail()})).catch((function(){t.loading=!1}))})).catch((function(){}))},getDetail:function(){var t=this;this.sectionList=[],this.sectionFirstList=[],this.sectionNextList=[],this.loading=!0,Object(o["H"])().then((function(e){t.loading=!1,t.detailData=e.data||{},t.getDetailPageData(t.detailData)})).catch((function(){t.loading=!1}))},getDetailPageData:function(t){var e=Object(s["z"])(t.openOption||[]),n=[],a=[];e.forEach((function(t){if(t.isFixed){var e=t.children.filter((function(t){return 0===t.isShow}));e.length!=t.children.length&&a.push(t)}else n.push(t)})),this.sectionList=this.getSection(n,a)},getFirstPageData:function(t){t=Object(s["z"])(t);var e=t.templateOption||[];this.optionTempList=Object(s["z"])(e);var n=[],a=t.openOption.filter((function(t){return 1==t.isFixed})),i=t.openOption.map((function(t){return t.code}));e.forEach((function(e){if(0===e.isFixed){if(e.isOpen=i.includes(e.code)?1:0,1==e.isOpen){var a=t.openOption.find((function(t){return t.code==e.code}));a&&(e.children=a.children||[])}n.push(e)}})),this.sectionFirstList=this.getSection(n,a)},getSection:function(t,e){return[{title:"企业可选项",des:"选择企业工资表包含的所有工资项目类型，点开开关设置是否启用该项目类型，在下一步可以编辑具体的子项目",nextDes:"您可以新增或删除工资项，可以点击编辑项目名称和备注",list:t},{title:"系统默认项",des:"系统默认项，即计薪过程的必要项目，默认启用",nextDes:"系统项是计薪过程中的必要项目，可以设置项目是否在工资表显示",list:e}]},getTableFields:function(t){return 2==t.isPlus&&2==t.isTax?[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"}]:2==t.isPlus?[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"},{label:"加/减项",width:120,prop:"isPlus"}]:2==t.isTax?[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"},{label:"是否计税",width:120,prop:"isTax"}]:[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"},{label:"加/减项",width:120,prop:"isPlus"},{label:"是否计税",width:120,prop:"isTax"}]},fieldFormatter:function(t,e,n){return"isPlus"==e.property?{1:"加",0:"减"}[t[e.property]]:"isTax"==e.property?{1:"是",0:"否"}[t[e.property]]:t[e.property]||"--"},nextClick:function(){var t=this;this.loading=!0,setTimeout((function(){t.step=2,t.$nextTick((function(){t.loading=!1}))}),300)},cancelClick:function(){this.step=0},getHandleOptions:function(t){var e=this.optionTempList.find((function(e){return e.code==t.code}));if(e){var n=t.children.map((function(t){return t.code})),a=e.children.map((function(t){return t.checked=n.includes(t.code),t}));if(a.length){var i=Object(s["z"])(e.children[e.children.length-1]),o=e.children.map((function(t){return t.code})),c=Math.max.apply(Math,Object(r["a"])(o).concat(Object(r["a"])(n)));i.isCustom=!0,i.code=c+1,i.name="添加自定义项",a.push(i)}return a}return[]},checkboxChange:function(t,e,n){if(t)n.push(e);else{for(var a=-1,i=0;i<n.length;i++)if(n[i].code==e.code){a=i;break}a>=0&&n.splice(a,1)}},dropdownCommand:function(t,e,n){if(t.isCustom){for(var a=null,i=e.children.length-1;i>=0;i--){var r=e.children[i];if(r.isCustom){a=r;break}}var o=Object(s["z"])(t);o.code=a?a.code+1:t.code,e.createData=o,this.$set(e,"showCreate",!0),this.$refs.bottomDropdown[n].hide()}},createCancelClick:function(t){this.resetItem(t),t.showCreate=!1},createSaveClick:function(t){if(t.createName){var e=t.createData;e.isCustom=!0,e.name=t.createName,e.remarks=t.createRemarks,t.children.push(e),this.resetItem(t),t.showCreate=!1}else this.$message.error("请输入名称")},resetItem:function(t){t.createName="",t.createRemarks="",t.createData=null},getSubChildren:function(t,e){if(1==e){var n=t.filter((function(t){return 1===t.isShow}));return n&&n.length>3?n.slice(0,3):n}return t&&t.length>3?t.slice(0,3):t}}},u=l,d=(n("bf91"),n("2877")),p=Object(d["a"])(u,a,i,!1,null,"45d8e0f4",null);e["default"]=p.exports},8075:function(t,e,n){},bf91:function(t,e,n){"use strict";n("8075")},cccc:function(t,e,n){"use strict";n.d(e,"p",(function(){return i})),n.d(e,"s",(function(){return r})),n.d(e,"k",(function(){return o})),n.d(e,"o",(function(){return c})),n.d(e,"n",(function(){return s})),n.d(e,"r",(function(){return l})),n.d(e,"q",(function(){return u})),n.d(e,"t",(function(){return d})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return f})),n.d(e,"D",(function(){return v})),n.d(e,"F",(function(){return b})),n.d(e,"G",(function(){return _})),n.d(e,"E",(function(){return y})),n.d(e,"J",(function(){return C})),n.d(e,"K",(function(){return g})),n.d(e,"H",(function(){return j})),n.d(e,"I",(function(){return k})),n.d(e,"v",(function(){return T})),n.d(e,"w",(function(){return O})),n.d(e,"x",(function(){return x})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return F})),n.d(e,"C",(function(){return S})),n.d(e,"c",(function(){return A})),n.d(e,"h",(function(){return L})),n.d(e,"N",(function(){return U})),n.d(e,"b",(function(){return R})),n.d(e,"B",(function(){return D})),n.d(e,"g",(function(){return E})),n.d(e,"M",(function(){return I})),n.d(e,"A",(function(){return G})),n.d(e,"f",(function(){return q})),n.d(e,"L",(function(){return P})),n.d(e,"a",(function(){return N})),n.d(e,"u",(function(){return $})),n.d(e,"e",(function(){return M})),n.d(e,"d",(function(){return H}));var a=n("b775");function i(t){return Object(a["a"])({url:"hrmConfig/queryRecruitChannelList",method:"post",data:t})}function r(t){return Object(a["a"])({url:"hrmConfig/saveRecruitChannel",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(a["a"])({url:"hrmConfig/deleteRecruitChannel",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(t){return Object(a["a"])({url:"hrmConfig/queryFields",method:"post",data:t})}function s(t){return Object(a["a"])({url:"hrmConfig/queryFieldByLabel/".concat(t),method:"post"})}function l(t){return Object(a["a"])({url:"hrmConfig/saveField",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(t){return Object(a["a"])({url:"hrmConfig/queryRecruitEliminateList",method:"post",data:t})}function d(t){return Object(a["a"])({url:"hrmConfig/saveRecruitEliminate",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(t){return Object(a["a"])({url:"hrmConfig/queryInsuranceSchemePageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(t){return Object(a["a"])({url:"hrmConfig/queryInsuranceSchemeById/".concat(t),method:"post"})}function m(t){return Object(a["a"])({url:"hrmConfig/addInsuranceScheme",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(t){return Object(a["a"])({url:"hrmConfig/deleteInsuranceScheme/".concat(t),method:"post"})}function v(t){return Object(a["a"])({url:"hrmSalaryGroup/addSalaryGroup",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(t){return Object(a["a"])({url:"hrmSalaryGroup/querySalaryGroupPageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function _(t){return Object(a["a"])({url:"hrmSalaryGroup/setSalaryGroup",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(t){return Object(a["a"])({url:"hrmSalaryGroup/delete/".concat(t),method:"post"})}function C(t){return Object(a["a"])({url:"hrmSalaryTaxRule/queryTaxRuleList",method:"post",data:t})}function g(t){return Object(a["a"])({url:"hrmSalaryTaxRule/setTaxRule",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function j(t){return Object(a["a"])({url:"hrmSalaryOption/querySalaryOptionDetail",method:"post",data:t})}function k(t){return Object(a["a"])({url:"hrmSalaryOption/setSalaryOption",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function T(){return Object(a["a"])({url:"hrmEmployeeArchives/queryEmployeeArchivesField",method:"post"})}function O(t){return Object(a["a"])({url:"hrmEmployeeArchives/sendWriteArchives",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function x(t){return Object(a["a"])({url:"hrmEmployeeArchives/setEmployeeArchivesField",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function w(t){return Object(a["a"])({url:"hrmEmployeeFieldManage/queryEmployeeManageField",method:"post",data:t})}function F(t){return Object(a["a"])({url:"hrmEmployeeFieldManage/setEmployeeManageField",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function S(t){return Object(a["a"])({url:"hrmAttendanceShift/queryAttendanceShiftPageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function A(t){return Object(a["a"])({url:"hrmAttendanceShift/".concat(t.shiftId?"setAttendanceShift":"addAttendanceShift"),method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function L(t){return Object(a["a"])({url:"hrmAttendanceShift/delete/".concat(t.attendanceShiftId),method:"post",data:t})}function U(t){return Object(a["a"])({url:"hrmAttendanceShift/verifyAttendanceShiftName",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function R(t){return Object(a["a"])({url:"hrmAttendanceRule/".concat(t.attendanceRuleId?"setAttendanceRule":"addAttendanceRule"),method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function D(t){return Object(a["a"])({url:"hrmAttendanceRule/queryAttendanceRulePageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function E(t){return Object(a["a"])({url:"hrmAttendanceRule/delete/".concat(t.attendanceRuleId),method:"post",data:t})}function I(t){return Object(a["a"])({url:"hrmAttendanceRule/verifyAttendanceRuleName",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function G(t){return Object(a["a"])({url:"hrmAttendanceGroup/queryAttendanceGroupPageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function q(t){return Object(a["a"])({url:"hrmAttendanceGroup/delete/".concat(t.attendanceGroupId),method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function P(t){return Object(a["a"])({url:"hrmAttendanceGroup/verifyAttendanceGroupName",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function N(t){return Object(a["a"])({url:"hrmAttendanceGroup/addAttendanceGroup",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function $(t){return Object(a["a"])({url:"hrmAttendanceGroup/setAttendanceGroup",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function M(t){return Object(a["a"])({url:"hrmAttendanceExamine/queryHrmAttendanceExamine",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function H(t){return Object(a["a"])({url:"hrmAttendanceExamine/add",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);