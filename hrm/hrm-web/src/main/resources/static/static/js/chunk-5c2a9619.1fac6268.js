(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c2a9619"],{"0b57":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wrapper"},[t.listShow?[n("xr-header",{attrs:{"ft-top":"0",label:"社保管理"}},[n("template",{slot:"otherLabel"},[n("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"32","data-id":"287"}})]),t._v(" "),n("template",{slot:"ft"},[n("el-date-picker",{staticStyle:{width:"100px","margin-right":"15px"},attrs:{"picker-options":t.pickerOptions,clearable:!1,type:"year",format:"yyyy","value-format":"yyyy",placeholder:"选择日期"},on:{change:t.getList},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),t._v(" "),n("template",{slot:"ft"},[t.manageAuth?n("el-button",{attrs:{type:"primary"},on:{click:t.createClick}},[t._v("新建次月报表")]):t._e()],1)],2),t._v(" "),n("div",{directives:[{name:"empty",rawName:"v-empty",value:!t.list||0==t.list.length,expression:"!list || list.length == 0"}],staticClass:"wrapper-main"},t._l(t.list,(function(e,i){return n("statistics-card",{key:i,attrs:{"delete-button-show":0===i&&t.newYear==t.year&&t.manageAuth,title:e.month+"月社保表",data:e,"field-list":t.fieldList,"button-show":t.detailAuth},on:{"detail-click":t.detailCheckClick,"delete-click":t.deleteCheckClick}})})))]:t._e(),t._v(" "),t.stepsExplainShow?n("wk-steps-explain-view",{attrs:{title:t.explainTitle,steps:t.explainSteps},on:{"step-click":t.stepClick}}):t._e(),t._v(" "),n("month-set-dialog",{attrs:{visible:t.monthDialogShow},on:{"update:visible":function(e){t.monthDialogShow=e},change:t.monthSetChange}})],2)},a=[],o=n("5530"),c=(n("d3b7"),n("25f0"),n("14d9"),n("4eaa")),r=n("2336"),s=n("f468"),l=n("4c08"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{ref:"wkDialog",attrs:{visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,title:t.title,"show-close":!1,width:"500px"}},[n("div",{staticClass:"form-add-dialog-body"},[n("el-form",{ref:"monthForm",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"起始月份",prop:"socialSecurityStartMonth"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"month",format:"yyyy-MM","value-format":"yyyy-MM",placeholder:"选择日期"},model:{value:t.form.socialSecurityStartMonth,callback:function(e){t.$set(t.form,"socialSecurityStartMonth",e)},expression:"form.socialSecurityStartMonth"}})],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),n("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")])],1)])},d=[],f=n("9dba"),h={name:"MonthSetDialog",components:{},mixins:[f["a"]],props:{visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"设置社保起始月份",rules:{socialSecurityStartMonth:[{required:!0,message:"请选择",trigger:"blur"}]},form:{}}},computed:{},watch:{visible:{handler:function(t){t&&(this.form={socialSecurityStartMonth:""})},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$router.go(-1),this.close()},close:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var t=this;this.$refs.monthForm.validate((function(e){e&&(t.loading=!0,Object(r["c"])(t.form).then((function(e){t.$message.success("操作成功");var n=t.form.socialSecurityStartMonth.split("-");t.$emit("change",n[0],n[1]),t.close(),t.loading=!1})).catch((function(){t.loading=!1})))}))}}},p=h,m=(n("db69"),n("2877")),g=Object(m["a"])(p,u,d,!1,null,"a547bdec",null),b=g.exports,C=n("93cc"),y=n("2f62"),v={name:"InsuranceSchemeIndex",components:{XrHeader:s["a"],WkStepsExplainView:l["a"],MonthSetDialog:b,StatisticsCard:C["a"]},data:function(){var t=this;return{loading:!1,explainTitle:"首次创建社保前，请先配置参保信息",explainSteps:[{icon:n("b5da"),label:"第一步：",desLeft:"去企业后台",desCenter:"【配置自主参保方案】",desRight:""},{icon:n("639f"),label:"第二步：",desLeft:"去员工管理配置员工所属参保方案",desCenter:"",desRight:"",button:"已配置完成，去生成社保"},{icon:n("bd88"),label:"第三步：",desLeft:"选择社保月份，生成社保",desCenter:"",desRight:""}],initStatusConfig:null,initDataConfig:null,year:"",pickerOptions:{disabledDate:function(e){return!t.initDataConfig||!t.initDataConfig.year||e.getFullYear()<t.initDataConfig.year}},list:[],fieldList:[{label:"参保人数",prop:"num"},{label:"个人社保",prop:"personalInsuranceAmount"},{label:"公司社保",prop:"corporateInsuranceAmount"},{label:"个人公积金",prop:"personalProvidentFundAmount"},{label:"公司公积金",prop:"corporateProvidentFundAmount"},{label:"本月停保人数",prop:"stopNum"}],stepsExplainShow:!1,monthDialogShow:!1,newYear:""}},computed:Object(o["a"])(Object(o["a"])({},Object(y["b"])(["hrm"])),{},{insuranceAuth:function(){return this.hrm.insurance},detailAuth:function(){return this.insuranceAuth&&this.insuranceAuth.read},manageAuth:function(){return this.insuranceAuth&&this.insuranceAuth.manage},listShow:function(){return!!this.initStatusConfig&&(this.initStatusConfig.firstConfig&&this.initStatusConfig.secondConfig)}}),watch:{},created:function(){this.getConfigList()},mounted:function(){},methods:{getConfigList:function(){var t=this;this.loading=!0,Object(r["b"])().then((function(e){var n=e.data.statusInitConfig,i=1==n[4],a=1==n[5];if(t.initStatusConfig={firstConfig:i,secondConfig:a},t.initDataConfig=e.data.otherInitConfig,i)if(a){t.stepsExplainShow=!1,t.monthDialogShow=!1;var o=t.initDataConfig.socialSecurityStartMonth?t.initDataConfig.socialSecurityStartMonth.split("-")[0]:(new Date).getFullYear().toString(),c=t.initDataConfig.lastSocialSecurityYear?t.initDataConfig.lastSocialSecurityYear.toString():o;t.year=c.toString(),t.newYear=t.year,t.initDataConfig.year=o,t.getList()}else t.monthDialogShow=!0;else t.stepsExplainShow=!0;t.loading=!1})).catch((function(){t.loading=!1}))},stepClick:function(t,e,n){0==e?this.$router.push({name:"insuranceSchemeSet"}):1==e&&this.updateInItConfig(4)},updateInItConfig:function(t){var e=this;this.loading=!0,Object(r["e"])(t).then((function(t){e.initStatusConfig.secondConfig?e.getList():e.monthDialogShow=!0,e.loading=!1})).catch((function(){e.loading=!1}))},monthSetChange:function(t,e){this.getConfigList()},getList:function(){var t=this;this.loading=!0,Object(c["k"])({pageType:0,year:this.year}).then((function(e){t.list=e.data.list||[],t.loading=!1})).catch((function(){t.loading=!1}))},createClick:function(){var t=this;this.$confirm("新建次月社保，本月数据将不可修改。请确认要新建次月社保吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(c["i"])().then((function(e){t.loading=!1,t.getConfigList()})).catch((function(){t.loading=!1}))})).catch((function(){}))},detailCheckClick:function(t){this.$router.push("insurance-scheme/detail/".concat(t.irecordId))},deleteCheckClick:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,Object(c["j"])(t.irecordId).then((function(t){e.$message.success("删除成功"),e.getConfigList(),e.loading=!1})).catch((function(){e.loading=!1}))})).catch((function(){}))}}},_=v,S=(n("9822"),Object(m["a"])(_,i,a,!1,null,"7d6b9aaa",null));e["default"]=S.exports},2336:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return s}));var i=n("b775");function a(){return Object(i["a"])({url:"hrmSalaryConfig/queryInItConfig",method:"post"})}function o(t){return Object(i["a"])({url:"hrmSalaryConfig/saveInitConfig",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(t){return Object(i["a"])({url:"/hrmSalaryConfig/updateInitStatus/".concat(t),method:"post"})}function r(){return Object(i["a"])({url:"/hrmSalaryConfig/querySalaryConfig",method:"post"})}function s(t){return Object(i["a"])({url:"hrmSalaryConfig/updateSalaryConfig",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},2438:function(t,e,n){},"2d98":function(t,e,n){},"3e9a":function(t,e,n){"use strict";n("2438")},"4c08":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"opacity-fade"}},[n("div",{staticClass:"wk-steps-explain-view",style:{"z-index":t.zIndex}},[n("div",{staticClass:"label"},[t._v(t._s(t.title))]),t._v(" "),n("wk-steps",t._l(t.steps,(function(e,i){return n("wk-step",{key:i,attrs:{icon:e.icon,label:e.label,"des-left":e.desLeft,"des-center":e.desCenter,"des-right":e.desRight,button:e.button},on:{"step-click":function(n){t.stepClick(n,i,e)}}})})))],1)])},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flexbox",{staticClass:"wk-steps",attrs:{align:"stretch"}},[t._t("default")],2)},c=[],r={name:"WkSteps",components:{},props:{},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{}},s=r,l=(n("70cc"),n("2877")),u=Object(l["a"])(s,o,c,!1,null,"9cf6a7de",null),d=u.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wk-step"},[n("flexbox",[n("div",{staticClass:"wk-step__line is-left"}),t._v(" "),n("img",{staticClass:"wk-step__icon",attrs:{src:t.icon}}),t._v(" "),n("div",{staticClass:"wk-step__line is-right"})]),t._v(" "),t.label?n("div",{staticClass:"wk-step__label"},[t._v(t._s(t.label))]):t._e(),t._v(" "),n("div",{staticClass:"wk-step__des"},[t.desLeft?n("span",[t._v(t._s(t.desLeft))]):t._e(),t._v(" "),t.desCenter?n("el-button",{attrs:{type:"link"},on:{click:t.desClick}},[t._v(t._s(t.desCenter))]):t._e(),t._v(" "),t.desRight?n("span",[t._v(t._s(t.desRight))]):t._e()],1),t._v(" "),n("div",{staticClass:"wk-step__btn"},[t.button?n("el-button",{attrs:{type:"link"},on:{click:t.bottomClick}},[t._v(t._s(t.button))]):t._e()],1)],1)},h=[],p={name:"WkStep",components:{},props:{icon:String,label:String,desLeft:String,desCenter:String,desRight:String,button:String},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{desClick:function(){this.$emit("step-click","des")},bottomClick:function(){this.$emit("step-click","button")}}},m=p,g=(n("3e9a"),Object(l["a"])(m,f,h,!1,null,"7a9bf017",null)),b=g.exports,C=n("ed08"),y={name:"WkStepsExplainView",components:{WkSteps:d,WkStep:b},props:{title:String,steps:Array},data:function(){return{zIndex:Object(C["p"])()}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{stepClick:function(t,e,n){this.$emit("step-click",t,e,n)}}},v=y,_=(n("6b3e"),Object(l["a"])(v,i,a,!1,null,"b7b18744",null));e["a"]=_.exports},"4de9":function(t,e,n){},"4eaa":function(t,e,n){"use strict";n.d(e,"k",(function(){return a})),n.d(e,"m",(function(){return o})),n.d(e,"i",(function(){return c})),n.d(e,"l",(function(){return r})),n.d(e,"g",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return h})),n.d(e,"j",(function(){return p})),n.d(e,"n",(function(){return m})),n.d(e,"o",(function(){return g})),n.d(e,"d",(function(){return b})),n.d(e,"c",(function(){return C}));var i=n("b775");function a(t){return Object(i["a"])({url:"hrmInsuranceMonthRecord/queryInsuranceRecordList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(i["a"])({url:"hrmInsuranceMonthRecord/queryInsurancePageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(){return Object(i["a"])({url:"hrmInsuranceMonthRecord/computeInsuranceData",method:"post"})}function r(t){return Object(i["a"])({url:"hrmInsuranceMonthRecord/queryInsuranceRecordList/".concat(t),method:"post"})}function s(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/stop",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/queryById/".concat(t),method:"post"})}function u(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/updateInsuranceProject",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/addInsuranceEmp",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/batchUpdateInsuranceProject",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/queryNoInsuranceEmp/".concat(t.irecordId),method:"post"})}function p(t){return Object(i["a"])({url:"hrmInsuranceMonthRecord/deleteInsurance/".concat(t),method:"post"})}function m(t){return Object(i["a"])({url:"hrmInsuranceScheme/queryInsuranceScale",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(t){return Object(i["a"])({url:"hrmInsuranceScheme/queryInsuranceType",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/myInsuranceDetail/".concat(t),method:"post"})}function C(t){return Object(i["a"])({url:"hrmInsuranceMonthEmpRecord/myInsurance",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"639f":function(t,e,n){t.exports=n.p+"static/img/people.9b280f8f.png"},"6b3e":function(t,e,n){"use strict";n("4de9")},"70cc":function(t,e,n){"use strict";n("7b40")},"7b40":function(t,e,n){},"93cc":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"statistics-card"},[n("flexbox",[t.titleShow?n("div",{staticClass:"card-item is-first"},[t.iconShow?n("i",{staticClass:"wk wk-results-solid card-item__icon"}):t._e(),t._v(" "),n("span",{staticClass:"card-item__title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t._l(t.fieldList,(function(e,i){return n("div",{key:i,staticClass:"card-item"},[n("div",{staticClass:"card-item__label"},[t._v(t._s(e.label))]),t._v(" "),n("div",{staticClass:"card-item__value",class:{"can-visit--underline":e.visit},on:{click:function(n){t.itemClick(i,e)}}},[t._v(t._s(""===t.data[e.prop]||null===t.data[e.prop]?"--":t.data[e.prop]))])])})),t._v(" "),t.buttonShow?n("div",{staticClass:"card-item"},[t.$slots.handle?t._t("handle"):n("el-button",{attrs:{type:"text"},on:{click:function(e){t.detailClick(t.data)}}},[t._v("查看详情")]),t._v(" "),t.deleteButtonShow?n("el-button",{staticClass:"xr-text-btn delete",attrs:{type:"text"},on:{click:function(e){t.deleteClick(t.data)}}},[t._v("删除")]):t._e()],2):t._e()],2)],1)},a=[],o={name:"StatisticsCard",components:{},props:{titleShow:{type:Boolean,default:!0},iconShow:{type:Boolean,default:!0},buttonShow:{type:Boolean,default:!0},deleteButtonShow:{type:Boolean,default:!1},title:String,data:Object,fieldList:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{detailClick:function(){this.$emit("detail-click",this.data)},deleteClick:function(){this.$emit("delete-click",this.data)},itemClick:function(t,e){e.visit&&this.$emit("select",t,e,this.data)}}},c=o,r=(n("b6fe"),n("2877")),s=Object(r["a"])(c,i,a,!1,null,"022a88ee",null);e["a"]=s.exports},9822:function(t,e,n){"use strict";n("f784")},b5da:function(t,e,n){t.exports=n.p+"static/img/setting.3ca1897f.png"},b6fe:function(t,e,n){"use strict";n("f121")},bd88:function(t,e,n){t.exports=n.p+"static/img/cycle.beabd3ef.png"},db69:function(t,e,n){"use strict";n("2d98")},f121:function(t,e,n){},f784:function(t,e,n){}}]);