(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2457095a"],{"039a":function(e,t,a){"use strict";a("59f1")},"0850":function(e,t,a){},"0942":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("b775");function n(e){return Object(i["a"])({url:"hrmActionRecord/queryRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"0b8a":function(e,t,a){"use strict";a("cc08")},"1fa1":function(e,t,a){},"32a2":function(e,t,a){e.exports=a.p+"static/img/no_data.07db3ea0.png"},"3c79":function(e,t,a){"use strict";a("8d43")},"41e8":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return r})),a.d(t,"h",(function(){return d})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return u}));var i=a("b775");function n(e){return Object(i["a"])({url:"hrmEmployee/SocialSecurity/salarySocialSecurityInformation/".concat(e),method:"post"})}function o(e){return Object(i["a"])({url:"hrmEmployee/SocialSecurity/addSalaryCard",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(i["a"])({url:"hrmEmployee/SocialSecurity/addSocialSecurity",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["a"])({url:"hrmEmployee/SocialSecurity/setSalaryCard",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(i["a"])({url:"hrmEmployee/SocialSecurity/setSocialSecurity",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(i["a"])({url:"hrmEmployee/updateInsuranceScheme",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["a"])({url:"hrmEmployee/SocialSecurity/querySalaryList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(i["a"])({url:"hrmEmployee/SocialSecurity/querySalaryDetail/".concat(e),method:"post"})}},5841:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%",background:"white"}},on:{afterEnter:e.getDetail,close:e.hideView}},[e.detailData?a("flexbox",{staticClass:"side-detail-main",staticStyle:{padding:"0 15px"},attrs:{direction:"column",align:"stretch"}},[a("wk-detail-header",{attrs:{"dropdown-items":e.dropdownItems},on:{"command-select":e.commandSelect}},[a("div",{staticClass:"employee-header",attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"employee-header__top"},[a("span",{staticClass:"name"},[e._v(e._s(e.detailData.employeeName))]),e._v(" "),a("span",{staticClass:"post"},[e._v(e._s(e.detailData.post))])]),e._v(" "),a("div",{staticClass:"employee-header__bottom"},[1===e.detailData.sex||2===e.detailData.sex?a("el-tag",{staticClass:"xr-sex-tag",class:{1:"is-man",2:"is-woman"}[e.detailData.sex],attrs:{"disable-transitions":"",size:"mini"}},[a("i",{class:{1:"wk wk-man",2:"wk wk-woman"}[e.detailData.sex]})]):e._e(),e._v(" "),a("el-tooltip",{attrs:{content:"工号："+(e.detailData.jobNumber||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-work-card"}),e._v(e._s(e.detailData.jobNumber||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"部门："+(e.detailData.deptName||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-layer"}),e._v(e._s(e.detailData.deptName||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"员工状态："+(e.getEmployeeStatusName(e.detailData.status)||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-time"}),e._v(e._s(e.getEmployeeStatusName(e.detailData.status)||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"入职日期："+(e.detailData.entryTime||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-status"}),e._v(e._s(e.detailData.entryTime||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"年龄："+(e.detailData.age||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-cake"}),e._v(e._s(e.detailData.age||"--")+"\n            ")])],1)],1)])]),e._v(" "),a("el-tabs",{staticClass:"side-detail__tabs--default",model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},e._l(e.tabNames,(function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.label,name:t.name,lazy:""}},[a(t.name,{tag:"component",staticClass:"side-detail-tabs-content",staticStyle:{"padding-top":"16px"},attrs:{id:e.id,detail:e.detailData},on:{handle:e.relativeHandle}})],1)})))],1):e._e(),e._v(" "),a("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass}})],1)},n=[],o=a("5530"),s=(a("a9e3"),a("14d9"),a("7078")),l=a("130f"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.updateKey},[a("wk-custom-base-detail",{attrs:{list:e.postList},scopedSlots:e._u([{key:"data",fn:function(t){var a=t.data;return[e._v(e._s(a.value))]}}])},[e.editAuth?a("el-button",{attrs:{slot:"more",type:"text"},on:{click:function(t){e.postCommandSelect("edit")}},slot:"more"},[e._v("编辑")]):e._e()],1),e._v(" "),e.leaveList.length>0?a("wk-base-detail",{attrs:{"dropdown-items":e.dropdownItems,list:e.leaveList},on:{"top-command-select":e.topCommandSelect}}):e._e(),e._v(" "),a("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass,change:e.formAddChange}}),e._v(" "),e.customFormAddDialogShow?a("custom-form-add-dialog",{ref:"customFormAdddialog",attrs:{id:e.id,title:e.formAddTitle,fields:e.customFormAddFields,visible:e.customFormAddDialogShow},on:{"update:visible":function(t){e.customFormAddDialogShow=t},pass:e.customFormAddPass}}):e._e()],1)},d=[],c=(a("d3b7"),a("159b"),a("caad"),a("2532"),a("b0c0"),a("b64b"),a("7db0"),a("1aac")),u=a("8f7f"),m=a("d165"),f=a("5da1"),h=a("4cdf"),p=a("24f4"),g=a("5781"),v=a("ed08"),y=a("6bfe"),b=a("8b13"),A=a("2046"),w={name:"EmployeePostInfo",components:{WkBaseDetail:u["a"],WkCustomBaseDetail:m["a"],FormAddDialog:f["a"],CustomFormAddDialog:h["a"]},mixins:[A["a"]],inject:["editAuth"],props:{id:[String,Number],detail:Object},data:function(){return{loading:!1,leaveDetail:null,postEditList:[],postList:[],leaveFields:[{label:"计划离职日期",field:"planQuitTime",value:""},{label:"申请离职日期",field:"applyQuitTime",value:""},{label:"薪资结算日期",field:"salarySettlementTime",value:""},{label:"离职类型",field:"quitType",value:""},{label:"离职原因",field:"quitReason",value:""},{label:"备注",field:"remarks",value:""}],leaveList:[],formAddCommond:"",formAddType:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,channelList:[],customFormAddFields:[],customFormAddDialogShow:!1,updateKey:Date.now()}},computed:{dropdownItems:function(){var e=[];return this.editAuth&&this.detail&&3==this.detail.entryStatus&&e.push({label:"调整离职信息",command:"change-leave",icon:""}),e},postDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},formAddTitle:function(){return{"change-leave":"调整离职信息","update-post-info":"编辑岗位信息"}[this.formAddType]}},watch:{id:function(e){this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(c["c"])(this.id).then((function(t){e.loading=!1;var a=t.data.information||[];e.postEditList=Object(v["z"])(a);var i=[];a.forEach((function(e){e.value=e.fieldValue,"employment_forms"==e.fieldName?e.value=b["d"].employmentFormsValue[e.value]:"probation"==e.fieldName?e.value=b["d"].probationValue[e.value]:"status"==e.fieldName?e.value=b["d"].statusValue[e.value]:("user"==e.formType||"structure"==e.formType||"recruit_channel"==e.formType||"area"==e.formType||"company_age"==e.fieldName)&&(e.value=e.fieldValueDesc),i.push(e)}));var n=e.getFormAssistIds([i]),o=[];i.forEach((function(t){if(e.getFormItemDefaultProperty(t,!1),t.show=!n.includes(t.formAssistId),"detail_table"===t.formType){if(!Object(y["c"])(t.value)){var a=t.value;Object(y["a"])(a)&&a.forEach((function(e){e&&e.forEach((function(e){e&&(e.value=e.fieldValue)}))})),t.value=e.getItemValue(t,null,"update")}Object(y["a"])(t.value)||(t.value=[])}t.show&&o.push(t)})),e.postList=[{name:"岗位信息",list:o}];var s=t.data.employeeQuitInfo;if(e.leaveDetail=s,s){var l=[];p["a"].getFields(s).forEach((function(e){var t={label:e.name};"quitType"==e.field?t.value=p["a"].quitTypeValue[s[e.field]]:"quitReason"==e.field?t.value=p["a"].quitReasonValue[s[e.field]]:t.value=s[e.field],l.push(t)})),e.leaveList=[{name:"离职信息",list:l}]}else e.leaveList=[]})).catch((function(){e.loading=!1}))},topCommandSelect:function(e){this.formAddCommond=e,"change-leave"==e&&(this.formAddType="change-leave",this.formAddForm=this.leaveDetail?{planQuitTime:this.leaveDetail.planQuitTime,applyQuitTime:this.leaveDetail.applyQuitTime,salarySettlementTime:this.leaveDetail.salarySettlementTime,quitType:this.leaveDetail.quitType,quitReason:this.leaveDetail.quitReason,remarks:this.leaveDetail.remarks,quitInfoId:this.leaveDetail.quitInfoId}:{quitType:1,quitReason:1},this.formAddRules=p["a"].getRules(this.formAddForm),this.formAddFields=p["a"].getFields(this.formAddForm),this.formAddDialogShow=!0)},formAddPass:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.id,Object(c["d"])(this.formAddForm).then((function(t){e.$refs.formAdddialog.loading=!1,e.$message.success("".concat(e.formAddTitle,"成功")),e.formAddDialogShow=!1,e.getDetail(),e.updateKey=Date.now(),e.$emit("handle",{type:e.formAddCommond})})).catch((function(){e.$refs.formAdddialog.loading=!1}))},customFormAddPass:function(e){var t=this,a=Object(v["z"])(e.field);a.forEach((function(e){if("work_city"==e.fieldName)if(e.value){var t=Object.keys(e.value),a="";t.forEach((function(t){e.value[t]&&(a?a+=",".concat(e.value[t]):a=e.value[t])})),e.value=a}else e.value="";if(45===e.type){var i=e.value;Object(y["a"])(i)&&i.forEach((function(e){e&&e.forEach((function(e){e&&(e.fieldValue=e.value)}))}))}delete e.fieldType,e.fieldValue=e.value,delete e.value}));var i=this.$refs.customFormAdddialog;i.loading=!0;var n={};n.employeeId=this.id,n.dataList=a,Object(c["e"])(n).then((function(e){i.loading=!1,t.$message.success("".concat(t.formAddTitle,"成功")),t.customFormAddDialogShow=!1,t.getDetail(),t.updateKey=Date.now(),t.$emit("handle",{type:t.formAddCommond})})).catch((function(){i.loading=!1}))},postCommandSelect:function(e){var t=this;if("edit"==e){var a=Object(v["z"])(this.postEditList),i=[];a.forEach((function(e){if("company_age"!=e.fieldName&&"become_time"!=e.fieldName){if(t.handleFieldExtendList(e),g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue,t.handleTableValue(e),"work_city"===e.fieldName&&(e.formType="address"),"dept_id"!==e.fieldName&&"parent_id"!==e.fieldName||(e.radio=!0),"employment_forms"==e.fieldName?(e.disabled=!0,e.setting=b["d"].employmentFormsSetting):"probation"==e.fieldName?e.setting=b["d"].probationSetting:"recruit_channel"==e.formType?(e.formType="select",t.channelList&&t.channelList.length>0?e.setting=t.channelList:t.getChannelDetail(e)):"status"==e.fieldName&&(e.setting=b["d"].statusSetting),"detail_table"===e.formType){if(!Object(y["c"])(e.value)){var a=e.value;Object(y["a"])(a)&&a.forEach((function(e){e&&e.forEach((function(e){e&&(e.value=e.fieldValue)}))}))}Object(y["a"])(e.value)||(e.value=[])}if(2==t.detail.employmentForms||1==t.detail.employmentForms&&"status"!=e.fieldName){if("address"==e.formType)if(e.value){var n=e.value.split(",");e.value={province:n[0]||"",city:n[1]||"",area:n[2]||""}}else e.value={};i.push(e)}}})),this.formAddType="update-post-info",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},UniquePromise:function(e){var t=this,a=e.field,i=e.value;return new Promise((function(e,n){Object(s["v"])({fieldId:a.fieldId,id:t.id,value:i}).then((function(t){e()})).catch((function(){n()}))}))},formAddChange:function(e,t,a,i,n){if(i&&(e.valueList=i),"entry_time"==e.field){var o=this.formAddFields.find((function(e){return"company_age_start_time"===e.fieldName}));o&&this.$set(n,o.fieldName,n.entry_time)}"change-leave"===this.formAddType&&"quitType"==e.field&&(1==a?n.quitReason=1:2==a?n.quitReason=11:3==a&&(n.quitReason=""),this.formAddRules=p["a"].getRules(n),this.formAddFields=p["a"].getFields(n))},getChannelDetail:function(e){var t=this;return new Promise((function(a,i){Object(c["f"])().then((function(i){var n=i.data||[];n.forEach((function(e){1==e.status&&(e.label=e.value,e.value=e.channelId)})),t.channelList=n,t.$set(e,"setting",t.channelList),a(t.channelList)})).catch((function(){}))}))},handleTableValue:function(e){if("detail_table"===e.formType){if(!Object(y["c"])(e.value)){var t=e.value;Object(y["a"])(t)&&t.forEach((function(e){e&&e.forEach((function(e){e&&(g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue)}))}))}Object(y["a"])(e.value)||(e.value=[])}},handleFieldExtendList:function(e){if("detail_table"===e.formType&&!Object(y["c"])(e.fieldExtendList)){var t=e.fieldExtendList;Object(y["a"])(t)&&t.forEach((function(e){e&&(g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue)}))}}}},T=w,C=a("2877"),D=Object(C["a"])(T,r,d,!1,null,"7b4e3908",null),F=D.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.updateKey},[a("wk-custom-base-detail",{attrs:{list:e.baseList},scopedSlots:e._u([{key:"data",fn:function(t){var a=t.data;return[e._v(e._s(a.value))]}}])},[e.editAuth?a("el-button",{attrs:{slot:"more",type:"text"},on:{click:function(t){e.baseCommandSelect("edit")}},slot:"more"},[e._v("编辑")]):e._e()],1),e._v(" "),a("wk-custom-base-detail",{attrs:{"dropdown-items":e.communicationDropdownItems,list:e.communicationList},on:{"top-command-select":e.communicationCommandSelect}}),e._v(" "),a("create-sections",{attrs:{title:"教育经历"}},[e._l(e.educationList,(function(t,i){return a("wk-base-detail-section",{key:i,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"education",i)}}})})),e._v(" "),e.editAuth?a("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.educationCreateClick}},[e._v("+ 添加教育经历")]):e._e()],2),e._v(" "),a("create-sections",{attrs:{title:"工作经历"}},[e._l(e.workList,(function(t,i){return a("wk-base-detail-section",{key:i,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"work",i)}}})})),e._v(" "),e.editAuth?a("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.workCreateClick}},[e._v("+ 添加工作经历")]):e._e()],2),e._v(" "),a("create-sections",{attrs:{title:"证书/证件"}},[e._l(e.certificateList,(function(t,i){return a("wk-base-detail-section",{key:i,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"certificate",i)}}})})),e._v(" "),e.editAuth?a("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.certificateCreateClick}},[e._v("+ 添加证书/证件")]):e._e()],2),e._v(" "),a("create-sections",{attrs:{title:"培训经历"}},[e._l(e.trainingList,(function(t,i){return a("wk-base-detail-section",{key:i,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"training",i)}}})})),e._v(" "),e.editAuth?a("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.trainingCreateClick}},[e._v("+ 添加培训经历")]):e._e()],2),e._v(" "),a("create-sections",{attrs:{title:"联系人"}},[e._l(e.contactsList,(function(t,i){return a("wk-custom-base-detail-section",{key:i,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"contacts",i)}}})})),e._v(" "),e.editAuth?a("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.contactsCreateClick}},[e._v("+ 联系人")]):e._e()],2),e._v(" "),a("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass,change:e.formAddChange}}),e._v(" "),e.customFormAddDialogShow?a("custom-form-add-dialog",{ref:"customFormAdddialog",attrs:{id:e.getCustomEditId(),title:e.formAddTitle,fields:e.customFormAddFields,visible:e.customFormAddDialogShow},on:{"update:visible":function(t){e.customFormAddDialogShow=t},pass:e.customFormAddPass}}):e._e()],1)},k=[],S=(a("d81d"),a("a434"),a("a15b"),a("10ff")),x=a("94c8"),I=a("4445"),j={name:"EmployeeBaseInfo",components:{CreateSections:S["a"],WkBaseDetailSection:x["a"],FormAddDialog:f["a"],WkCustomBaseDetail:m["a"],WkCustomBaseDetailSection:I["a"],CustomFormAddDialog:h["a"]},filters:{},mixins:[A["a"]],inject:["editAuth"],props:{id:[String,Number]},data:function(){return{loading:!1,baseEditList:[],baseList:[],communicationEditList:[],communicationList:[],educationBaseList:[],educationList:[],workBaseList:[],workList:[],certificateBaseList:[],certificateList:[],trainingBaseList:[],trainingList:[],contactsBaseList:[],contactsFieldList:[],contactsAddRules:{},contactsList:[],formAddType:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,customFormAddFields:[],customFormAddDialogShow:!1,updateKey:Date.now()}},computed:{baseDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},communicationDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},dropdownItems:function(){return this.editAuth?[{label:"编辑",command:"edit"},{label:"删除",command:"delete"}]:[]},formAddTitle:function(){return{"create-education-experience":"新建教育经历","update-education-experience":"编辑教育经历","create-work-experience":"新建工作经历","update-work-experience":"编辑工作经历","create-certificate":"新建证书/证件","update-certificate":"编辑证书/证件","create-training-experience":"添加培训经历","update-training-experience":"编辑培训经历","create-contacts":"新建联系人","update-contacts":"编辑联系人","update-basic-info":"编辑基本信息","update-contact-info":"编辑通讯信息"}[this.formAddType]}},watch:{id:function(e){this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s["B"])(this.id).then((function(t){e.loading=!1;var a=t.data||{},i=Object(v["z"])(a);e.baseList=[{name:"基本信息",list:e.getCustomFieldListValue(a.information||[])}],e.communicationList=[{name:"通讯信息",list:e.getCustomFieldListValue(a.communicationInformation||[])}],e.baseEditList=i.information||[],e.communicationEditList=i.communicationInformation||[];var n=a.educationExperienceList||[],o=[];e.educationBaseList=n,n.forEach((function(e){var t=[];b["c"].fields.forEach((function(a){var i={};i.label=a.name,"education"===a.field?i.value=b["c"].educationValue[e[a.field]]:"teachingMethods"===a.field?i.value=b["c"].teachingMethodsValue[e[a.field]]:"isFirstDegree"===a.field?i.value=b["c"].isFirstDegreeValue[e[a.field]]:i.value=e[a.field],t.push(i)})),o.push(t)})),e.educationList=o;var s=a.workExperienceList||[];e.workBaseList=s,e.workList=e.getCommonFieldListValue(s,b["g"].fields);var l=a.certificateList||[];e.certificateBaseList=l,e.certificateList=e.getCommonFieldListValue(l,b["a"].fields);var r=a.trainingExperienceList||[];e.trainingBaseList=r,e.trainingList=e.getCommonFieldListValue(r,b["f"].fields);var d=a.hrmEmployeeContacts||[];e.contactsBaseList=i.hrmEmployeeContacts||[],e.contactsList=d.map((function(t){return e.getCustomFieldListValue(t.information||[])})),e.updateKey=Date.now()})).catch((function(){e.loading=!1}))},getCustomFieldListValue:function(e){var t=this;e.forEach((function(e){["id_type","sex","birthday_type","highest_education"].includes(e.fieldName)?e.value=e.fieldValueDesc:e.value=e.fieldValue}));var a=this.getFormAssistIds([e]),i=[];return e.forEach((function(e){if(t.getFormItemDefaultProperty(e,!1),e.show=!a.includes(e.formAssistId),"detail_table"===e.formType){if(!Object(y["c"])(e.value)){var n=e.value;Object(y["a"])(n)&&n.forEach((function(e){e&&e.forEach((function(e){e&&(e.value=e.fieldValue)}))})),e.value=t.getItemValue(e,null,"update")}Object(y["a"])(e.value)||(e.value=[])}e.show&&i.push(e)})),i},getCommonFieldListValue:function(e,t){var a=[];return e.forEach((function(e){var i=[];t.forEach((function(t){var a={};a.label=t.name,a.value=e[t.field],i.push(a)})),a.push(i)})),a},educationCreateClick:function(){this.formAddType="create-education-experience",this.formAddForm={isFirstDegree:1,education:8},this.formAddRules=b["c"].rules,this.formAddFields=b["c"].fields,this.formAddDialogShow=!0},uploadEmployeeRelativeData:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.id;var t=null;"create-education-experience"===this.formAddType?t=s["c"]:"update-education-experience"===this.formAddType?t=s["N"]:"create-work-experience"===this.formAddType?t=s["f"]:"update-work-experience"===this.formAddType?t=s["Q"]:"create-certificate"===this.formAddType?t=s["a"]:"update-certificate"===this.formAddType?t=s["K"]:"create-training-experience"===this.formAddType?t=s["e"]:"update-training-experience"===this.formAddType?t=s["P"]:"create-contacts"===this.formAddType?t=s["b"]:"update-contacts"===this.formAddType&&(t=s["M"]),t(this.formAddForm).then((function(t){e.$refs.formAdddialog.loading=!1,e.$message.success("".concat(e.formAddTitle,"成功")),e.formAddDialogShow=!1,e.updateKey=Date.now(),e.getDetail()})).catch((function(){e.$refs.formAdddialog.loading=!1}))},workCreateClick:function(){this.formAddType="create-work-experience",this.formAddForm={isFirstDegree:1,education:1},this.formAddRules=b["g"].rules,this.formAddFields=b["g"].fields,this.formAddDialogShow=!0},certificateCreateClick:function(){this.formAddType="create-certificate",this.formAddForm={},this.formAddRules=b["a"].rules,this.formAddFields=b["a"].fields,this.formAddDialogShow=!0},trainingCreateClick:function(){this.formAddType="create-training-experience",this.formAddForm={},this.formAddRules=b["f"].rules,this.formAddFields=b["f"].fields,this.formAddDialogShow=!0},contactsCreateClick:function(){var e=this;Object(s["E"])().then((function(t){var a=t.data||[],i=[];a.forEach((function(t){e.handleFieldExtendList(t),g["a"].getCreateFieldDefalutData(t),t.value=t.fieldValue,e.handleTableValue(t),i.push(t)})),e.formAddType="create-contacts",e.formAddForm={},e.customFormAddFields=i,e.customFormAddDialogShow=!0})).catch((function(){}))},getCustomEditId:function(){return"create-contacts"===this.formAddType?"":this.formAddForm.contactsId||this.id},formAddPass:function(){"update-basic-info"==this.formAddType||"update-contacts"==this.formAddType||"create-contacts"==this.formAddType||"update-contact-info"==this.formAddType?this.uploadCustomRelativeData():this.uploadEmployeeRelativeData()},formAddChange:function(e,t,a,i){i&&(e.valueList=i)},customFormAddPass:function(e){var t=this,a=Object(v["z"])(e.field);a.forEach((function(e){if("native_place"==e.fieldName)if(e.value){var t=Object.keys(e.value),a="";t.forEach((function(t){e.value[t]&&(a?a+=",".concat(e.value[t]):a=e.value[t])})),e.value=a}else e.value="";if(45===e.type){var i=e.value;Object(y["a"])(i)&&i.forEach((function(e){e&&e.forEach((function(e){e&&(e.fieldValue=e.value)}))}))}delete e.fieldType,e.fieldValue=e.value,delete e.value}));var i=this.$refs.customFormAdddialog;i.loading=!0;var n={};n.employeeId=this.id,n.dataList=a;var o=null;"update-basic-info"===this.formAddType?o=s["S"]:"update-contacts"===this.formAddType?(o=s["M"],n.contactsId=this.formAddForm.contactsId):"create-contacts"===this.formAddType?o=s["b"]:"update-contact-info"===this.formAddType&&(o=s["R"]),o(n).then((function(e){i.loading=!1,t.$message.success("".concat(t.formAddTitle,"成功")),t.customFormAddDialogShow=!1,t.getDetail(),t.updateKey=Date.now(),t.$emit("handle",{type:"update"})})).catch((function(){i.loading=!1}))},commandSelect:function(e,t,a){var i=this;if("education"==t){var n=this.educationBaseList[a];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["n"])(n.educationId).then((function(e){i.$message.success("删除成功"),i.educationBaseList.splice(a,1),i.educationList.splice(a,1)}))})).catch((function(){})):"edit"==e&&(this.formAddType="update-education-experience",this.formAddForm={education:n.education,graduateSchool:n.graduateSchool,major:n.major,admissionTime:n.admissionTime,graduationTime:n.graduationTime,teachingMethods:n.teachingMethods,isFirstDegree:n.isFirstDegree,educationId:n.educationId},this.formAddRules=b["c"].rules,this.formAddFields=b["c"].fields,this.formAddDialogShow=!0)}else if("work"==t){var o=this.workBaseList[a];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["p"])(o.workExpId).then((function(e){i.$message.success("删除成功"),i.workBaseList.splice(a,1),i.workList.splice(a,1)}))})).catch((function(){})):"edit"==e&&(this.formAddType="update-work-experience",this.formAddForm={workUnit:o.workUnit,post:o.post,workStartTime:o.workStartTime,workEndTime:o.workEndTime,leavingReason:o.leavingReason,witness:o.witness,witnessPhone:o.witnessPhone,workRemarks:o.workRemarks,workExpId:o.workExpId},this.formAddRules=b["g"].rules,this.formAddFields=b["g"].fields,this.formAddDialogShow=!0)}else if("certificate"==t){var l=this.certificateBaseList[a];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["l"])(l.certificateId).then((function(e){i.$message.success("删除成功"),i.certificateBaseList.splice(a,1),i.certificateList.splice(a,1)}))})).catch((function(){})):"edit"==e&&(this.formAddType="update-certificate",this.formAddForm={certificateName:l.certificateName,certificateLevel:l.certificateLevel,certificateNum:l.certificateNum,startTime:l.startTime,endTime:l.endTime,issuingAuthority:l.issuingAuthority,issuingTime:l.issuingTime,remarks:l.remarks,certificateId:l.certificateId},this.formAddRules=b["a"].rules,this.formAddFields=b["a"].fields,this.formAddDialogShow=!0)}else if("training"==t){var r=this.trainingBaseList[a];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["o"])(r.trainingId).then((function(e){i.$message.success("删除成功"),i.trainingBaseList.splice(a,1),i.trainingList.splice(a,1)}))})).catch((function(){})):"edit"==e&&(this.formAddType="update-training-experience",this.formAddForm={trainingCourse:r.trainingCourse,trainingOrganName:r.trainingOrganName,startTime:r.startTime,endTime:r.endTime,trainingDuration:r.trainingDuration,trainingResults:r.trainingResults,trainingCertificateName:r.trainingCertificateName,remarks:r.remarks,trainingId:r.trainingId},this.formAddRules=b["f"].rules,this.formAddFields=b["f"].fields,this.formAddDialogShow=!0)}else if("contacts"==t){var d=Object(v["z"])(this.contactsBaseList[a]);if("delete"==e)this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["m"])(d.contactsId).then((function(e){i.$message.success("删除成功"),i.contactsBaseList.splice(a,1),i.contactsList.splice(a,1)}))})).catch((function(){}));else if("edit"==e){var c=Object(v["z"])(d.information||[]),u=[];c.forEach((function(e){i.handleFieldExtendList(e),g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue,i.handleTableValue(e),u.push(e)})),this.formAddType="update-contacts",this.formAddForm={contactsId:d.contactsId},this.customFormAddFields=u,this.customFormAddDialogShow=!0}}},baseCommandSelect:function(e){var t=this;if("edit"==e){var a=Object(v["z"])(this.baseEditList),i=[];a.forEach((function(e){if("age"!=e.fieldName){if(t.handleFieldExtendList(e),g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue,t.handleTableValue(e),"city"==e.formType)if(e.value){var a=e.value.split(",");e.value={province:a[0]||"",city:a[1]||""}}else e.value={};i.push(e)}})),this.formAddType="update-basic-info",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},handleTableValue:function(e){if("detail_table"===e.formType){if(!Object(y["c"])(e.value)){var t=e.value;Object(y["a"])(t)&&t.forEach((function(e){e&&e.forEach((function(e){e&&(g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue)}))}))}Object(y["a"])(e.value)||(e.value=[])}},handleFieldExtendList:function(e){if("detail_table"===e.formType&&!Object(y["c"])(e.fieldExtendList)){var t=e.fieldExtendList;Object(y["a"])(t)&&t.forEach((function(e){e&&(g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue)}))}},communicationCommandSelect:function(e){var t=this;if("edit"==e){var a=Object(v["z"])(this.communicationEditList),i=[];a.forEach((function(e){t.handleFieldExtendList(e),g["a"].getCreateFieldDefalutData(e),e.value=e.fieldValue,t.handleTableValue(e),i.push(e)})),this.formAddType="update-contact-info",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},UniquePromise:function(e){var t=this,a=e.field,i=e.value;return new Promise((function(e,n){Object(s["v"])({fieldId:a.fieldId,id:t.formAddForm.contactsId||t.id,value:i}).then((function(t){e()})).catch((function(){n()}))}))},uploadCustomRelativeData:function(){var e=this;this.$refs.formAdddialog.loading=!0;var t={employeeId:this.id};this.formAddFields.forEach((function(t){if(t.oldFieldValueDesc=t.fieldValueDesc,"city"==t.formType){var a=e.formAddForm[t.field]||{},i=[];for(var n in a)a[n]&&i.push(a[n]);t.fieldValue=i.join(",")}else t.fieldValue=e.formAddForm[t.field];"user"==t.formType?t.valueList?t.fieldValueDesc=t.valueList.map((function(e){return e.employeeName})).join("，"):t.fieldValue&&t.valueList:"structure"==t.formType?t.valueList?t.fieldValueDesc=t.valueList.map((function(e){return e.name})).join("，"):t.fieldValue&&t.valueList:"id_type"==t.field?t.fieldValueDesc=b["d"].idTypeValue[t.fieldValue]:"sex"==t.field?t.fieldValueDesc=b["d"].sexValue[t.fieldValue]:"birthday_type"==t.field?t.fieldValueDesc=b["d"].birthdayTypeValue[t.fieldValue]:"highest_education"==t.field?t.fieldValueDesc=b["c"].educationValue[t.fieldValue]:t.fieldValueDesc=t.fieldValue})),t.dataList=this.formAddFields;var a=null;"update-basic-info"===this.formAddType?a=s["S"]:"update-contacts"===this.formAddType?(a=s["M"],t.contactsId=this.formAddForm.contactsId):"create-contacts"===this.formAddType?a=s["b"]:"update-contact-info"===this.formAddType&&(a=s["R"]),a(t).then((function(t){e.$refs.formAdddialog.loading=!1,e.$message.success("".concat(e.formAddTitle,"成功")),e.formAddDialogShow=!1,e.getDetail()})).catch((function(){e.$refs.formAdddialog.loading=!1}))}}},L=j,E=(a("3c79"),Object(C["a"])(L,_,k,!1,null,"3f98ae48",null)),O=E.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("create-sections",{attrs:{title:"合同信息"}},[e._l(e.contractList,(function(t,i){return a("wk-base-detail-section",{key:i,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,i)}}},[a("div",{staticStyle:{flex:"0 0 80%"}},e._l(e.contractBaseList[i].fileList,(function(t,n){return a("wk-file-cell",{key:n,attrs:{data:t,list:e.contractBaseList[i].fileList,index:n}})})))])})),e._v(" "),e.editAuth?a("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.contractCreateClick}},[e._v("+ 添加合同")]):e._e()],2),e._v(" "),a("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.uploadEmployeeRelativeData,change:e.formAddDialogChange}},[a("div",{staticClass:"contract-files"},[a("wk-file-select",{staticStyle:{display:"inline-block"},attrs:{multiple:""},on:{change:e.fileSelect}},[a("el-button",{attrs:{type:"text"}},[e._v("添加合同附件")])],1),e._v(" "),e._l(e.fileList,(function(t,i){return a("wk-file-cell",{key:i,attrs:{data:t,list:e.fileList,index:i,"delete-show":""},on:{delete:e.fileDelete}})}))],2)])],1)},R=[],V=a("b775");function B(e){return Object(V["a"])({url:"hrmEmployeeContract/contractInformation/".concat(e),method:"post"})}function $(e){return Object(V["a"])({url:"hrmEmployeeContract/addContract",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function q(e){return Object(V["a"])({url:"hrmEmployeeContract/setContract",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function P(e){return Object(V["a"])({url:"hrmEmployeeContract/deleteContract/".concat(e),method:"post"})}var U=a("b5b9"),z=a("3f02"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"wk-file-cell"},[a("img",{staticClass:"wk-file-cell__header",attrs:{src:e.fileIcon,alt:""}}),e._v(" "),a("div",{staticClass:"wk-file-cell__body text-one-line",class:{"cursor-pointer":e.cursorPointer}},[e._v("\n    "+e._s(e.fileName.length>20?e.fileName.substring(0,20)+"...":e.fileName)+"\n  ")]),e._v(" "),a("div",{staticClass:"wk-file-cell__size"},[e._v("\n    ("+e._s(e._f("getFileSize")(e.data.size))+")\n  ")]),e._v(" "),a("div",{staticClass:"wk-file-cell__footer"},[e.previewShow?a("span",{staticClass:"xr-text-btn primary",on:{click:e.previewClick}},[e._v("预览")]):e._e(),e._v(" "),a("span",{staticClass:"xr-text-btn primary",on:{click:e.downloadClick}},[e._v("下载")]),e._v(" "),e.deleteShow?a("span",{staticClass:"xr-text-btn delete",on:{click:e.deleteClick}},[e._v("删除")]):e._e()])])},G=[],H=a("2934"),W={name:"WkFileCell",filters:{getFileSize:function(e){return Object(v["g"])(e)}},props:{index:Number,data:Object,list:Array,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},previewShow:{type:Boolean,default:!0},deleteShow:{type:Boolean,default:!1}},data:function(){return{}},computed:{fileName:function(){return this.data?this.data.name||this.data.fileName:""},fileIcon:function(){var e=this.fileName?this.fileName.split("."):[],t="";return t=e.length>0?e[e.length-1]:"",Object(v["m"])(t)}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){var e=this;Object(H["h"])(this.data.url).then((function(t){Object(v["f"])(t.data,e.data.name)})).catch((function(){}))},previewClick:function(){Object(v["a"])(this.fileName)?Object(v["I"])(this.data.url,this.fileName):this.$wkPreviewFile.preview({index:this.index||0,data:this.list.map((function(e){return{url:e.url,name:e.name}}))})},deleteClick:function(){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("delete",e.data,e.index)})).catch((function(){}))}}},K=W,Q=(a("f85c"),Object(C["a"])(K,M,G,!1,null,"c2587f14",null)),J=Q.exports,Y=a("92af"),X={name:"EmployeeContract",components:{CreateSections:S["a"],WkBaseDetailSection:x["a"],FormAddDialog:f["a"],WkFileSelect:z["a"],WkFileCell:J},inject:["editAuth"],props:{id:[String,Number]},data:function(){return{loading:!1,contractList:[],contractBaseList:[],formAddType:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,batchId:"",fileList:[]}},computed:{dropdownItems:function(){return this.editAuth?[{label:"编辑",command:"edit"},{label:"删除",command:"delete"}]:[]},formAddTitle:function(){return{"create-contract":"添加合同","update-contract":"编辑合同"}[this.formAddType]}},watch:{id:{handler:function(){this.getDetail()},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,B(this.id).then((function(t){e.loading=!1;var a=t.data||[];e.contractBaseList=a,e.contractList=e.getCommonFieldListValue(a)})).catch((function(){e.loading=!1}))},getCommonFieldListValue:function(e){var t=[];return e.forEach((function(e){var a=[];Y["a"].getFields(e).forEach((function(t){var i={};i.label=t.name,"contractType"===t.field?i.value=Y["a"].contractTypeValue[e[t.field]]:"term"===t.field?i.value=Y["a"].termValue[e[t.field]]:"status"===t.field?i.value=Y["a"].statusValue[e[t.field]]:i.value=e[t.field],a.push(i)})),t.push(a)})),t},contractCreateClick:function(){this.batchId=Object(v["x"])(),this.fileList=[],this.formAddType="create-contract",this.formAddForm={contractType:1,term:1,status:0},this.formAddRules=Y["a"].getRules(this.formAddForm),this.formAddFields=Y["a"].getFields(this.formAddForm),this.formAddDialogShow=!0},formAddDialogChange:function(e,t,a,i){"contractType"===e.field&&(this.formAddRules=Y["a"].getRules({contractType:a}),this.formAddFields=Y["a"].getFields({contractType:a}))},uploadEmployeeRelativeData:function(){var e=this;this.formAddDialogShow=!0,this.formAddForm.batchId=this.batchId,this.formAddForm.employeeId=this.id;var t=null;"create-contract"===this.formAddType?t=$:"update-contract"===this.formAddType&&(t=q),t(this.formAddForm).then((function(t){e.formAddDialogShow=!1,e.$message.success("".concat(e.formAddTitle,"成功")),e.formAddDialogShow=!1,e.getDetail()})).catch((function(){e.formAddDialogShow=!1}))},commandSelect:function(e,t){var a=this,i=this.contractBaseList[t];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){P(i.contractId).then((function(e){a.$message.success("删除成功"),a.contractBaseList.splice(t,1),a.contractList.splice(t,1)}))})).catch((function(){})):"edit"==e&&(this.formAddType="update-contract",this.formAddForm={contractNum:i.contractNum,contractType:i.contractType,startTime:i.startTime,endTime:i.endTime,term:i.term,status:i.status,signCompany:i.signCompany,signTime:i.signTime,remarks:i.remarks,contractId:i.contractId},this.batchId=i.batchId,this.fileList=i.fileList||[],this.formAddRules=Y["a"].getRules(this.formAddForm),this.formAddFields=Y["a"].getFields(this.formAddForm),this.formAddDialogShow=!0)},fileSelect:function(e,t){for(var a=0;a<e.length;a++){var i=e[a];this.uploadFileRequest(i)}t.target.value=""},uploadFileRequest:function(e){var t=this;this.$wkUploadFile.upload({request:U["h"],file:e,params:{batchId:this.batchId}}).then((function(e){var a=e.res;t.fileList.push(a.data)})).catch((function(){}))},fileDelete:function(e,t){var a=this;Object(U["b"])(e.fileId).then((function(e){a.fileList.splice(t,1)})).catch((function(){}))}}},Z=X,ee=(a("039a"),Object(C["a"])(Z,N,R,!1,null,"23fd5289",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"b-cont"},[a("create-sections",{attrs:{"dropdown-items":e.cardDropdownItems,title:"工资卡信息"},on:{"command-select":e.cardCommandSelect}},[a("wk-base-detail-section",{attrs:{list:e.cardList}})],1),e._v(" "),a("create-sections",{attrs:{"dropdown-items":e.securityDropdownItems,title:"社保信息"},on:{"command-select":e.securityCommandSelect}},[a("wk-base-detail-section",{attrs:{list:e.securityList}})],1),e._v(" "),a("create-sections",{staticClass:"b-cells",attrs:{title:"薪资信息"}},[a("div",{staticClass:"money-table"},[a("el-table",{attrs:{data:e.moneyList,"cell-class-name":e.cellClassName,height:"300",border:"",align:"center"},on:{"row-click":e.handleRowClick}},e._l(e.fieldList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,width:e.width,label:e.label}})}))),e._v(" "),a("div",{staticClass:"p-contianer"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),a("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.uploadEmployeeRelativeData}}),e._v(" "),a("money-detail-dialog",{attrs:{detail:e.moneyData,visible:e.detailDialogShow},on:{"update:visible":function(t){e.detailDialogShow=t}}})],1)},ie=[],ne=(a("99af"),a("41e8")),oe=a("cccc"),se=[{name:"工资卡卡号",field:"salaryCardNum",formType:"text",setting:[]},{name:"工资卡开户城市",field:"accountOpeningCity",formType:"text",setting:[]},{name:"银行名称",field:"bankName",formType:"text",setting:[]},{name:"工资卡开户行",field:"openingBank",formType:"text",setting:[]}],le={salaryCardNum:[{required:!0,message:"请选择",trigger:["change","blur"]}]},re={fields:se,rules:le},de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"500px"},on:{close:e.handleCancel}},[a("div",{staticClass:"moeny-dialog-body"},[a("div",{staticClass:"money-header"},[a("div",{staticClass:"money-header__title"},[e._v(e._s(e.detail?e.detail.realSalary:0))]),e._v(" "),a("div",{staticClass:"money-header__des"},[e._v("实发金额（元）")])]),e._v(" "),e._l(e.list,(function(t,i){return a("flexbox",{key:i,staticClass:"money-item"},[a("div",{staticClass:"money-item__title text-one-line"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"money-item__value"},[e._v(e._s(t.value))])])}))],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("关闭")])],1)])},ce=[],ue=a("9dba"),me={name:"MoneyDetailDialog",components:{},mixins:[ue["a"]],props:{detail:Object,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"明细详情",list:[]}},computed:{},watch:{visible:{handler:function(e){e&&this.getDetail()},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.close()},close:function(){this.$emit("update:visible",!1)},getDetail:function(){var e=this;this.loading=!0,Object(ne["d"])(this.detail.sempRecordId).then((function(t){e.list=t.data||[],e.loading=!1})).catch((function(){e.loading=!1}))}}},fe=me,he=(a("93a0"),Object(C["a"])(fe,de,ce,!1,null,"73dc512b",null)),pe=he.exports,ge={isFirstSocialSecurity:[{required:!0,message:"请选择",trigger:["blur","change"]}],isFirstAccumulationFund:[{required:!0,message:"请选择",trigger:["blur","change"]}]};function ve(e,t){return[{name:"是否本地首次缴纳社保",field:"isFirstSocialSecurity",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]},{name:"是否本地首次缴纳公积金",field:"isFirstAccumulationFund",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]},{name:"个人社保账号",field:"socialSecurityNum",formType:"text",setting:[]},{name:"个人公积金账号",field:"accumulationFundNum",formType:"text",setting:[]},{name:"参保起始月份",field:"socialSecurityStartMonth",formType:"date",disabled:!0,setting:[]},{name:"参保方案",field:"schemeId",formType:"select",setting:e||[],disabled:!t||!t.setInsured}]}var ye={getFields:ve,rules:ge},be={name:"EmployeeMoney",components:{CreateSections:S["a"],FormAddDialog:f["a"],WkBaseDetailSection:x["a"],MoneyDetailDialog:pe},inject:["editAuth","employeeAuth"],props:{id:[String,Number]},data:function(){return{loading:!1,list:[],formAddType:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,cardData:null,cardList:[],securityData:null,securityList:[],schemeList:[],moneyList:[],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,fieldList:[{prop:"yearMonth",label:"计薪月份",width:"150"},{prop:"time",label:"计薪周期",width:"220"},{prop:"shouldSalary",label:"应发工资"},{prop:"personalTax",label:"个人所得税"},{prop:"realSalary",label:"实发工资"}],moneyData:null,detailDialogShow:!1}},computed:{cardDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},securityDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},formAddTitle:function(){return{"create-wage-card":"添加工资卡","update-wage-card":"编辑工资卡","create-social-security":"添加社保","update-social-security":"编辑社保"}[this.formAddType]}},watch:{id:{handler:function(){this.getDetail(),this.refreshList()},immediate:!0}},mounted:function(){},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(ne["c"])(this.id).then((function(t){var a=t.data||{};e.cardData=a.salaryCard;var i=[];re.fields.forEach((function(t){i.push({label:t.name,value:e.cardData?e.cardData[t.field]:""})})),e.cardList=i,e.securityData=a.socialSecurityInfo;var n=[],o=ye.getFields(null,e.employeeAuth);o.forEach((function(t){var a=e.securityData?e.securityData[t.field]:"";"isFirstSocialSecurity"===t.field||"isFirstAccumulationFund"===t.field?a={0:"否",1:"是"}[a]:"schemeId"===t.field&&(a=e.securityData?e.securityData.schemeName:""),n.push({label:t.name,value:a})})),e.securityList=n,e.loading=!1})).catch((function(){e.loading=!1}))},cardCommandSelect:function(e){"edit"==e&&(this.formAddType="update-wage-card",this.formAddForm=this.cardData?{salaryCardNum:this.cardData.salaryCardNum||"",accountOpeningCity:this.cardData.accountOpeningCity||"",bankName:this.cardData.bankName||"",openingBank:this.cardData.openingBank||"",salaryCardId:this.cardData.salaryCardId||""}:{},this.formAddRules=re.rules,this.formAddFields=re.fields,this.formAddDialogShow=!0)},securityCommandSelect:function(e){var t=this;"edit"==e&&(this.formAddType="update-social-security",this.formAddForm=this.securityData?{isFirstSocialSecurity:this.securityData.isFirstSocialSecurity,isFirstAccumulationFund:this.securityData.isFirstAccumulationFund,socialSecurityNum:this.securityData.socialSecurityNum,accumulationFundNum:this.securityData.accumulationFundNum,socialSecurityStartMonth:this.securityData.socialSecurityStartMonth,socialSecurityInfoId:this.securityData.socialSecurityInfoId,schemeId:this.securityData.schemeId}:{isFirstSocialSecurity:0,isFirstAccumulationFund:0},this.formAddRules=ye.rules,this.getSchemList().then((function(){t.formAddFields=ye.getFields(t.schemeList,t.employeeAuth),t.formAddDialogShow=!0})))},getSchemList:function(){var e=this;return new Promise((function(t,a){e.schemeList.length?t():Object(oe["l"])({pageType:0}).then((function(a){e.schemeList=a.data.list.map((function(e){return{label:e.schemeName,value:e.schemeId}})),t()})).catch((function(){a&&a()}))}))},uploadEmployeeRelativeData:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.id;var t=null;"create-wage-card"===this.formAddType?t=ne["a"]:"update-wage-card"===this.formAddType?t=ne["f"]:"create-social-security"===this.formAddType?t=ne["b"]:"update-social-security"===this.formAddType&&(t=ne["g"]),t(this.formAddForm).then((function(t){e.$refs.formAdddialog.loading=!1,e.$message.success("".concat(e.formAddTitle,"成功")),e.formAddDialogShow=!1,e.getDetail()})).catch((function(){e.$refs.formAdddialog.loading=!1}))},cellClassName:function(e){e.row,e.column,e.rowIndex;var t=e.columnIndex;return 0==t?"can-visit--underline":""},handleRowClick:function(e,t,a){"yearMonth"==t.property&&(this.moneyData=e,this.detailDialogShow=!0)},refreshList:function(){this.handleCurrentChange(1)},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t={page:this.currentPage,limit:this.pageSize,employeeId:this.id};Object(ne["e"])(t).then((function(t){var a=t.data.list;a.forEach((function(e){e.time="".concat(e.startTime," ~ ").concat(e.endTime),e.yearMonth="".concat(e.year,"-").concat(e.month)})),e.moneyList=a,e.total=t.data.totalRow,t.data.totalRow&&Math.ceil(t.data.totalRow/e.pageSize)<e.currentPage&&e.currentPage>1?(e.currentPage=e.currentPage-1,e.getList()):(e.total=t.data.totalRow,e.loading=!1),e.loading=!1})).catch((function(){e.loading=!1}))}}},Ae=be,we=(a("ce10"),Object(C["a"])(Ae,ae,ie,!1,null,"7eda4e5e",null)),Te=we.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"contianer"},[a("div",e._l(e.allData,(function(t,i){return a("sections",{directives:[{name:"show",rawName:"v-show",value:1==t.name.length&&-1==e.showDetailIndex||t.name.length>1&&e.showDetailIndex==i,expression:"(bigItem.name.length == 1 && showDetailIndex == -1) || bigItem.name.length > 1 && showDetailIndex == bigIndex"}],key:i,staticClass:"file-sections",attrs:{index:i,titles:t.name,"content-height":"auto"},on:{"on-titles-click":e.onTitlesClick}},[1==t.name.length&&-1==e.showDetailIndex?a("div",{staticClass:"files-box-class"},[a("flexbox",{attrs:{gutter:0,wrap:"wrap"}},[e._l(t.unfold?t.list:t.list.slice().splice(0,2),(function(n,o){return a("flexbox-item",{key:o,staticClass:"cell",attrs:{span:1/4}},[a("div",{staticClass:"cell-box"},[a("div",{staticClass:"cell-body"},[a("i",{staticClass:"cell-body-icon",class:n.icon})]),e._v(" "),a("div",{staticClass:"cell-footer"},[e._v("\n                "+e._s(n.name)),n.count>0?a("span",[e._v("（"+e._s(n.count)+"）")]):e._e()]),e._v(" "),a("div",{staticClass:"cell-handle"},[a("div",{staticClass:"handle-items"},[n.count>0?a("span",{staticClass:"handle-item",on:{click:function(a){e.previewDetail(t,i,n,o)}}},[a("i",{staticClass:"wk wk-icon-eye-solid"})]):e._e(),e._v(" "),a("span",{staticClass:"handle-item",on:{click:function(a){e.checkDetail(t,i,n,o)}}},[a("i",{staticClass:"wk wk-folder"})])])])])])})),e._v(" "),a("flexbox-item",{staticClass:"cell",attrs:{span:1/4}},[a("div",{staticClass:"cell-unfold-box"},[t.unfold?a("flexbox",{staticClass:"unfold-button unfold-button-positon",nativeOn:{click:function(a){e.unfloadFiles(t,i)}}},[a("i",{staticClass:"el-icon-d-arrow-left unfold-button-icon"}),e._v(" "),a("div",{staticClass:"unfold-button-name"},[e._v("收起")])]):a("flexbox",{staticClass:"unfold-button unfold-button-positon",nativeOn:{click:function(a){e.unfloadFiles(t,i)}}},[a("div",{staticClass:"more-button-name"},[e._v("更多")]),e._v(" "),a("i",{staticClass:"el-icon-d-arrow-right more-button-icon"})])],1)])],2)],1):e._e(),e._v(" "),t.name.length>1&&e.showDetailIndex==i?a("div",{staticClass:"files-box-detail"},[a("flexbox",{attrs:{gutter:0,wrap:"wrap"}},[e.editAuth?a("flexbox-item",{staticClass:"detail-cell",attrs:{span:1/3}},[a("div",{staticClass:"cell-upload-box"},[a("el-upload",{attrs:{"show-file-list":!1,"http-request":e.fileUpload,action:"http",drag:"",multiple:""}},[a("i",{staticClass:"wk wk-icon-upload upload-icon"}),e._v(" "),a("div",{staticClass:"upload-name"},[e._v("点击或拖拽上传")])])],1)]):e._e(),e._v(" "),e._l(e.detailList,(function(t,i){return a("flexbox-item",{key:i,staticClass:"detail-cell",attrs:{span:1/3}},[a("div",{staticClass:"detail-cell-box"},[a("div",{staticClass:"detail-cell-body"},[a("span",[e.isShowImage(t.file.name)?a("img",{directives:[{name:"src",rawName:"v-src",value:t.file.url,expression:"item.file.url"}],key:t.file.url}):e._e(),e._v(" "),e.isShowImage(t.file.name)?e._e():a("img",{directives:[{name:"src",rawName:"v-src",value:e.getFileTypeIcon(t.file.url),expression:"getFileTypeIcon(item.file.url)"}],key:t.file.url})]),e._v(" "),a("div",{staticClass:"body-handle"},[a("div",{staticClass:"handle-items"},[a("span",{staticClass:"handle-item",on:{click:function(a){e.previewFile(t,i)}}},[a("i",{staticClass:"wk wk-icon-eye-solid"})])])])]),e._v(" "),a("flexbox",{staticClass:"detail-cell-footer"},[e.editDetailIndex!=i?a("div",{staticClass:"footer-name"},[e._v(e._s(t.file.name))]):e._e(),e._v(" "),e.editDetailIndex==i?a("el-input",{ref:"editInput",refInFor:!0,attrs:{autofocus:"",placeholder:"请输入内容"},on:{blur:e.editInputBlur},model:{value:e.editInputContent,callback:function(t){e.editInputContent=t},expression:"editInputContent"}}):e._e(),e._v(" "),e.editAuth?a("i",{staticClass:"wk wk-edit footer-item",on:{click:function(a){e.handleDetailItemClick("edit",t,i)}}}):e._e(),e._v(" "),e.editAuth?a("i",{staticClass:"wk wk-s-delete footer-item",on:{click:function(a){e.handleDetailItemClick("delete",t,i)}}}):e._e(),e._v(" "),a("i",{staticClass:"wk wk-b-download footer-item",on:{click:function(a){e.handleDetailItemClick("download",t,i)}}})],1)],1)])}))],2)],1):e._e()])})))])},De=[],Fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"section"},[e.title&&e.title.length>0?i("div",{staticClass:"section-header"},[i("div",{staticClass:"section-mark",style:{"border-left-color":e.mColor}}),e._v(" "),i("div",{staticClass:"section-title"},[e._v(e._s(e.title))]),e._v(" "),e.showHandle?i("el-dropdown",{on:{command:e.handleTypeDrop}},[e.showHandle?i("span",{staticClass:"handle-button"},[e._v("\n        操作"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"edit"}},[e._v("编辑")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"delete"}},[e._v("删除")])],1)],1):e._e()],1):e._e(),e._v(" "),e.titles.length>0?i("div",{staticClass:"section-header"},[i("div",{staticClass:"section-mark",style:{"border-left-color":e.mColor}}),e._v(" "),i("el-breadcrumb",{staticStyle:{padding:"5px 0","margin-left":"8px"},attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.titles,(function(t,a){return i("el-breadcrumb-item",{key:a},[i("span",{staticClass:"section-titles-name",on:{click:function(a){e.titlesClick(t,e.index)}}},[e._v(e._s(t))])])})))],1):e._e(),e._v(" "),i("div",{staticClass:"content",style:{height:e.contentHeight}},[e.showNoData?i("div",{staticClass:"no-data-container"},[i("img",{staticClass:"no-data",attrs:{src:a("32a2")}}),e._v(" "),i("div",{staticClass:"no-data-name"},[e._v("暂无数据")])]):e._e(),e._v(" "),e._t("default")],2)])},_e=[],ke={name:"Sections",components:{},props:{title:{type:String,default:""},titles:{type:Array,default:function(){return[]}},mColor:{type:String,default:"#2362FB"},contentHeight:{type:String,default:"327px"},showNoData:{type:Boolean,default:!1},showHandle:{type:Boolean,default:!1},index:Number},data:function(){return{}},computed:{},mounted:function(){},methods:{handleTypeDrop:function(e){this.$emit("on-handle",{type:e,index:this.index})},titlesClick:function(e,t){this.$emit("on-titles-click",{item:e,itemIndex:t,index:this.index})}}},Se=ke,xe=(a("69b2"),Object(C["a"])(Se,Fe,_e,!1,null,"1d9027e6",null)),Ie=xe.exports,je={name:"EmployeeFiles",components:{Sections:Ie},inject:["editAuth"],props:{id:[String,Number]},data:function(){return{loading:!1,baseList:[],recordList:[],leaveList:[],allData:[],showDetailIndex:-1,showDetailSubIndex:-1,editDetailItem:{},editDetailIndex:-1,editInputContent:"",detailList:[]}},computed:{},watch:{id:{handler:function(){this.initInfo(),this.getBaseInfo()},immediate:!0}},mounted:function(){},activated:function(){},deactivated:function(){},methods:{initInfo:function(){this.showDetailIndex=-1,this.showDetailSubIndex=-1,this.editDetailItem={},this.editDetailIndex=-1,this.editInputContent="",this.detailList=[],this.baseList=[{name:"身份证原件照片",icon:"wk wk-icon-credentials",count:0,subType:11},{name:"学历证明",icon:"wk wk-icon-medal",count:0,subType:12},{name:"个人证件照",icon:"wk wk-icon-my",count:0,subType:13},{name:"身份证复印件",icon:"wk wk-icon-copy",count:0,subType:14},{name:"工资银行卡",icon:"wk wk-icon-bankcard",count:0,subType:15},{name:"社保卡",icon:"wk wk-icon-license",count:0,subType:16},{name:"公积金卡",icon:"wk wk-icon-home",count:0,subType:17},{name:"获奖证书",icon:"wk wk-icon-barrage",count:0,subType:18},{name:"其他",icon:"wk wk-icon-setup",count:0,subType:19}],this.recordList=[{name:"劳动合同",icon:"wk wk-icon-star-contract",count:0,subType:21},{name:"入职简历",icon:"wk wk-icon-personal-data",count:0,subType:22},{name:"入职登记表",icon:"wk wk-icon-handle-log",count:0,subType:23},{name:"入职体检单",icon:"wk wk-icon-health-data",count:0,subType:24},{name:"上家公司离职证明",icon:"wk wk-icon-bevel-contract",count:0,subType:25},{name:"转正申请表",icon:"wk wk-icon-contract",count:0,subType:26},{name:"其他",icon:"wk wk-icon-setup",count:0,subType:27}],this.leaveList=[{name:"离职审批",icon:"wk wk-icon-seal",count:0,subType:31},{name:"离职证明",icon:"wk wk-icon-forbid-user",count:0,subType:32},{name:"其他",icon:"wk wk-icon-setup",count:0,subType:33}],this.allData=[{name:["员工基本资料"],list:this.baseList,unfold:!1},{name:["员工档案资料"],list:this.recordList,unfold:!1},{name:["员工离职资料"],list:this.leaveList,unfold:!1}]},getBaseInfo:function(){var e=this;Object(s["A"])(this.id).then((function(t){for(var a=t.data||{},i=0;i<e.baseList.length;i++){var n=e.baseList[i];n.count=a["subType".concat(n.subType)]}for(var o=0;o<e.recordList.length;o++){var s=e.recordList[o];s.count=a["subType".concat(s.subType)]}for(var l=0;l<e.leaveList.length;l++){var r=e.leaveList[l];r.count=a["subType".concat(r.subType)]}})).catch((function(){}))},fileUpload:function(e){var t=this;this.$wkUploadFile.upload({request:U["h"],file:e.file}).then((function(e){t.loading=!0;var a=t.allData[t.showDetailIndex].list[t.showDetailSubIndex];Object(s["x"])({employeeId:t.id,subType:a.subType,fileId:e.res.data.fileId}).then((function(e){t.loading=!1,t.getSubDetail()})).catch((function(){t.loading=!1}))})).catch((function(){}))},checkDetail:function(e,t,a,i){e.name.push(a.name),this.showDetailIndex=t,this.showDetailSubIndex=i,this.getSubDetail()},previewDetail:function(e,t,a,i){var n=this;this.loading=!0,Object(s["z"])({employeeId:this.id,subType:a.subType}).then((function(e){n.loading=!1;var t=e.data.map((function(e){return e.file}));n.$wkPreviewFile.preview({index:0,data:t})})).catch((function(){n.loading=!1}))},getSubDetail:function(){var e=this;this.loading=!0;var t=this.allData[this.showDetailIndex].list[this.showDetailSubIndex];Object(s["z"])({employeeId:this.id,subType:t.subType}).then((function(t){e.detailList=t.data,e.loading=!1})).catch((function(){e.loading=!1}))},handleDetailItemClick:function(e,t,a){var i=this;if("edit"==e){this.editDetailItem=t,this.editDetailIndex=a,this.editInputContent=t.file.name;var n=this;setTimeout((function(){n.$refs.editInput[0].focus()}),100)}else"delete"==e?this.$confirm("您确定要删除此附件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["y"])(t.employeeFileId).then((function(e){i.detailList.splice(a,1),i.$message.success("删除成功")})).catch((function(){}))})).catch((function(){})):"download"==e&&Object(U["c"])(t.fileId).then((function(e){Object(v["f"])(e.data,t.file.name)})).catch((function(){}))},editInputBlur:function(){var e=this;this.loading=!0,Object(U["g"])({fileId:this.editDetailItem.fileId,name:this.editInputContent}).then((function(t){e.editDetailIndex=-1,e.editDetailItem.file.name=e.editInputContent,e.editInputContent="",e.editDetailItem={},e.$message.success("编辑成功"),e.loading=!1})).catch((function(){e.loading=!1}))},onTitlesClick:function(e){var t=this.allData[e.index];t.name.length>1&&(t.name=t.name.splice(0,1),this.showDetailIndex=-1,this.showDetailSubIndex=-1,this.detailList=[])},previewFile:function(e,t){var a=this.detailList.map((function(e){return e.file}));this.$wkPreviewFile.preview({index:t,data:a})},getFileTypeIcon:function(e){var t=e?e.split("."):[],a="";return a=t.length>0?t[t.length-1]:"",Object(v["m"])(a)},isShowImage:function(e){var t=e?e.split("."):[],a="";return a=t.length>0?t[t.length-1]:"",["jpg","png","gif","jpeg"].includes(a.toLowerCase())},unfloadFiles:function(e,t){e.unfold=!e.unfold}}},Le=je,Ee=(a("0b8a"),Object(C["a"])(Le,Ce,De,!1,null,"67523944",null)),Oe=Ee.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"rc-cont"},e._l(e.list,(function(t,i){return a("flexbox",{key:i,staticClass:"ha-cont",attrs:{align:"stretch",justify:"flex-start"}},[a("div",{staticClass:"ha-week"},[a("div",[e._v(e._s(e.getYMDFormaterTime(t.createTime)))]),e._v(" "),a("div",[e._v(e._s(e.getWeekFormaterTime(t.createTime)))])]),e._v(" "),a("div",{staticClass:"ha-circle"}),e._v(" "),a("div",{staticClass:"ha-time"},[e._v(e._s(e.getTimeFormaterTime(t.createTime)))]),e._v(" "),a("div",{staticClass:"ha-name"},[e._v(e._s(t.realname))]),e._v(" "),a("div",{staticClass:"ha-content"},e._l(t.content,(function(t,i){return a("p",{key:i},[e._v(e._s(t))])}))),e._v(" "),a("div",{staticClass:"ha-line"})])})))},Re=[],Ve=a("0942"),Be={name:"EmployeeHandle",components:{},props:{id:[String,Number]},data:function(){return{loading:!1,list:[]}},computed:{},watch:{id:function(e){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(Ve["a"])({type:1,typeId:this.id}).then((function(t){e.loading=!1;var a=t.data||[];a.forEach((function(e){e.content=e.content?JSON.parse(e.content):[]})),e.list=a})).catch((function(){e.loading=!1}))},getYMDFormaterTime:function(e){return Object(v["E"])(e)},getWeekFormaterTime:function(e){return Object(v["E"])(e,"dddd")},getTimeFormaterTime:function(e){return Object(v["E"])(e,"H:mm")}}},$e=Be,qe=(a("5bff"),Object(C["a"])($e,Ne,Re,!1,null,"2b800e77",null)),Pe=qe.exports,Ue=a("5337"),ze=a("2f62"),Me={name:"EmpolyeeDetail",components:{WkDetailHeader:Ue["a"],SlideView:l["a"],EmployeePostInfo:F,EmployeeBaseInfo:O,EmployeeContract:te,EmployeeMoney:Te,EmployeeFiles:Oe,EmployeeHandle:Pe,FormAddDialog:f["a"]},mixins:[],provide:function(){return{editAuth:this.editAuth,employeeAuth:this.employeeAuth}},props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body"]}}},data:function(){return{loading:!1,detailData:null,tabNames:[{label:"岗位信息",name:"EmployeePostInfo"},{label:"基本信息",name:"EmployeeBaseInfo"},{label:"员工合同",name:"EmployeeContract"},{label:"工资社保",name:"EmployeeMoney"},{label:"材料附件",name:"EmployeeFiles"},{label:"操作记录",name:"EmployeeHandle"}],tabCurrentName:"EmployeePostInfo",formAddCommond:"",formAddTitle:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(ze["b"])(["hrm"])),{},{employeeAuth:function(){return this.hrm.employee},deleteAuth:function(){return this.employeeAuth&&this.employeeAuth.delete},editAuth:function(){return this.employeeAuth&&this.employeeAuth.update},tabName:function(){return"EmployeePostInfo"==this.tabCurrentName?"EmployeePostInfo":"EmployeeBaseInfo"==this.tabCurrentName?"EmployeeBaseInfo":"EmployeeContract"==this.tabCurrentName?"EmployeeContract":"EmployeeMoney"==this.tabCurrentName?"EmployeeMoney":"EmployeeFiles"==this.tabCurrentName?"EmployeeFiles":"EmployeeHandle"==this.tabCurrentName?"EmployeeHandle":""},dropdownItems:function(){var e=[];return this.deleteAuth&&e.push({icon:"wk wk-delete",label:"删除",command:"delete"}),e}}),watch:{id:function(e){this.getDetail()}},mounted:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s["D"])(this.id).then((function(t){e.loading=!1;var a=t.data||{};a.entryTime=Object(v["E"])(a.entryTime),e.detailData=a})).catch((function(){e.loading=!1}))},getEmployeeStatusName:function(e){return e?b["d"].statusValue[parseInt(e)]:""},hideView:function(){this.$emit("close")},commandSelect:function(e){var t=this;this.formAddCommond=e,"delete"==e&&this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["k"])([t.id]).then((function(a){t.$message({type:"success",message:"删除成功"}),t.$emit("handle",{type:e})})).catch((function(){}))})).catch((function(){}))},relativeHandle:function(e){this.$emit("handle",e)},formAddPass:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.handleRowData.employeeId;var t=null;t(this.formAddForm).then((function(t){e.$refs.formAdddialog.loading=!1,e.$message.success("".concat(e.formAddTitle,"成功")),e.formAddDialogShow=!1,e.getTabsNum(),e.getList()})).catch((function(){e.$refs.formAdddialog.loading=!1}))}}},Ge=Me,He=(a("a4a2b"),Object(C["a"])(Ge,i,n,!1,null,"3f137ce9",null));t["a"]=He.exports},"59f1":function(e,t,a){},"5bff":function(e,t,a){"use strict";a("0850")},"61ec":function(e,t,a){},"69b2":function(e,t,a){"use strict";a("8e1c")},"8d43":function(e,t,a){},"8e1c":function(e,t,a){},"92af":function(e,t,a){"use strict";a("14d9"),a("99af");function i(e){var t=[{name:"合同编号",field:"contractNum",formType:"text",setting:[]},{name:"合同类型",field:"contractType",formType:"select",setting:[{label:"固定期限劳动合同",value:1},{label:"无固定期限劳动合同",value:2},{label:"以完成一定工作任务为期限的劳动合同",value:3},{label:"实习协议",value:4},{label:"劳务合同",value:5},{label:"返聘协议",value:6},{label:"劳务派遣合同",value:7},{label:"借调合同",value:8},{label:"其他",value:9}]},{name:"合同开始日期",field:"startTime",formType:"date",setting:[]},{name:"合同结束日期",field:"endTime",formType:"date",setting:[]}];return e&&2==e.contractType||t.push({name:"合同期限",field:"term",formType:"select",setting:[{label:"1年",value:1},{label:"2年",value:2},{label:"3年",value:3},{label:"4年",value:4},{label:"5年",value:5},{label:"6年",value:6},{label:"7年",value:7},{label:"8年",value:8},{label:"9年",value:9},{label:"10年",value:10}]}),t.concat([{name:"合同状态",field:"status",formType:"select",setting:[{label:"未执行",value:0},{label:"执行中",value:1},{label:"已到期",value:2}]},{name:"签约公司",field:"signCompany",formType:"text",setting:[]},{name:"合同签订日期",field:"signTime",formType:"date",setting:[]},{name:"合同备注",field:"remarks",formType:"textarea",setting:[]}])}function n(e){var t={contractType:[{required:!0,message:"请选择",trigger:["blur","change"]}],startTime:[{required:!0,message:"请选择",trigger:["blur","change"]}],endTime:[{required:!0,message:"请选择",trigger:["blur","change"]}],signTime:[{required:!0,message:"请选择",trigger:["blur","change"]}],status:[{required:!0,message:"请选择",trigger:["blur","change"]}]};return e&&2==e.contractType||(t["term"]=[{required:!0,message:"请选择",trigger:["blur","change"]}]),t}var o={1:"固定期限劳动合同",2:"无固定期限劳动合同",3:"以完成一定工作任务为期限的劳动合同",4:"实习协议",5:"劳务合同",6:"返聘协议",7:"劳务派遣合同",8:"借调合同",9:"其他"},s={1:"1年",2:"2年",3:"3年",4:"4年",5:"5年",6:"6年",7:"7年",8:"8年",9:"9年",10:"10年"},l={0:"未执行",1:"执行中",2:"已到期"};t["a"]={getFields:i,getRules:n,contractTypeValue:o,termValue:s,statusValue:l}},"93a0":function(e,t,a){"use strict";a("1fa1")},a4a2b:function(e,t,a){"use strict";a("f359")},cc08:function(e,t,a){},cccc:function(e,t,a){"use strict";a.d(t,"p",(function(){return n})),a.d(t,"s",(function(){return o})),a.d(t,"k",(function(){return s})),a.d(t,"o",(function(){return l})),a.d(t,"n",(function(){return r})),a.d(t,"r",(function(){return d})),a.d(t,"q",(function(){return c})),a.d(t,"t",(function(){return u})),a.d(t,"l",(function(){return m})),a.d(t,"m",(function(){return f})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return p})),a.d(t,"D",(function(){return g})),a.d(t,"F",(function(){return v})),a.d(t,"G",(function(){return y})),a.d(t,"E",(function(){return b})),a.d(t,"J",(function(){return A})),a.d(t,"K",(function(){return w})),a.d(t,"H",(function(){return T})),a.d(t,"I",(function(){return C})),a.d(t,"v",(function(){return D})),a.d(t,"w",(function(){return F})),a.d(t,"x",(function(){return _})),a.d(t,"y",(function(){return k})),a.d(t,"z",(function(){return S})),a.d(t,"C",(function(){return x})),a.d(t,"c",(function(){return I})),a.d(t,"h",(function(){return j})),a.d(t,"N",(function(){return L})),a.d(t,"b",(function(){return E})),a.d(t,"B",(function(){return O})),a.d(t,"g",(function(){return N})),a.d(t,"M",(function(){return R})),a.d(t,"A",(function(){return V})),a.d(t,"f",(function(){return B})),a.d(t,"L",(function(){return $})),a.d(t,"a",(function(){return q})),a.d(t,"u",(function(){return P})),a.d(t,"e",(function(){return U})),a.d(t,"d",(function(){return z}));var i=a("b775");function n(e){return Object(i["a"])({url:"hrmConfig/queryRecruitChannelList",method:"post",data:e})}function o(e){return Object(i["a"])({url:"hrmConfig/saveRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(i["a"])({url:"hrmConfig/deleteRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["a"])({url:"hrmConfig/queryFields",method:"post",data:e})}function r(e){return Object(i["a"])({url:"hrmConfig/queryFieldByLabel/".concat(e),method:"post"})}function d(e){return Object(i["a"])({url:"hrmConfig/saveField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["a"])({url:"hrmConfig/queryRecruitEliminateList",method:"post",data:e})}function u(e){return Object(i["a"])({url:"hrmConfig/saveRecruitEliminate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(i["a"])({url:"hrmConfig/queryInsuranceSchemePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(i["a"])({url:"hrmConfig/queryInsuranceSchemeById/".concat(e),method:"post"})}function h(e){return Object(i["a"])({url:"hrmConfig/addInsuranceScheme",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(i["a"])({url:"hrmConfig/deleteInsuranceScheme/".concat(e),method:"post"})}function g(e){return Object(i["a"])({url:"hrmSalaryGroup/addSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(i["a"])({url:"hrmSalaryGroup/querySalaryGroupPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(i["a"])({url:"hrmSalaryGroup/setSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(e){return Object(i["a"])({url:"hrmSalaryGroup/delete/".concat(e),method:"post"})}function A(e){return Object(i["a"])({url:"hrmSalaryTaxRule/queryTaxRuleList",method:"post",data:e})}function w(e){return Object(i["a"])({url:"hrmSalaryTaxRule/setTaxRule",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function T(e){return Object(i["a"])({url:"hrmSalaryOption/querySalaryOptionDetail",method:"post",data:e})}function C(e){return Object(i["a"])({url:"hrmSalaryOption/setSalaryOption",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function D(){return Object(i["a"])({url:"hrmEmployeeArchives/queryEmployeeArchivesField",method:"post"})}function F(e){return Object(i["a"])({url:"hrmEmployeeArchives/sendWriteArchives",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function _(e){return Object(i["a"])({url:"hrmEmployeeArchives/setEmployeeArchivesField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function k(e){return Object(i["a"])({url:"hrmEmployeeFieldManage/queryEmployeeManageField",method:"post",data:e})}function S(e){return Object(i["a"])({url:"hrmEmployeeFieldManage/setEmployeeManageField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function x(e){return Object(i["a"])({url:"hrmAttendanceShift/queryAttendanceShiftPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function I(e){return Object(i["a"])({url:"hrmAttendanceShift/".concat(e.shiftId?"setAttendanceShift":"addAttendanceShift"),method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function j(e){return Object(i["a"])({url:"hrmAttendanceShift/delete/".concat(e.attendanceShiftId),method:"post",data:e})}function L(e){return Object(i["a"])({url:"hrmAttendanceShift/verifyAttendanceShiftName",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function E(e){return Object(i["a"])({url:"hrmAttendanceRule/".concat(e.attendanceRuleId?"setAttendanceRule":"addAttendanceRule"),method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function O(e){return Object(i["a"])({url:"hrmAttendanceRule/queryAttendanceRulePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function N(e){return Object(i["a"])({url:"hrmAttendanceRule/delete/".concat(e.attendanceRuleId),method:"post",data:e})}function R(e){return Object(i["a"])({url:"hrmAttendanceRule/verifyAttendanceRuleName",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function V(e){return Object(i["a"])({url:"hrmAttendanceGroup/queryAttendanceGroupPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function B(e){return Object(i["a"])({url:"hrmAttendanceGroup/delete/".concat(e.attendanceGroupId),method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function $(e){return Object(i["a"])({url:"hrmAttendanceGroup/verifyAttendanceGroupName",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function q(e){return Object(i["a"])({url:"hrmAttendanceGroup/addAttendanceGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function P(e){return Object(i["a"])({url:"hrmAttendanceGroup/setAttendanceGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function U(e){return Object(i["a"])({url:"hrmAttendanceExamine/queryHrmAttendanceExamine",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function z(e){return Object(i["a"])({url:"hrmAttendanceExamine/add",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},ce10:function(e,t,a){"use strict";a("ce12")},ce12:function(e,t,a){},f359:function(e,t,a){},f85c:function(e,t,a){"use strict";a("61ec")}}]);