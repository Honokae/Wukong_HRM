(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-549f8446"],{"158a":function(e,t,a){"use strict";a("5c89")},1969:function(e,t,a){"use strict";a("265f")},"222c":function(e,t,a){"use strict";a("8b86")},"265f":function(e,t,a){},"37e87":function(e,t,a){},4547:function(e,t,a){},"5c89":function(e,t,a){e.exports={colorPrimary:"#0052cc",colorBlack:"#172b4d",colorSuccess:"#36b37e",colorWarning:"#ffab00",colorDanger:"#ff5630",colorN40:"#dfe1e6",axisLineColor:"#dfe1e6",axisLabelFontWeight:"500"}},"69b6":function(e,t,a){"use strict";a("6f4b")},"6f4b":function(e,t,a){},"6f94":function(e,t,a){},"7a38":function(e,t,a){"use strict";a("dcb8")},8027:function(e,t,a){"use strict";a("ccd6")},"820f":function(e,t,a){"use strict";a("37e87")},"8b13":function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"g",(function(){return b})),a.d(t,"a",(function(){return w})),a.d(t,"f",(function(){return x})),a.d(t,"d",(function(){return E})),a.d(t,"e",(function(){return V})),a.d(t,"b",(function(){return R}));a("b64b"),a("d81d"),a("d9e2"),a("14d9"),a("99af");var l=a("ed08"),i=a("6bfe"),n=a("7078"),r=a("0f4c");function o(e){var t=Object.keys(e);return t.map((function(t){return{label:e[t],value:parseInt(t)}}))}var s=[{name:"学历",field:"education",formType:"select",setting:[{label:"小学",value:1},{label:"初中",value:2},{label:"中专",value:3},{label:"中职",value:4},{label:"中技",value:5},{label:"高中",value:6},{label:"大专",value:7},{label:"本科",value:8},{label:"硕士",value:9},{label:"博士",value:10},{label:"博士后",value:11},{label:"其他",value:12}]},{name:"毕业院校",field:"graduateSchool",formType:"text",setting:[]},{name:"专业",field:"major",formType:"text",setting:[]},{name:"入学时间",field:"admissionTime",formType:"date",setting:[]},{name:"毕业时间",field:"graduationTime",formType:"date",setting:[]},{name:"教学方式",field:"teachingMethods",formType:"select",setting:[{label:"全日制",value:1},{label:"成人教育",value:2},{label:"远程教育",value:3},{label:"自学考试",value:4},{label:"其他",value:5}]},{name:"是否第一学历",field:"isFirstDegree",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]}],d={1:"小学",2:"初中",3:"中专",4:"中职",5:"中技",6:"高中",7:"大专",8:"本科",9:"硕士",10:"博士",11:"博士后",12:"其他"},c={1:"全日制",2:"成人教育",3:"远程教育",4:"自学考试",5:"其他"},u={1:"是",0:"否"},p={education:[{required:!0,message:"请选择",trigger:["blur","change"]}],graduateSchool:[{required:!0,message:"请输入",trigger:["blur","change"]}],major:[{required:!0,message:"请输入",trigger:["blur","change"]}],isFirstDegree:[{required:!0,message:"请选择",trigger:["blur","change"]}]},m={fields:s,rules:p,educationValue:d,teachingMethodsValue:c,isFirstDegreeValue:u},f=[{name:"工作单位",field:"workUnit",formType:"text",setting:[]},{name:"职务",field:"post",formType:"text",setting:[]},{name:"工作开始时间",field:"workStartTime",formType:"date",setting:[]},{name:"工作结束时间",field:"workEndTime",formType:"date",setting:[]},{name:"离职原因",field:"leavingReason",formType:"text",setting:[]},{name:"证明人",field:"witness",formType:"text",setting:[]},{name:"证明人电话",field:"witnessPhone",formType:"mobile",setting:[]},{name:"工作备注",field:"workRemarks",formType:"text",setting:[]}],h=function(e,t,a){Object(i["c"])(t)||Object(l["B"])(t)?a():a(new Error("手机格式有误"))},g={workUnit:[{required:!0,message:"请输入",trigger:["blur","change"]}],post:[{required:!0,message:"请输入",trigger:["blur","change"]}],witnessPhone:[{validator:h,trigger:["blur","change"]}]},b={fields:f,rules:g},v=[{name:"证书名称",field:"certificateName",formType:"text",setting:[]},{name:"证书级别",field:"certificateLevel",formType:"text",setting:[]},{name:"证书/证件编号",field:"certificateNum",formType:"text",setting:[]},{name:"有效期起始日期",field:"startTime",formType:"date",setting:[]},{name:"有效期到期日",field:"endTime",formType:"date",setting:[]},{name:"发证机构",field:"issuingAuthority",formType:"text",setting:[]},{name:"发证日期",field:"issuingTime",formType:"date",setting:[]},{name:"证件备注",field:"remarks",formType:"text",setting:[]}],y={certificateName:[{required:!0,message:"请输入",trigger:["blur","change"]}]},w={fields:v,rules:y},T=[{name:"培训课程",field:"trainingCourse",formType:"text",setting:[]},{name:"培训机构名称",field:"trainingOrganName",formType:"text",setting:[]},{name:"培训开始时间",field:"startTime",formType:"date",setting:[]},{name:"培训结束时间",field:"endTime",formType:"date",setting:[]},{name:"培训时长",field:"trainingDuration",formType:"number",setting:[]},{name:"培训成绩",field:"trainingResults",formType:"text",setting:[]},{name:"培训证书名称",field:"trainingCertificateName",formType:"text",setting:[]},{name:"培训备注",field:"remarks",formType:"textarea",setting:[]}],k={trainingCourse:[{required:!0,message:"请输入",trigger:["blur","change"]}]},x={fields:T,rules:k},_={1:"男",2:"女"},C={1:"阳历",2:"农历"},A=[{label:"男",value:1},{label:"女",value:2}],D={1:"身份证",2:"港澳通行证",3:"台湾通行证",4:"护照",5:"其他"},S=[{label:"身份证",value:1},{label:"港澳通行证",value:2},{label:"台湾通行证",value:3},{label:"护照",value:4},{label:"其他",value:5}],O={1:"正式",2:"非正式"},N=[{label:"正式",value:1},{label:"非正式",value:2}],F={0:"无试用期",1:"1个月",2:"2个月",3:"3个月",4:"4个月",5:"5个月",6:"6个月"},I=[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}],j=[{label:"实习",value:3},{label:"兼职",value:4},{label:"劳务",value:5},{label:"顾问",value:6},{label:"返聘",value:7},{label:"外包",value:8}],L={1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包",11:"在职",12:"全职",13:"待入职",14:"待离职",15:"已离职"},$={1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包"},E={sexValue:_,birthdayTypeValue:C,idTypeValue:D,employmentFormsValue:O,probationValue:F,statusValue:L,validStatusValue:$,getValueList:o,sexSetting:A,idTypeSetting:S,employmentFormsSetting:N,probationSetting:I,statusSetting:j},q=[{name:"部门",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:r["e"],setting:[]},{name:"岗位",field:"newPost",formType:"text",setting:[]},{name:"直属上级",field:"newParentId",formType:"user",props:{label:"employeeName",value:"employeeId",isList:!0},request:n["F"],setting:[]},{name:"计划转正日期",field:"becomeTime",formType:"text",disabled:!0,setting:[]},{name:"实际转正日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}],B={effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]},V={fields:q,rules:B};function P(e,t){var a=[{label:"调岗",value:5},{label:"晋升",value:6},{label:"降级",value:7}];3!=t&&4!=t||a.push({label:"转为全职员工",value:8});var l=[];l=7==e?[{label:"违规违纪",value:4},{label:"绩效不达标",value:5},{label:"个人身体原因",value:6},{label:"不适应当前岗位",value:7}]:[{label:"组织架构调整",value:1},{label:"个人申请",value:2},{label:"工作安排",value:3}];var i=[{name:"异动类型",field:"changeType",formType:"select",setting:a},{name:"异动原因",field:"changeReason",formType:"select",setting:l}];return 8==e&&(i=i.concat([{name:"入职日期",field:"entryTime",formType:"date",disabled:!0,setting:[]},{name:"试用期",field:"probation",formType:"select",setting:[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}]}])),i.concat([{name:"原部门",field:"oldDept",formType:"structure",disabled:!0,props:{dataType:"hrm"},request:r["e"],setting:[]},{name:"变更为",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:r["e"],setting:[]},{name:"原岗位",field:"oldPost",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newPost",formType:"text",setting:[]},{name:"原岗位职级",field:"oldPostLevel",disabled:!0,formType:"text",setting:[]},{name:"变更为",field:"newPostLevel",formType:"text",setting:[]},{name:"原工作地点",field:"oldWorkAddress",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newWorkAddress",formType:"text",setting:[]},{name:"生效日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}])}var W={effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]},R={fieldsFunc:P,rules:W}},"8b86":function(e,t,a){},b395:function(e,t,a){"use strict";a("4547")},c8b3:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("xr-header",{attrs:{"ft-top":"0",placeholder:"请输入组织部门名称","show-search":""},on:{search:e.searchClick}},[a("template",{slot:"label"},[e._v("\n      组织管理"),2===e.hrmUserType?a("el-tooltip",{staticStyle:{"margin-left":"8px"},attrs:{effect:"dark",placement:"top",content:"仅展示您管理范围内的员工"}},[a("i",{staticClass:"wk wk-help wk-help-tips"})]):e._e()],1),e._v(" "),a("template",{slot:"bottom-ft"},[a("wk-toggle-button",{model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},e._l([{name:"列表视图",value:"table",icon:"wk wk-icon-three-line"},{name:"架构视图",value:"tree",icon:"wk wk-icon-org-solid"}],(function(t){return a("wk-toggle-item",{key:t.value,attrs:{label:t.name,value:t.value}},[e._v("\n          "+e._s(t.name)),a("i",{class:t.icon})])})))],1),e._v(" "),a("template",{slot:"ft"},[e.createAuth?a("el-button",{attrs:{type:"primary"},on:{click:e.createClick}},[e._v("新建组织\n      ")]):e._e()],1)],2),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"wrapper-main",class:{"is-org":"tree"===e.showType}},["table"==e.showType?a("tree-table",{staticClass:"el-table-header--white",attrs:{data:e.list,height:e.tableHeight,columns:e.columns,"eval-args":[null,null,e.fieldFormatter],"cell-class-name":e.cellClassName,stripe:"","expand-all":""},on:{"row-click":e.handleRowClick}}):a("div",{staticClass:"wk-org-tree",style:{height:e.tableHeight+"px"}},[a("vue2-org-tree",{attrs:{data:e.orgTreeData,"label-class-name":e.orgTreeClass,props:{label:"name",children:"children",expand:"expand"},"render-content":e.renderContent},on:{"on-node-click":e.orgTreeClick}})],1)],1),e._v(" "),e.deptAddDialogShow?a("dept-add-dialog",{attrs:{visible:e.deptAddDialogShow},on:{"update:visible":function(t){e.deptAddDialogShow=t},success:e.getDeptList}}):e._e(),e._v(" "),e.detailShow?a("dept-detail",{attrs:{id:e.detailId},on:{close:function(t){e.detailShow=!1},"edit-success":e.getDeptList,"delete-success":e.getDeptList}}):e._e()],1)},i=[],n=a("5530"),r=(a("ac1f"),a("841c"),a("99af"),a("b0c0"),a("0f4c")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wk-toggle-button"},[a("div",{staticClass:"wk-toggle-button__bd"},[e._t("default")],2)])},s=[],d=(a("a9e3"),a("d3b7"),a("6bd7")),c={name:"WkToggleButton",components:{},provide:function(){return{toggleButton:this}},props:{valueKey:{type:String,default:"value"},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{cachedOptions:[],selectedLabel:"",selected:{}}},computed:{},watch:{value:function(){this.setSelected()}},created:function(){this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){},beforeDestroy:function(){},methods:{handleOptionSelect:function(e){this.$emit("input",e.value),this.emitChange(e.value)},emitChange:function(e){Object(d["b"])(this.value,e)||this.$emit("change",e)},setSelected:function(){var e=this.getOption(this.value);this.selectedLabel=e.currentLabel,this.selected=e},getOption:function(e){for(var t,a="[object object]"===Object.prototype.toString.call(e).toLowerCase(),l="[object null]"===Object.prototype.toString.call(e).toLowerCase(),i="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),n=this.cachedOptions.length-1;n>=0;n--){var r=this.cachedOptions[n],o=a?Object(d["a"])(r.value,this.valueKey)===Object(d["a"])(e,this.valueKey):r.value===e;if(o){t=r;break}}if(t)return t;var s=a||l||i?"":String(e),c={value:e,currentLabel:s};return c}}},u=c,p=(a("222c"),a("2877")),m=Object(p["a"])(u,o,s,!1,null,"4d569825",null),f=m.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wk-toggle-item",class:{selected:e.itemSelected,"is-disabled":e.disabled},on:{click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[a("span",[e._v(e._s(e.currentLabel))])])],2)},g=[],b=a("53ca"),v=(a("14d9"),a("a434"),{name:"WkToggleItem",components:{},inject:["toggleButton"],props:{value:{required:!0},label:[String,Number],disabled:{type:Boolean,default:!1}},data:function(){return{}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},itemSelected:function(){return this.isEqual(this.value,this.toggleButton.value)}},watch:{currentLabel:function(){this.dispatch("WkToggleButton","setSelected")},value:function(e,t){var a=this.toggleButton.valueKey;a&&"object"===Object(b["a"])(e)&&"object"===Object(b["a"])(t)&&e[a]===t[a]||this.dispatch("WkToggleButton","setSelected")}},created:function(){this.toggleButton.cachedOptions.push(this)},mounted:function(){},beforeDestroy:function(){var e=this.toggleButton.selected,t=[e],a=this.toggleButton.cachedOptions.indexOf(this),l=t.indexOf(this);a>-1&&l<0&&this.toggleButton.cachedOptions.splice(a,1)},methods:{isEqual:function(e,t){if(this.isObject){var a=this.select.valueKey;return Object(d["a"])(e,a)===Object(d["a"])(t,a)}return e===t},selectOptionClick:function(){!0!==this.disabled&&this.dispatch("WkToggleButton","handleOptionClick",[this,!0])},dispatch:function(e,t,a){var l=this.$parent||this.$root,i=l.$options.name;while(l&&(!i||i!==e))l=l.$parent,l&&(i=l.$options.name);l&&l.$emit.apply(l,[t].concat(a))}}}),y=v,w=(a("b395"),Object(p["a"])(y,h,g,!1,null,"2a563962",null)),T=w.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._g(e._b({staticClass:"tree-table",attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),e.$listeners),[0===e.columns.length?a("el-table-column",{attrs:{"show-overflow-tooltip":"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,(function(e){return a("span",{key:e,staticClass:"ms-tree-space"})})),e._v(" "),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-caret-bottom"}):a("i",{staticClass:"el-icon-caret-right"})]):e._e(),e._v("\n      "+e._s(t.$index)+"\n    ")]}}])}):e._l(e.columns,(function(t,l){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(i){return[e._l(i.row._level,(function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:0===l,expression:"index === 0"}],key:e,staticClass:"ms-tree-space"})})),e._v(" "),e.iconShow(l,i.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){t.stopPropagation(),e.toggleExpanded(i.$index)}}},[i.row._expanded?a("i",{staticClass:"el-icon-caret-bottom"}):a("i",{staticClass:"el-icon-caret-right"})]):e._e(),e._v("\n      "+e._s(i.row[t.value])),0===l?[1==i.row.deptType?a("i",{staticClass:"wk wk-subordinate tree-icon"}):e._e(),e._v(" "),2==i.row.deptType?a("i",{staticClass:"wk wk-customer-solid tree-icon"}):e._e()]:e._e()]}},{key:"header",fn:function(l){var i=l.column;return[e._v("\n      "+e._s(i.label)+"\n      "),t.helpType?[a("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":t.helpType,"data-id":t.helpId}})]:e._e()]}}])})})),e._v(" "),e._t("default")],2)},x=[],_=(a("159b"),a("a630"),a("3ca3"),a("2b0e"));function C(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4?arguments[4]:void 0,n=[];return Array.from(e).forEach((function(e){void 0===e._expanded&&_["default"].set(e,"_expanded",t);var r=1;if(void 0!==l&&null!==l&&(r=l+1),i&&i(e),_["default"].set(e,"_level",r),a&&_["default"].set(e,"parent",a),n.push(e),e.children&&e.children.length>0){var o=C(e.children,t,e,r,i);n=n.concat(o)}})),n}var A={name:"TreeTable",inheritAttrs:!1,props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){var e;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||C,a=this.evalArgs?[e,this.expandAll].concat(this.evalArgs):[e,this.expandAll];return t.apply(null,a)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?{animation:"treeTableShow 1s","-webkit-animation":"treeTableShow 1s"}:{display:"none"}},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0}}},D=A,S=(a("820f"),a("69b6"),a("158a"),Object(p["a"])(D,k,x,!1,null,"51195919",null)),O=S.exports,N=a("5057"),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"700px"},on:{close:e.handleCancel}},[a("el-form",{ref:"deptAddForm",attrs:{model:e.deptAddForm,rules:e.rules,"validate-on-rule-change":!1,"label-position":"top"}},e._l(e.addFields,(function(t,l){return a("el-form-item",{key:l,attrs:{prop:t.field}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n        "+e._s(t.name)+"\n      ")]),e._v(" "),"text"==t.formType?a("el-input",{attrs:{maxlength:t.maxlength||100,placeholder:"请输入内容"},model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}}):"radio"==t.formType?a("el-radio-group",{model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}},e._l(t.setting,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))):"structure"==t.formType?a("wk-dep-select",{staticStyle:{width:"100%"},attrs:{props:{dataType:"hrm"},params:e.structureParams,radio:""},model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}}):"user"==t.formType?a("wk-user-select",{staticStyle:{width:"100%"},attrs:{request:t.request,props:{label:"employeeName",value:"employeeId"},radio:""},model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}}):e._e()],1)}))),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")])],1)],1)},I=[],j=a("7078"),L=a("5c0a"),$=a("de98"),E=a("9dba"),q={name:"DeptAddDialog",components:{WkUserSelect:L["a"],WkDepSelect:$["a"]},mixins:[E["a"]],props:{data:Object,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,deptAddForm:{deptType:1}}},computed:{title:function(){return this.data?"编辑组织部门":"新建组织部门"},addFields:function(){var e=[{name:"组织部门名称",field:"name",formType:"text",maxlength:60,setting:[]},{name:"组织编码",field:"code",maxlength:60,formType:"text",setting:[]},{name:"组织类型",field:"deptType",formType:"radio",setting:[{label:"公司",value:1},{label:"部门",value:2}]}];return this.data&&0===this.data.parentId||e.push({name:"上级组织",field:"parentId",formType:"structure",setting:[]}),e.concat([{name:"组织负责人",field:"mainEmployeeId",formType:"user",request:j["C"],setting:[]},{name:"分管领导",field:"leaderEmployeeId",formType:"user",request:j["C"],setting:[]}])},rules:function(){var e={name:{required:!0,message:"请输入",trigger:["blur","change"]},code:{required:!0,message:"请输入",trigger:["blur","change"]},deptType:{required:!0,message:"请选择",trigger:["blur","change"]}};return this.data&&0===this.data.parentId||(e["parentId"]={required:!0,message:"请选择",trigger:["blur","change"]}),e},structureParams:function(){return this.data?{type:"update",id:this.data.deptId}:{type:"tree"}}},watch:{visible:{handler:function(e){var t=this;e&&(this.data?this.deptAddForm={deptType:this.data.deptType,code:this.data.code,name:this.data.name,mainEmployeeId:this.data.mainEmployeeId,leaderEmployeeId:this.data.leaderEmployeeId,parentId:this.data.parentId}:this.deptAddForm={deptType:1},this.$nextTick((function(){t.$refs.deptAddForm&&t.$refs.deptAddForm.clearValidate()})))},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.$refs.deptAddForm.validate((function(t){if(t){var a={};a.name=e.deptAddForm.name,a.code=e.deptAddForm.code,a.deptType=e.deptAddForm.deptType,a.parentId=e.deptAddForm.parentId,a.mainEmployeeId=e.deptAddForm.mainEmployeeId,a.leaderEmployeeId=e.deptAddForm.leaderEmployeeId,e.loading=!0,e.data&&(a.deptId=e.data.deptId);var l=e.data?r["f"]:r["a"];l(a).then((function(t){e.loading=!1,e.$message.success("".concat(e.title,"成功")),e.$store.dispatch("GetHrmDeptList"),e.$emit("success"),e.handleCancel()})).catch((function(){e.loading=!1}))}}))}}},B=q,V=(a("8027"),Object(p["a"])(B,F,I,!1,null,"1b082ff8",null)),P=V.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%",background:"white"}},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[e.detailData?a("flexbox",{staticClass:"side-detail-main",staticStyle:{padding:"0 15px"},attrs:{direction:"column",align:"stretch"}},[a("wk-detail-header",{attrs:{"detail-value":e.detailData.name,"dropdown-items":e.dropdownItems,"show-edit":e.editAuth,"icon-class":e.iconClass,"detail-name":"组织部门","icon-bg-color":"#ECEEF2","icon-color":"#42526E"},on:{edit:e.editClick,"command-select":e.commandSelect}}),e._v(" "),a("el-tabs",{staticClass:"side-detail__tabs--default",staticStyle:{flex:"1"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},[a("el-tab-pane",{attrs:{label:"详细资料",name:"baseInfo",lazy:""}},[a("wk-base-detail",{attrs:{list:e.baseList}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"员工列表",name:"employee",lazy:""}},[a("relative-employee",{attrs:{id:e.id}})],1)],1)],1):e._e(),e._v(" "),a("dept-add-dialog",{attrs:{data:e.detailData,visible:e.deptAddDialogShow},on:{"update:visible":function(t){e.deptAddDialogShow=t},success:e.editSuccess}})],1)},R=[],H=a("130f"),z=a("5337"),K=a("8f7f"),U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative-employee"},[a("div",{staticClass:"relative-employee__header"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入员工姓名"},on:{input:e.debouncedGetList},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("i",{staticClass:"el-icon-search",attrs:{slot:"prepend"},slot:"prepend"})])],1),e._v(" "),a("el-table",{staticClass:"el-table-header--white",attrs:{data:e.list,height:e.tableHeight,"cell-class-name":e.cellClassName,stripe:""},on:{"row-click":e.handleRowClick}},e._l(e.fieldList,(function(t,l){return a("el-table-column",{key:l,attrs:{prop:t.prop,label:t.label,formatter:e.fieldFormatter,"show-overflow-tooltip":""}})}))),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.pageTotal,layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)},G=[],J=a("7a1a"),M=a("8b13"),X={name:"RelativeEmployee",components:{},props:{id:[String,Number]},data:function(){return{list:[],search:"",currentPage:1,pageSize:15,pageTotal:0,fieldList:[{prop:"employeeName",width:"200",label:"姓名"},{prop:"jobNumber",width:"200",label:"工号"},{prop:"deptName",width:"200",label:"部门"},{prop:"post",width:"200",label:"岗位"},{prop:"employmentForms",width:"200",label:"聘用形式"},{prop:"entryTime",width:"200",label:"入职时间"}],tableHeight:"400px"}},computed:{},watch:{id:function(e){this.list=[],this.getList()}},created:function(){this.debouncedGetList=Object(J["debounce"])(300,this.refreshList),this.refreshList()},activated:function(){},deactivated:function(){},methods:{refreshList:function(){this.handleCurrentChange(1)},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0,Object(r["d"])({deptId:this.id,search:this.search,page:this.currentPage,limit:this.pageSize}).then((function(t){e.loading=!1,e.list=t.data.list||[],e.pageTotal=t.data.totalRow})).catch((function(t){e.loading=!1}))},fieldFormatter:function(e,t){var a=M["d"]["".concat(t.property,"Value")];return a?a[e[t.property]]||"--":e[t.property]||"--"},handleRowClick:function(e,t,a){},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return"name"===t.property?"can-visit--underline":""}}},Q=X,Y=(a("ed35"),Object(p["a"])(Q,U,G,!1,null,"0425bdd7",null)),Z=Y.exports,ee=a("2f62"),te={name:"DeptDetail",components:{SlideView:H["a"],WkDetailHeader:z["a"],WkBaseDetail:K["a"],RelativeEmployee:Z,DeptAddDialog:P},props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body","org-tree-node-label"]}}},data:function(){return{loading:!1,detailData:null,tabCurrentName:"baseInfo",deptAddDialogShow:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(ee["b"])(["hrm"])),{},{deptAuth:function(){return this.hrm.dept},editAuth:function(){return this.deptAuth.update},deleteAuth:function(){return this.deptAuth.delete&&this.detailData&&0!==this.detailData.parentId},dropdownItems:function(){return this.deleteAuth?[{icon:"wk wk-delete",label:"删除",command:"delete"}]:[]},baseList:function(){return this.detailData?[{name:"",list:[{label:"组织部门名称",value:this.detailData.name},{label:"组织编码",value:this.detailData.code},{label:"组织类型",value:{1:"公司",2:"部门"}[this.detailData.deptType]},{label:"在职员工",value:this.detailData.allNum},{label:"全职员工",value:this.detailData.fullTimeNum},{label:"非全职人数",value:this.detailData.nuFullTimeNum},{label:"上级组织",value:this.detailData.pname},{label:"组织负责人",value:this.detailData.mainEmployeeName},{label:"分管领导",value:this.detailData.leadEmployeeName}]}]:[]},iconClass:function(){return this.detailData?{1:"wk wk-subordinate",2:"wk wk-customer-solid"}[this.detailData.deptType]:""}}),watch:{id:function(){this.detailData=null,this.getDetial()}},mounted:function(){},beforeDestroy:function(){},methods:{viewAfterEnter:function(){this.getDetial()},getDetial:function(){var e=this;this.loading=!0,Object(r["c"])(this.id).then((function(t){e.detailData=t.data||{},e.loading=!1})).catch((function(){e.loading=!1,e.hideView()}))},editClick:function(){this.deptAddDialogShow=!0},editSuccess:function(){this.getDetial(),this.$emit("edit-success")},commandSelect:function(e){var t=this;"delete"===e&&this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])(t.id).then((function(e){t.$message.success("删除成功"),t.$emit("delete-success"),t.hideView()}))})).catch((function(){}))},hideView:function(){this.$emit("close")}}},ae=te,le=(a("7a38"),Object(p["a"])(ae,W,R,!1,null,"2e7abec3",null)),ie=le.exports,ne={name:"Index",components:{TreeTable:O,XrHeader:N["a"],DeptAddDialog:P,DeptDetail:ie,WkToggleButton:f,WkToggleItem:T},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-220,search:"",showType:"table",list:[],deptAddDialogShow:!1,columns:[{text:"组织部门名称",value:"name",width:400},{text:"组织类型",value:"deptTypeName"},{text:"在职员工",value:"allNumName",helpType:"30",helpId:"277"},{text:"全职员工",value:"fullTimeNumName",helpType:"30",helpId:"285"},{text:"非全职人数",value:"nuFullTimeNumName",helpType:"30",helpId:"286"}],detailShow:!1,detailId:null}},computed:Object(n["a"])(Object(n["a"])({},Object(ee["b"])(["hrm","hrmUserType"])),{},{deptAuth:function(){return this.hrm&&this.hrm.dept},createAuth:function(){return this.deptAuth.save},detailAuth:function(){return this.deptAuth.read},orgTreeData:function(){return this.list.length>0?this.list[0]:{}}}),watch:{},created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-220},this.getDeptList()},mounted:function(){},methods:{getDeptList:function(){var e=this;this.loading=!0,Object(r["e"])({type:"tree",name:this.search}).then((function(t){e.list=t.data||[],e.loading=!1})).catch((function(){e.loading=!1}))},fieldFormatter:function(e){e.deptTypeName={1:"公司",2:"部门"}[e.deptType],e.allNumName="".concat(e.myAllNum,"（").concat(e.allNum||0,"）"),e.fullTimeNumName="".concat(e.myFullTimeNum,"（").concat(e.fullTimeNum||0,"）"),e.nuFullTimeNumName="".concat(e.myNuFullTimeNum,"（").concat(e.nuFullTimeNum||0,"）")},cellClassName:function(e){e.row,e.column,e.rowIndex;var t=e.columnIndex;return 0==t&&this.detailAuth?"can-visit-default":""},searchClick:function(e){this.search=e,this.getDeptList()},createClick:function(){this.deptAddDialogShow=!0},handleRowClick:function(e,t,a){this.detailAuth&&(this.detailId=e.deptId,this.detailShow=!0)},renderContent:function(e,t){return"".concat(t.name,"（").concat(t.allNum,"）")},orgTreeClass:function(e){return{1:"org-tree-company",2:"org-tree-department"}[e.deptType]},orgTreeClick:function(e,t){this.handleRowClick(t)}}},re=ne,oe=(a("1969"),Object(p["a"])(re,l,i,!1,null,"37f78cde",null));t["default"]=oe.exports},ccd6:function(e,t,a){},dcb8:function(e,t,a){},ed35:function(e,t,a){"use strict";a("6f94")}}]);