(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-255f33ac"],{"1db5":function(t,e,a){},"77c3":function(t,e,a){"use strict";a("1db5")},"93cc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"statistics-card"},[a("flexbox",[t.titleShow?a("div",{staticClass:"card-item is-first"},[t.iconShow?a("i",{staticClass:"wk wk-results-solid card-item__icon"}):t._e(),t._v(" "),a("span",{staticClass:"card-item__title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t._l(t.fieldList,(function(e,i){return a("div",{key:i,staticClass:"card-item"},[a("div",{staticClass:"card-item__label"},[t._v(t._s(e.label))]),t._v(" "),a("div",{staticClass:"card-item__value",class:{"can-visit--underline":e.visit},on:{click:function(a){t.itemClick(i,e)}}},[t._v(t._s(""===t.data[e.prop]||null===t.data[e.prop]?"--":t.data[e.prop]))])])})),t._v(" "),t.buttonShow?a("div",{staticClass:"card-item"},[t.$slots.handle?t._t("handle"):a("el-button",{attrs:{type:"text"},on:{click:function(e){t.detailClick(t.data)}}},[t._v("查看详情")]),t._v(" "),t.deleteButtonShow?a("el-button",{staticClass:"xr-text-btn delete",attrs:{type:"text"},on:{click:function(e){t.deleteClick(t.data)}}},[t._v("删除")]):t._e()],2):t._e()],2)],1)},n=[],o={name:"StatisticsCard",components:{},props:{titleShow:{type:Boolean,default:!0},iconShow:{type:Boolean,default:!0},buttonShow:{type:Boolean,default:!0},deleteButtonShow:{type:Boolean,default:!1},title:String,data:Object,fieldList:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{detailClick:function(){this.$emit("detail-click",this.data)},deleteClick:function(){this.$emit("delete-click",this.data)},itemClick:function(t,e){e.visit&&this.$emit("select",t,e,this.data)}}},r=o,l=(a("b6fe"),a("2877")),s=Object(l["a"])(r,i,n,!1,null,"022a88ee",null);e["a"]=s.exports},b6fe:function(t,e,a){"use strict";a("f121")},cf89:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scheme-index",attrs:{id:"employee-main-container"}},[a("xr-header",{attrs:{"ft-top":"0"}},[a("el-page-header",{attrs:{slot:"label",content:t.topData.month?t.topData.month+"月薪资详情":"薪资详情"},on:{back:t.goBack},slot:"label"}),t._v(" "),a("template",{slot:"ft"},[t.hasFilterContent?a("el-button",{attrs:{type:"text"},on:{click:t.resetFilter}},[t._v("清除筛选")]):t._e(),t._v(" "),a("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:t.popoverFilterWidth,"field-from":t.filterObj,"field-list":t.filterList,"has-content":t.hasFilterContent,placement:"bottom"},on:{"update:fieldFrom":function(e){t.filterObj=e},sure:t.refreshList,reset:t.resetFilter}}),t._v(" "),t.examineShow?a("el-button",{attrs:{type:"text"},on:{click:t.checkClick}},[t._v("查看审核")]):t._e()],1)],2),t._v(" "),a("div",{staticClass:"crm-container"},[a("statistics-card",{staticClass:"filter",attrs:{data:t.topData,"icon-show":!1,"button-show":!1,"field-list":t.topFields,title:"合计"}}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"n-table--border el-table-header--white",class:t.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{id:"crm-table","row-height":40,data:t.list,height:t.tableHeight,"summary-method":t.getSummaries,stripe:t.WKConfig.tableStyle.stripe,"show-summary":"","use-virtual":"","highlight-current-row":""}},[t._l(t.fieldList,(function(e,i){return a("el-table-column",{key:i,attrs:{fixed:0==i,prop:e.field,label:e.name,"min-width":e.width,formatter:t.fieldFormatter,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return["employeeName"===e.column.property?[t._v("\n            "+t._s(t.fieldFormatter(e.row,e.column))),1==e.row.isDel?a("span",{staticStyle:{color:"#6b778c"}},[t._v("（已删除）")]):t._e()]:[t._v("\n            "+t._s(t.fieldFormatter(e.row,e.column))+"\n          ")]]}}])})})),t._v(" "),a("el-table-column")],2),t._v(" "),a("div",{staticClass:"p-contianer"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("examine-progress-dialog",{attrs:{detail:t.topData,"ignore-action":["recovery"],visible:t.examineProDialogShow},on:{"update:visible":function(e){t.examineProDialogShow=e}}})],1)},n=[],o=a("5530"),r=(a("b64b"),a("d3b7"),a("159b"),a("d81d"),a("25f0"),a("b0c0"),a("99af"),a("fa12")),l=a("0f4c"),s=a("f468"),c=a("93cc"),d=a("4399"),u=a("9011"),f=a("2f62"),h={name:"HistoryDetail",components:{XrHeader:s["a"],StatisticsCard:c["a"],ExamineProgressDialog:d["a"],WkPopoverFilter:u["a"]},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-340,list:[],fieldList:[],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,popoverFilterWidth:document.documentElement.clientWidth-80,filterObj:{},filterList:[{name:"员工姓名",field:"employeeName",formType:"text",setting:[]},{name:"工号",field:"jobNumber",formType:"text",setting:[]},{name:"部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},request:l["e"],setting:[]}],topFields:[{label:"本月计薪人数",prop:"num"},{label:"预计应发工资",prop:"expectedPaySalary"},{label:"个人社保",prop:"personalInsuranceAmount"},{label:"个人公积金",prop:"personalProvidentFundAmount"},{label:"个人所得税",prop:"personalTax"},{label:"预计实发工资",prop:"realPaySalary"},{label:"社保-企业",prop:"corporateInsuranceAmount"},{label:"公积金-企业",prop:"corporateProvidentFundAmount"}],topData:{},sumData:null,examineProDialogShow:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(f["b"])([])),{},{hasFilterContent:function(){if(this.filterObj){for(var t=!1,e=Object.keys(this.filterObj),a=0;a<e.length;a++){var i=e[a];""!=this.filterObj[i]&&this.filterObj[i]!=[]&&null!=this.filterObj[i]&&void 0!=this.filterObj[i]&&(t=!0)}return t}return!1},id:function(){return this.$route.params.id},examineShow:function(){return this.topData&&this.topData.examineRecordId}}),watch:{},created:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-340},this.refreshList()},methods:{checkClick:function(){this.examineProDialogShow=!0},goBack:function(){this.$router.go(-1)},refreshList:function(){this.getSumData(),this.handleCurrentChange(1)},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},resetFilter:function(){this.filterObj={},this.refreshList()},getList:function(){var t=this;this.loading=!0;var e={page:this.currentPage,limit:this.pageSize,srecordId:this.id};for(var a in this.filterObj)e[a]=this.filterObj[a];Object(r["x"])(e).then((function(e){var a=e.data||{};t.topData=a;var i=a.pageData||{},n=i.list;if(n.forEach((function(t){var e=t.salary||[];e.forEach((function(e){t[e.code]=e.value}))})),t.list=n,t.total=i.totalRow,i.totalRow&&Math.ceil(i.totalRow/t.pageSize)<t.currentPage&&t.currentPage>1?(t.currentPage=t.currentPage-1,t.getList()):(t.total=i.totalRow,t.loading=!1),0==t.fieldList.length){var o=[{field:"employeeName",name:"姓名",width:150},{field:"jobNumber",name:"工号",width:100},{field:"deptName",name:"部门",width:100},{field:"post",name:"岗位",width:100}],r=a.salaryOptionHeadList||[],l=r.map((function(t){return{field:t.code.toString(),name:t.name,width:100}}));t.fieldList=o.concat(l)}t.$nextTick((function(){var t=document.querySelector(".el-table__body-wrapper");t.scrollTop=1,0!=t.scrollLeft&&(t.scrollLeft=t.scrollLeft-1)})),t.loading=!1})).catch((function(){t.loading=!1}))},getSumData:function(){var t=this;Object(r["J"])(this.id).then((function(e){var a=e.data||[],i={};a.forEach((function(t){i[t.code]=t.value})),t.sumData=i})).catch((function(){}))},getSummaries:function(t){var e=this,a=t.columns,i=[];return a.forEach((function(t,a){i[a]=0===a?"总合计":a<=5?"":e.sumData?e.sumData[t.property]:""})),i},fieldFormatter:function(t,e){return t[e.property]||"--"}}},p=h,m=(a("77c3"),a("2877")),b=Object(m["a"])(p,i,n,!1,null,"e6c903b0",null);e["default"]=b.exports},f121:function(t,e,a){}}]);